<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>COSMOS core: Cosmos::CommandQueue Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo80.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">COSMOS core
   &#160;<span id="projectnumber">1.0.2 (beta)</span>
   </div>
   <div id="projectbrief">Comprehensive Open-architecture Solution for Mission Operations Systems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_cosmos_1_1_command_queue.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="class_cosmos_1_1_command_queue-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Cosmos::CommandQueue Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class to manage information about a queue of Events.  
 <a href="class_cosmos_1_1_command_queue.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="command__queue_8h_source.html">command_queue.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for Cosmos::CommandQueue:</div>
<div class="dyncontent">
<div class="center"><!-- SVG 0 -->
</div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a276d05df22b86105510215e1e4bf34d4"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_command_queue.html#a276d05df22b86105510215e1e4bf34d4">get_size</a> ()</td></tr>
<tr class="memdesc:a276d05df22b86105510215e1e4bf34d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the size of the queue.  <a href="#a276d05df22b86105510215e1e4bf34d4">More...</a><br /></td></tr>
<tr class="separator:a276d05df22b86105510215e1e4bf34d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6823eed971b4f17f41870d817b333eaf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_cosmos_1_1_event.html">Event</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_command_queue.html#a6823eed971b4f17f41870d817b333eaf">get_command</a> (int <a class="el" href="eci2kep__test_8cpp.html#aa94081298ab2dfd0f261cce6c203d9aaa85ae20979fb729ef19da67855aecdfd5">i</a>)</td></tr>
<tr class="memdesc:a6823eed971b4f17f41870d817b333eaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve an <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> by its position in the queue.  <a href="#a6823eed971b4f17f41870d817b333eaf">More...</a><br /></td></tr>
<tr class="separator:a6823eed971b4f17f41870d817b333eaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc4733e90c28a5585f20d7168f24faa5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_command_queue.html#abc4733e90c28a5585f20d7168f24faa5">load_commands</a> (string <a class="el" href="agent__monitor_8cpp.html#ae8daa3beef6b216ff37a2e24e65931fe">incoming_dir</a>)</td></tr>
<tr class="memdesc:abc4733e90c28a5585f20d7168f24faa5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load queue of Events from a file.  <a href="#abc4733e90c28a5585f20d7168f24faa5">More...</a><br /></td></tr>
<tr class="separator:abc4733e90c28a5585f20d7168f24faa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4893c2771b01fcefb6434ad924e77428"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_command_queue.html#a4893c2771b01fcefb6434ad924e77428">save_commands</a> (string <a class="el" href="agent__monitor_8cpp.html#a093e759fd14e5caa2d86e56009ebd011">temp_dir</a>)</td></tr>
<tr class="memdesc:a4893c2771b01fcefb6434ad924e77428"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the queue of Events to a file.  <a href="#a4893c2771b01fcefb6434ad924e77428">More...</a><br /></td></tr>
<tr class="separator:a4893c2771b01fcefb6434ad924e77428"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c306c93f97d24dc4362f01f13346295"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_command_queue.html#a8c306c93f97d24dc4362f01f13346295">run_command</a> (<a class="el" href="class_cosmos_1_1_event.html">Event</a> &amp;cmd, string <a class="el" href="get__contacts_8cpp.html#a20e7ee18d1753fd7550a2b6decc45384">nodename</a>, double <a class="el" href="agent__monitor_8cpp.html#acebd9a10284791000205f89c6c3d3b76">logdate_exec</a>)</td></tr>
<tr class="memdesc:a8c306c93f97d24dc4362f01f13346295"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the given <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a>.  <a href="#a8c306c93f97d24dc4362f01f13346295">More...</a><br /></td></tr>
<tr class="separator:a8c306c93f97d24dc4362f01f13346295"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a124ec577ea47572c77f2e42ddcc022a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_command_queue.html#a124ec577ea47572c77f2e42ddcc022a6">run_commands</a> (<a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>, string <a class="el" href="get__contacts_8cpp.html#a20e7ee18d1753fd7550a2b6decc45384">nodename</a>, double <a class="el" href="agent__monitor_8cpp.html#acebd9a10284791000205f89c6c3d3b76">logdate_exec</a>)</td></tr>
<tr class="memdesc:a124ec577ea47572c77f2e42ddcc022a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Traverse the entire queue of Events, and run those which qualify.  <a href="#a124ec577ea47572c77f2e42ddcc022a6">More...</a><br /></td></tr>
<tr class="separator:a124ec577ea47572c77f2e42ddcc022a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8b671b17e92f3691b15b4b8d5244c99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_command_queue.html#aa8b671b17e92f3691b15b4b8d5244c99">add_command</a> (<a class="el" href="class_cosmos_1_1_event.html">Event</a> &amp;c)</td></tr>
<tr class="memdesc:aa8b671b17e92f3691b15b4b8d5244c99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> to the queue.  <a href="#aa8b671b17e92f3691b15b4b8d5244c99">More...</a><br /></td></tr>
<tr class="separator:aa8b671b17e92f3691b15b4b8d5244c99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b6541d007e16f68031a4777290334fd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_command_queue.html#a3b6541d007e16f68031a4777290334fd">del_command</a> (<a class="el" href="class_cosmos_1_1_event.html">Event</a> &amp;c)</td></tr>
<tr class="memdesc:a3b6541d007e16f68031a4777290334fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> from the queue.  <a href="#a3b6541d007e16f68031a4777290334fd">More...</a><br /></td></tr>
<tr class="separator:a3b6541d007e16f68031a4777290334fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93aceab110eda3cd38d1a0c084f05c4a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_command_queue.html#a93aceab110eda3cd38d1a0c084f05c4a">sort</a> ()</td></tr>
<tr class="memdesc:a93aceab110eda3cd38d1a0c084f05c4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sort the Events in the queue by <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> exectution time.  <a href="#a93aceab110eda3cd38d1a0c084f05c4a">More...</a><br /></td></tr>
<tr class="separator:a93aceab110eda3cd38d1a0c084f05c4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa94042f5d25e37dc235fed2811751060"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="class_cosmos_1_1_event.html">Event</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">commands</a></td></tr>
<tr class="separator:aa94042f5d25e37dc235fed2811751060"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad99edc80d52c98e0bb8082ebcaf27d9c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_command_queue.html#ad99edc80d52c98e0bb8082ebcaf27d9c">queue_changed</a> = false</td></tr>
<tr class="separator:ad99edc80d52c98e0bb8082ebcaf27d9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:ae0d60e38f0f82cff185f381857cb76bd"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_command_queue.html#ae0d60e38f0f82cff185f381857cb76bd">operator&lt;&lt;</a> (std::ostream &amp;out, <a class="el" href="class_cosmos_1_1_command_queue.html">CommandQueue</a> &amp;cmdq)</td></tr>
<tr class="memdesc:ae0d60e38f0f82cff185f381857cb76bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extraction operator.  <a href="#ae0d60e38f0f82cff185f381857cb76bd">More...</a><br /></td></tr>
<tr class="separator:ae0d60e38f0f82cff185f381857cb76bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class to manage information about a queue of Events. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a276d05df22b86105510215e1e4bf34d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a276d05df22b86105510215e1e4bf34d4">&#9670;&nbsp;</a></span>get_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Cosmos::CommandQueue::get_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the size of the queue. </p>
<dl class="section return"><dt>Returns</dt><dd>The size of the queue </dd></dl>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">commands</a>.size(); }</div><div class="ttc" id="class_cosmos_1_1_command_queue_html_aa94042f5d25e37dc235fed2811751060"><div class="ttname"><a href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">Cosmos::CommandQueue::commands</a></div><div class="ttdeci">std::list&lt; Event &gt; commands</div><div class="ttdef"><b>Definition:</b> command_queue.h:54</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6823eed971b4f17f41870d817b333eaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6823eed971b4f17f41870d817b333eaf">&#9670;&nbsp;</a></span>get_command()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_cosmos_1_1_event.html">Event</a>&amp; Cosmos::CommandQueue::get_command </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve an <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> by its position in the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Integer representing the position in the queue </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Reference to the ith <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        std::list&lt;Event&gt;::iterator ii = <a class="code" href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">commands</a>.begin();</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        std::advance(ii,<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">return</span> *ii;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    }</div><div class="ttc" id="rw__test_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="class_cosmos_1_1_command_queue_html_aa94042f5d25e37dc235fed2811751060"><div class="ttname"><a href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">Cosmos::CommandQueue::commands</a></div><div class="ttdeci">std::list&lt; Event &gt; commands</div><div class="ttdef"><b>Definition:</b> command_queue.h:54</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abc4733e90c28a5585f20d7168f24faa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc4733e90c28a5585f20d7168f24faa5">&#9670;&nbsp;</a></span>load_commands()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cosmos::CommandQueue::load_commands </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>incoming_dir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load queue of Events from a file. </p>
<p>Reads new Events from *.command files in the incoming directory, adds them to the queue of Events, and deletes the *.command files. Events in the queue are then sorted by their execution time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">incoming_dir</td><td>Directory where the .queue file will be read from </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;{</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="struct_d_i_r.html">DIR</a> *<a class="code" href="agent__file_8cpp.html#a673af6b00c5e935a8bc1befefdb98b9d">dir</a> = NULL;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdirent.html">dirent</a> *<a class="code" href="agent__file_8cpp.html#a0208e9e346413843268afe4bd4d95b75">dir_entry</a> = NULL;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">// open the incoming directory</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">if</span> ((dir = <a class="code" href="dirent_8c.html#a1632d8c06c14f295c6d9407b7fec67af">opendir</a>((<span class="keywordtype">char</span> *)<a class="code" href="agent__exec_8cpp.html#ae8daa3beef6b216ff37a2e24e65931fe">incoming_dir</a>.c_str())) == NULL)</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        std::cout&lt;&lt;<span class="stringliteral">&quot;error: unable to open node&#39;s incoming directory &lt;&quot;</span>&lt;&lt;<a class="code" href="agent__exec_8cpp.html#ae8daa3beef6b216ff37a2e24e65931fe">incoming_dir</a>&lt;&lt;<span class="stringliteral">&quot;&gt; not found&quot;</span>&lt;&lt;std::endl;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">// cycle through all the file names in the incoming directory</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">while</span>((dir_entry = <a class="code" href="dirent_8c.html#ae4d263c5a1d3825c9511a898762513b2">readdir</a>(dir)) != NULL)</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="keywordtype">string</span> filename = dir_entry-&gt;<a class="code" href="structdirent.html#ab703007dd91aa1f311cf0fc85268b2e1">d_name</a>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">if</span> (filename.find(<span class="stringliteral">&quot;.command&quot;</span>) != string::npos)</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordtype">string</span> infilepath = <a class="code" href="agent__exec_8cpp.html#ae8daa3beef6b216ff37a2e24e65931fe">incoming_dir</a> + filename;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            std::ifstream infile(infilepath.c_str());</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordflow">if</span>(!infile.is_open())</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                std::cout&lt;&lt;<span class="stringliteral">&quot;unable to read file &lt;&quot;</span>&lt;&lt;infilepath&lt;&lt;<span class="stringliteral">&quot;&gt;&quot;</span>&lt;&lt;std::endl;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="comment">//file is open for reading commands</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="keywordtype">string</span> line;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <a class="code" href="class_cosmos_1_1_event.html">Event</a> cmd;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <span class="keywordflow">while</span>(getline(infile,line))</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                <span class="comment">//cmd.set_command(line, agent); // TODO: is it really necessary to pass *agent?</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                cmd.<a class="code" href="class_cosmos_1_1_event.html#ad71a7fffaef8b47a90e66c68fd01f75e">set_command</a>(line); <span class="comment">// TODO: is it really necessary to pass *agent?  NOPE!</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                std::cout&lt;&lt;cmd;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                <span class="keywordflow">if</span>(cmd.is_command())</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                    <a class="code" href="class_cosmos_1_1_command_queue.html#aa8b671b17e92f3691b15b4b8d5244c99">add_command</a>(cmd);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                    std::cout&lt;&lt;<span class="stringliteral">&quot;Not a command!&quot;</span>&lt;&lt;std::endl;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            infile.close();</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="comment">//remove the .command file from incoming directory</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="keywordflow">if</span>(<span class="keyword">remove</span>(infilepath.c_str()))  {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                std::cout&lt;&lt;<span class="stringliteral">&quot;unable to delete file &lt;&quot;</span>&lt;&lt;filename&lt;&lt;<span class="stringliteral">&quot;&gt;&quot;</span>&lt;&lt;std::endl;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            std::cout&lt;&lt;<span class="stringliteral">&quot;The size of the command queue is: &quot;</span>&lt;&lt; <a class="code" href="class_cosmos_1_1_command_queue.html#a276d05df22b86105510215e1e4bf34d4">get_size</a>()&lt;&lt;std::endl;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        }</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="class_cosmos_1_1_command_queue.html#a93aceab110eda3cd38d1a0c084f05c4a">sort</a>();</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="dirent_8c.html#ac0258906f9453b8abf03e945aa9c9676">closedir</a>(dir);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div><div class="ttc" id="class_cosmos_1_1_command_queue_html_a276d05df22b86105510215e1e4bf34d4"><div class="ttname"><a href="class_cosmos_1_1_command_queue.html#a276d05df22b86105510215e1e4bf34d4">Cosmos::CommandQueue::get_size</a></div><div class="ttdeci">size_t get_size()</div><div class="ttdoc">Retrieve the size of the queue. </div><div class="ttdef"><b>Definition:</b> command_queue.h:64</div></div>
<div class="ttc" id="class_cosmos_1_1_command_queue_html_aa8b671b17e92f3691b15b4b8d5244c99"><div class="ttname"><a href="class_cosmos_1_1_command_queue.html#aa8b671b17e92f3691b15b4b8d5244c99">Cosmos::CommandQueue::add_command</a></div><div class="ttdeci">void add_command(Event &amp;c)</div><div class="ttdoc">Add Event to the queue. </div><div class="ttdef"><b>Definition:</b> command_queue.cpp:250</div></div>
<div class="ttc" id="class_cosmos_1_1_event_html"><div class="ttname"><a href="class_cosmos_1_1_event.html">Cosmos::Event</a></div><div class="ttdoc">Class to manage Event information. </div><div class="ttdef"><b>Definition:</b> event.h:57</div></div>
<div class="ttc" id="dirent_8c_html_ac0258906f9453b8abf03e945aa9c9676"><div class="ttname"><a href="dirent_8c.html#ac0258906f9453b8abf03e945aa9c9676">closedir</a></div><div class="ttdeci">int closedir(DIR *dir)</div><div class="ttdef"><b>Definition:</b> dirent.c:74</div></div>
<div class="ttc" id="struct_d_i_r_html"><div class="ttname"><a href="struct_d_i_r.html">DIR</a></div><div class="ttdef"><b>Definition:</b> dirent.c:24</div></div>
<div class="ttc" id="class_cosmos_1_1_command_queue_html_a93aceab110eda3cd38d1a0c084f05c4a"><div class="ttname"><a href="class_cosmos_1_1_command_queue.html#a93aceab110eda3cd38d1a0c084f05c4a">Cosmos::CommandQueue::sort</a></div><div class="ttdeci">void sort()</div><div class="ttdoc">Sort the Events in the queue by Event exectution time. </div><div class="ttdef"><b>Definition:</b> command_queue.h:144</div></div>
<div class="ttc" id="structdirent_html"><div class="ttname"><a href="structdirent.html">dirent</a></div><div class="ttdef"><b>Definition:</b> dirent.h:21</div></div>
<div class="ttc" id="dirent_8c_html_a1632d8c06c14f295c6d9407b7fec67af"><div class="ttname"><a href="dirent_8c.html#a1632d8c06c14f295c6d9407b7fec67af">opendir</a></div><div class="ttdeci">DIR * opendir(const char *name)</div><div class="ttdef"><b>Definition:</b> dirent.c:32</div></div>
<div class="ttc" id="dirent_8c_html_ae4d263c5a1d3825c9511a898762513b2"><div class="ttname"><a href="dirent_8c.html#ae4d263c5a1d3825c9511a898762513b2">readdir</a></div><div class="ttdeci">struct dirent * readdir(DIR *dir)</div><div class="ttdef"><b>Definition:</b> dirent.c:97</div></div>
<div class="ttc" id="class_cosmos_1_1_event_html_ad71a7fffaef8b47a90e66c68fd01f75e"><div class="ttname"><a href="class_cosmos_1_1_event.html#ad71a7fffaef8b47a90e66c68fd01f75e">Cosmos::Event::set_command</a></div><div class="ttdeci">void set_command(string jstring)</div><div class="ttdoc">Sets Event information from a JSON formatted string. </div><div class="ttdef"><b>Definition:</b> event.cpp:130</div></div>
<div class="ttc" id="agent__exec_8cpp_html_ae8daa3beef6b216ff37a2e24e65931fe"><div class="ttname"><a href="agent__exec_8cpp.html#ae8daa3beef6b216ff37a2e24e65931fe">incoming_dir</a></div><div class="ttdeci">string incoming_dir</div><div class="ttdef"><b>Definition:</b> agent_exec.cpp:76</div></div>
<div class="ttc" id="structdirent_html_ab703007dd91aa1f311cf0fc85268b2e1"><div class="ttname"><a href="structdirent.html#ab703007dd91aa1f311cf0fc85268b2e1">dirent::d_name</a></div><div class="ttdeci">char * d_name</div><div class="ttdef"><b>Definition:</b> dirent.h:23</div></div>
<div class="ttc" id="agent__file_8cpp_html_a673af6b00c5e935a8bc1befefdb98b9d"><div class="ttname"><a href="agent__file_8cpp.html#a673af6b00c5e935a8bc1befefdb98b9d">dir</a></div><div class="ttdeci">DIR * dir</div><div class="ttdef"><b>Definition:</b> agent_file.cpp:138</div></div>
<div class="ttc" id="agent__file_8cpp_html_a0208e9e346413843268afe4bd4d95b75"><div class="ttname"><a href="agent__file_8cpp.html#a0208e9e346413843268afe4bd4d95b75">dir_entry</a></div><div class="ttdeci">struct dirent * dir_entry</div><div class="ttdef"><b>Definition:</b> agent_file.cpp:139</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4893c2771b01fcefb6434ad924e77428"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4893c2771b01fcefb6434ad924e77428">&#9670;&nbsp;</a></span>save_commands()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cosmos::CommandQueue::save_commands </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>temp_dir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save the queue of Events to a file. </p>
<p>Save the queue of Events to the file temp_dir/.queue</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">temp_dir</td><td>Directory where the .queue file will be written </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;{</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_cosmos_1_1_command_queue.html#ad99edc80d52c98e0bb8082ebcaf27d9c">queue_changed</a>)</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="class_cosmos_1_1_command_queue.html#ad99edc80d52c98e0bb8082ebcaf27d9c">queue_changed</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// Open the outgoing file</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    FILE *<a class="code" href="arduino__lib_8cpp.html#a6f8059414f0228f0256115e024eeed4b">fd</a> = fopen((<a class="code" href="agent__exec_8cpp.html#a093e759fd14e5caa2d86e56009ebd011">temp_dir</a>+<span class="stringliteral">&quot;.queue&quot;</span>).c_str(), <span class="stringliteral">&quot;w&quot;</span>);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">if</span> (fd != NULL)</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="class_cosmos_1_1_event.html">Event</a> cmd: <a class="code" href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">commands</a>)</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            fprintf(fd, <span class="stringliteral">&quot;%s\n&quot;</span>, cmd.get_event_string().c_str());</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        fclose(fd);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div><div class="ttc" id="class_cosmos_1_1_event_html"><div class="ttname"><a href="class_cosmos_1_1_event.html">Cosmos::Event</a></div><div class="ttdoc">Class to manage Event information. </div><div class="ttdef"><b>Definition:</b> event.h:57</div></div>
<div class="ttc" id="arduino__lib_8cpp_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="arduino__lib_8cpp.html#a6f8059414f0228f0256115e024eeed4b">fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> arduino_lib.cpp:61</div></div>
<div class="ttc" id="class_cosmos_1_1_command_queue_html_aa94042f5d25e37dc235fed2811751060"><div class="ttname"><a href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">Cosmos::CommandQueue::commands</a></div><div class="ttdeci">std::list&lt; Event &gt; commands</div><div class="ttdef"><b>Definition:</b> command_queue.h:54</div></div>
<div class="ttc" id="agent__exec_8cpp_html_a093e759fd14e5caa2d86e56009ebd011"><div class="ttname"><a href="agent__exec_8cpp.html#a093e759fd14e5caa2d86e56009ebd011">temp_dir</a></div><div class="ttdeci">string temp_dir</div><div class="ttdef"><b>Definition:</b> agent_exec.cpp:78</div></div>
<div class="ttc" id="class_cosmos_1_1_command_queue_html_ad99edc80d52c98e0bb8082ebcaf27d9c"><div class="ttname"><a href="class_cosmos_1_1_command_queue.html#ad99edc80d52c98e0bb8082ebcaf27d9c">Cosmos::CommandQueue::queue_changed</a></div><div class="ttdeci">bool queue_changed</div><div class="ttdef"><b>Definition:</b> command_queue.h:56</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c306c93f97d24dc4362f01f13346295"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c306c93f97d24dc4362f01f13346295">&#9670;&nbsp;</a></span>run_command()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cosmos::CommandQueue::run_command </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_event.html">Event</a> &amp;&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>nodename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>logdate_exec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run the given <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a>. </p>
<p>Execute an event using ford(). For each event run, the time of execution (utcexec) is set, the flag EVENT_FLAG_ACTUAL is set to true, and this updated command information is logged to the OUTPUT directory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>Reference to event to run </td></tr>
    <tr><td class="paramname">nodename</td><td>Name of node </td></tr>
    <tr><td class="paramname">logdate_exec</td><td>Time of execution (for logging purposes) </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <a class="code" href="class_cosmos_1_1_command_queue.html#ad99edc80d52c98e0bb8082ebcaf27d9c">queue_changed</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="comment">// set time executed &amp; actual flag</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    cmd.<a class="code" href="class_cosmos_1_1_event.html#ab7f0502ef916a950ec3b2d8f0c6b1a3e">set_utcexec</a>();</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    cmd.<a class="code" href="class_cosmos_1_1_event.html#a8bf3c30576db73ae0cbfa1f03e4cca1f">set_actual</a>();</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// execute command</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#if defined(COSMOS_WIN_OS)</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordtype">char</span> command_line[100];</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    strcpy(command_line, cmd.<a class="code" href="class_cosmos_1_1_event.html#a9cedca544fafdb198ea00ab83a642fb0">get_data</a>().c_str());</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    STARTUPINFOA si;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    PROCESS_INFORMATION pi;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    ZeroMemory( &amp;si, <span class="keyword">sizeof</span>(si) );</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    si.cb = <span class="keyword">sizeof</span>(si);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    ZeroMemory( &amp;pi, <span class="keyword">sizeof</span>(pi) );</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span> (CreateProcessA(NULL, (LPSTR) command_line, NULL, NULL, <a class="code" href="jpleph_8cpp.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, 0, NULL, NULL, &amp;si, &amp;pi))</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="comment">//      int32_t pid = pi.dwProcessId;</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        CloseHandle( pi.hProcess );</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        CloseHandle( pi.hThread );</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    }</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    signal(SIGCHLD, SIG_IGN);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    int32_t <a class="code" href="agent__exec_8cpp.html#af500917c052066b40cf47f96b43c607b">pid</a> = fork();</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">switch</span>(pid)</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">case</span> -1:</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordtype">char</span> *words[<a class="code" href="event_8h.html#a636e1d656b193f470aae7f30ae37d36f">MAXCOMMANDWORD</a>];</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keywordtype">int</span> devn;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <a class="code" href="group__stringlib__functions.html#gac2f77cbf8c83852b7622ff727c7198ac">string_parse</a>((<span class="keywordtype">char</span> *)cmd.<a class="code" href="class_cosmos_1_1_event.html#a9cedca544fafdb198ea00ab83a642fb0">get_data</a>().c_str(),words,<a class="code" href="event_8h.html#a636e1d656b193f470aae7f30ae37d36f">MAXCOMMANDWORD</a>);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordtype">string</span> outpath = <a class="code" href="group__datalib__functions.html#gade4d81e56aef2cda654079f687269673">data_type_path</a>(<a class="code" href="agent__add__soh_8cpp.html#abcf8067ced0bd5a229d3279ad5b4ac28">nodename</a>, <span class="stringliteral">&quot;temp&quot;</span>, <span class="stringliteral">&quot;exec&quot;</span>, <a class="code" href="agent__exec_8cpp.html#acebd9a10284791000205f89c6c3d3b76">logdate_exec</a>, <span class="stringliteral">&quot;out&quot;</span>);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keywordflow">if</span> (outpath.empty())</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            devn = open(<span class="stringliteral">&quot;/dev/null&quot;</span>,O_RDWR);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        }</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            devn = open(outpath.c_str(), O_CREAT|O_WRONLY|O_APPEND, 00666);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        }</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        dup2(devn, STDIN_FILENO);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        dup2(devn, STDOUT_FILENO);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        dup2(devn, STDERR_FILENO);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        close(devn);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        execvp(words[0],&amp;(words[0]));</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        fflush(stdout);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        exit (0);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// log to event file</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="group__datalib__functions.html#ga8ca104f9429693c5e2c78bb543e62cc1">log_write</a>(<a class="code" href="agent__add__soh_8cpp.html#abcf8067ced0bd5a229d3279ad5b4ac28">nodename</a>, <span class="stringliteral">&quot;exec&quot;</span>, <a class="code" href="agent__exec_8cpp.html#acebd9a10284791000205f89c6c3d3b76">logdate_exec</a>, <span class="stringliteral">&quot;event&quot;</span>, cmd.<a class="code" href="class_cosmos_1_1_event.html#ada0ebe2941daa3218decd42f57f7db91">get_event_string</a>().c_str());</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div><div class="ttc" id="group__datalib__functions_html_ga8ca104f9429693c5e2c78bb543e62cc1"><div class="ttname"><a href="group__datalib__functions.html#ga8ca104f9429693c5e2c78bb543e62cc1">log_write</a></div><div class="ttdeci">void log_write(string node, string location, string agent, double utc, string extra, string type, string record)</div><div class="ttdoc">Write log entry - full. </div><div class="ttdef"><b>Definition:</b> datalib.cpp:75</div></div>
<div class="ttc" id="jpleph_8cpp_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="jpleph_8cpp.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> jpleph.cpp:69</div></div>
<div class="ttc" id="group__datalib__functions_html_gade4d81e56aef2cda654079f687269673"><div class="ttname"><a href="group__datalib__functions.html#gade4d81e56aef2cda654079f687269673">data_type_path</a></div><div class="ttdeci">string data_type_path(string node, string location, string agent, double mjd, string type)</div><div class="ttdoc">Create data file path. </div><div class="ttdef"><b>Definition:</b> datalib.cpp:797</div></div>
<div class="ttc" id="class_cosmos_1_1_event_html_ada0ebe2941daa3218decd42f57f7db91"><div class="ttname"><a href="class_cosmos_1_1_event.html#ada0ebe2941daa3218decd42f57f7db91">Cosmos::Event::get_event_string</a></div><div class="ttdeci">string get_event_string()</div><div class="ttdoc">Retrieves Event information. </div><div class="ttdef"><b>Definition:</b> event.cpp:150</div></div>
<div class="ttc" id="agent__exec_8cpp_html_af500917c052066b40cf47f96b43c607b"><div class="ttname"><a href="agent__exec_8cpp.html#af500917c052066b40cf47f96b43c607b">pid</a></div><div class="ttdeci">int pid</div><div class="ttdef"><b>Definition:</b> agent_exec.cpp:124</div></div>
<div class="ttc" id="event_8h_html_a636e1d656b193f470aae7f30ae37d36f"><div class="ttname"><a href="event_8h.html#a636e1d656b193f470aae7f30ae37d36f">MAXCOMMANDWORD</a></div><div class="ttdeci">#define MAXCOMMANDWORD</div><div class="ttdef"><b>Definition:</b> event.h:49</div></div>
<div class="ttc" id="class_cosmos_1_1_event_html_ab7f0502ef916a950ec3b2d8f0c6b1a3e"><div class="ttname"><a href="class_cosmos_1_1_event.html#ab7f0502ef916a950ec3b2d8f0c6b1a3e">Cosmos::Event::set_utcexec</a></div><div class="ttdeci">void set_utcexec()</div><div class="ttdoc">Sets Event::utcexec to current time. </div><div class="ttdef"><b>Definition:</b> event.h:100</div></div>
<div class="ttc" id="group__stringlib__functions_html_gac2f77cbf8c83852b7622ff727c7198ac"><div class="ttname"><a href="group__stringlib__functions.html#gac2f77cbf8c83852b7622ff727c7198ac">string_parse</a></div><div class="ttdeci">uint16_t string_parse(char *string, char *words[], uint16_t wmax)</div><div class="ttdoc">Parse a string into words. </div><div class="ttdef"><b>Definition:</b> stringlib.cpp:87</div></div>
<div class="ttc" id="agent__add__soh_8cpp_html_abcf8067ced0bd5a229d3279ad5b4ac28"><div class="ttname"><a href="agent__add__soh_8cpp.html#abcf8067ced0bd5a229d3279ad5b4ac28">nodename</a></div><div class="ttdeci">string nodename</div><div class="ttdef"><b>Definition:</b> agent_add_soh.cpp:54</div></div>
<div class="ttc" id="class_cosmos_1_1_event_html_a9cedca544fafdb198ea00ab83a642fb0"><div class="ttname"><a href="class_cosmos_1_1_event.html#a9cedca544fafdb198ea00ab83a642fb0">Cosmos::Event::get_data</a></div><div class="ttdeci">string get_data()</div><div class="ttdoc">Retrieves Event::data. </div><div class="ttdef"><b>Definition:</b> event.h:142</div></div>
<div class="ttc" id="class_cosmos_1_1_command_queue_html_ad99edc80d52c98e0bb8082ebcaf27d9c"><div class="ttname"><a href="class_cosmos_1_1_command_queue.html#ad99edc80d52c98e0bb8082ebcaf27d9c">Cosmos::CommandQueue::queue_changed</a></div><div class="ttdeci">bool queue_changed</div><div class="ttdef"><b>Definition:</b> command_queue.h:56</div></div>
<div class="ttc" id="class_cosmos_1_1_event_html_a8bf3c30576db73ae0cbfa1f03e4cca1f"><div class="ttname"><a href="class_cosmos_1_1_event.html#a8bf3c30576db73ae0cbfa1f03e4cca1f">Cosmos::Event::set_actual</a></div><div class="ttdeci">void set_actual()</div><div class="ttdoc">Sets Event::flag to indicate the event has actually executed (i.e. EVENT_FLAG_ACTUAL) ...</div><div class="ttdef"><b>Definition:</b> event.h:106</div></div>
<div class="ttc" id="agent__exec_8cpp_html_acebd9a10284791000205f89c6c3d3b76"><div class="ttname"><a href="agent__exec_8cpp.html#acebd9a10284791000205f89c6c3d3b76">logdate_exec</a></div><div class="ttdeci">double logdate_exec</div><div class="ttdef"><b>Definition:</b> agent_exec.cpp:82</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a124ec577ea47572c77f2e42ddcc022a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a124ec577ea47572c77f2e42ddcc022a6">&#9670;&nbsp;</a></span>run_commands()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cosmos::CommandQueue::run_commands </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>nodename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>logdate_exec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Traverse the entire queue of Events, and run those which qualify. </p>
<p>An Event only qualifies to run if the current time is greater than or equal to the execution time of the Event. Further, if the Event is conditional, then the Event condition must be true.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> object (for call to condition_true(..)) </td></tr>
    <tr><td class="paramname">nodename</td><td>Name of the node </td></tr>
    <tr><td class="paramname">logdate_exec</td><td>Time of execution (for logging purposes) </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;{</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">for</span>(std::list&lt;Event&gt;::iterator ii = <a class="code" href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">commands</a>.begin(); ii != <a class="code" href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">commands</a>.end(); ++ii) {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="comment">// if command is ready</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keywordflow">if</span> (ii-&gt;is_ready()) {</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="comment">// if command is conditional</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="keywordflow">if</span> (ii-&gt;is_conditional()) {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                <span class="comment">// if command condition is true</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                <span class="keywordflow">if</span>(ii-&gt;condition_true(agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>)) {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                    <span class="comment">// if command is repeatable</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                    <span class="keywordflow">if</span>(ii-&gt;is_repeat()) {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                        <span class="comment">// if command has not already run</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                        <span class="keywordflow">if</span>(!ii-&gt;already_ran)    {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                            <a class="code" href="class_cosmos_1_1_command_queue.html#a8c306c93f97d24dc4362f01f13346295">run_command</a>(*ii, <a class="code" href="agent__add__soh_8cpp.html#abcf8067ced0bd5a229d3279ad5b4ac28">nodename</a>, <a class="code" href="agent__exec_8cpp.html#acebd9a10284791000205f89c6c3d3b76">logdate_exec</a>);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                            ii-&gt;already_ran = <span class="keyword">true</span>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                        }</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                    <span class="comment">// else command is non-repeatable</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                        <a class="code" href="class_cosmos_1_1_command_queue.html#a8c306c93f97d24dc4362f01f13346295">run_command</a>(*ii, <a class="code" href="agent__add__soh_8cpp.html#abcf8067ced0bd5a229d3279ad5b4ac28">nodename</a>, <a class="code" href="agent__exec_8cpp.html#acebd9a10284791000205f89c6c3d3b76">logdate_exec</a>);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                        <a class="code" href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">commands</a>.erase(ii--);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                    }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                <span class="comment">// else command condition is false</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                    ii-&gt;already_ran = <span class="keyword">false</span>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            <span class="comment">// else command is non-conditional</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                <a class="code" href="class_cosmos_1_1_command_queue.html#a8c306c93f97d24dc4362f01f13346295">run_command</a>(*ii, <a class="code" href="agent__add__soh_8cpp.html#abcf8067ced0bd5a229d3279ad5b4ac28">nodename</a>, <a class="code" href="agent__exec_8cpp.html#acebd9a10284791000205f89c6c3d3b76">logdate_exec</a>);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                <a class="code" href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">commands</a>.erase(ii--);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            ;<span class="comment">//cout&lt;&lt;&quot;This command is *NOT* ready to run! &quot;;</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="class_cosmos_1_1_command_queue_html_aa94042f5d25e37dc235fed2811751060"><div class="ttname"><a href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">Cosmos::CommandQueue::commands</a></div><div class="ttdeci">std::list&lt; Event &gt; commands</div><div class="ttdef"><b>Definition:</b> command_queue.h:54</div></div>
<div class="ttc" id="agent__add__soh_8cpp_html_abcf8067ced0bd5a229d3279ad5b4ac28"><div class="ttname"><a href="agent__add__soh_8cpp.html#abcf8067ced0bd5a229d3279ad5b4ac28">nodename</a></div><div class="ttdeci">string nodename</div><div class="ttdef"><b>Definition:</b> agent_add_soh.cpp:54</div></div>
<div class="ttc" id="class_cosmos_1_1_command_queue_html_a8c306c93f97d24dc4362f01f13346295"><div class="ttname"><a href="class_cosmos_1_1_command_queue.html#a8c306c93f97d24dc4362f01f13346295">Cosmos::CommandQueue::run_command</a></div><div class="ttdeci">void run_command(Event &amp;cmd, string nodename, double logdate_exec)</div><div class="ttdoc">Run the given Event. </div><div class="ttdef"><b>Definition:</b> command_queue.cpp:45</div></div>
<div class="ttc" id="agent__exec_8cpp_html_acebd9a10284791000205f89c6c3d3b76"><div class="ttname"><a href="agent__exec_8cpp.html#acebd9a10284791000205f89c6c3d3b76">logdate_exec</a></div><div class="ttdeci">double logdate_exec</div><div class="ttdef"><b>Definition:</b> agent_exec.cpp:82</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa8b671b17e92f3691b15b4b8d5244c99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8b671b17e92f3691b15b4b8d5244c99">&#9670;&nbsp;</a></span>add_command()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cosmos::CommandQueue::add_command </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_event.html">Event</a> &amp;&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> to the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td><a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> to add</td></tr>
  </table>
  </dd>
</dl>
<p>JIMNOTE: this only adds given <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> to the queue if the <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> has flag for EVENT_TYPE_COMMAND set to true </p>
<div class="fragment"><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;{</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">commands</a>.push_back(c);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="class_cosmos_1_1_command_queue.html#ad99edc80d52c98e0bb8082ebcaf27d9c">queue_changed</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div><div class="ttc" id="class_cosmos_1_1_command_queue_html_aa94042f5d25e37dc235fed2811751060"><div class="ttname"><a href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">Cosmos::CommandQueue::commands</a></div><div class="ttdeci">std::list&lt; Event &gt; commands</div><div class="ttdef"><b>Definition:</b> command_queue.h:54</div></div>
<div class="ttc" id="class_cosmos_1_1_command_queue_html_ad99edc80d52c98e0bb8082ebcaf27d9c"><div class="ttname"><a href="class_cosmos_1_1_command_queue.html#ad99edc80d52c98e0bb8082ebcaf27d9c">Cosmos::CommandQueue::queue_changed</a></div><div class="ttdeci">bool queue_changed</div><div class="ttdef"><b>Definition:</b> command_queue.h:56</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b6541d007e16f68031a4777290334fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b6541d007e16f68031a4777290334fd">&#9670;&nbsp;</a></span>del_command()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Cosmos::CommandQueue::del_command </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_event.html">Event</a> &amp;&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> from the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td><a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> to remove </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of Events removed</dd></dl>
<p>This function only removes events from the queue if the are exactly equal to the given <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a>. </p>
<div class="fragment"><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;{</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordtype">int</span> n = 0;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">for</span>(std::list&lt;Event&gt;::iterator ii = <a class="code" href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">commands</a>.begin(); ii != <a class="code" href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">commands</a>.end(); ++ii)</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">if</span>(c==*ii)</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <a class="code" href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">commands</a>.erase(ii--);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            n++;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="class_cosmos_1_1_command_queue.html#ad99edc80d52c98e0bb8082ebcaf27d9c">queue_changed</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">return</span> n;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div><div class="ttc" id="class_cosmos_1_1_command_queue_html_aa94042f5d25e37dc235fed2811751060"><div class="ttname"><a href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">Cosmos::CommandQueue::commands</a></div><div class="ttdeci">std::list&lt; Event &gt; commands</div><div class="ttdef"><b>Definition:</b> command_queue.h:54</div></div>
<div class="ttc" id="class_cosmos_1_1_command_queue_html_ad99edc80d52c98e0bb8082ebcaf27d9c"><div class="ttname"><a href="class_cosmos_1_1_command_queue.html#ad99edc80d52c98e0bb8082ebcaf27d9c">Cosmos::CommandQueue::queue_changed</a></div><div class="ttdeci">bool queue_changed</div><div class="ttdef"><b>Definition:</b> command_queue.h:56</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a93aceab110eda3cd38d1a0c084f05c4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93aceab110eda3cd38d1a0c084f05c4a">&#9670;&nbsp;</a></span>sort()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Cosmos::CommandQueue::sort </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sort the Events in the queue by <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> exectution time. </p>
<p>This function is called after new Events are loaded. </p>
<div class="fragment"><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;{ <a class="code" href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">commands</a>.sort([](<a class="code" href="class_cosmos_1_1_event.html">Event</a> &amp; c1, <a class="code" href="class_cosmos_1_1_event.html">Event</a> &amp; c2) { <span class="keywordflow">return</span> c1.<a class="code" href="class_cosmos_1_1_event.html#a8f09c08cff8f35ec5061b600e9418d75">getTime</a>() &lt; c2.<a class="code" href="class_cosmos_1_1_event.html#a8f09c08cff8f35ec5061b600e9418d75">getTime</a>(); });    }</div><div class="ttc" id="class_cosmos_1_1_event_html"><div class="ttname"><a href="class_cosmos_1_1_event.html">Cosmos::Event</a></div><div class="ttdoc">Class to manage Event information. </div><div class="ttdef"><b>Definition:</b> event.h:57</div></div>
<div class="ttc" id="class_cosmos_1_1_command_queue_html_aa94042f5d25e37dc235fed2811751060"><div class="ttname"><a href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">Cosmos::CommandQueue::commands</a></div><div class="ttdeci">std::list&lt; Event &gt; commands</div><div class="ttdef"><b>Definition:</b> command_queue.h:54</div></div>
<div class="ttc" id="class_cosmos_1_1_event_html_a8f09c08cff8f35ec5061b600e9418d75"><div class="ttname"><a href="class_cosmos_1_1_event.html#a8f09c08cff8f35ec5061b600e9418d75">Cosmos::Event::getTime</a></div><div class="ttdeci">string getTime()</div><div class="ttdoc">Retrieves Event::mjd. </div><div class="ttdef"><b>Definition:</b> event.h:130</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="ae0d60e38f0f82cff185f381857cb76bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0d60e38f0f82cff185f381857cb76bd">&#9670;&nbsp;</a></span>operator<<</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_command_queue.html">CommandQueue</a> &amp;&#160;</td>
          <td class="paramname"><em>cmdq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extraction operator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out</td><td>Reference to ostream </td></tr>
    <tr><td class="paramname">cmdq</td><td>Reference to <a class="el" href="class_cosmos_1_1_command_queue.html" title="Class to manage information about a queue of Events. ">CommandQueue</a> (JIMNOTE: should be const, ya?) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Reference to modified ostream</dd></dl>
<p>Writes the given <a class="el" href="class_cosmos_1_1_command_queue.html" title="Class to manage information about a queue of Events. ">CommandQueue</a> to the given output stream (in JSON format) and returns a reference to the modified ostream. </p>
<div class="fragment"><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;{</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">for</span>(std::list&lt;Event&gt;::iterator ii = cmdq.<a class="code" href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">commands</a>.begin(); ii != cmdq.<a class="code" href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">commands</a>.end(); ++ii)</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        out &lt;&lt; *ii &lt;&lt; std::endl;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">return</span> out;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div><div class="ttc" id="class_cosmos_1_1_command_queue_html_aa94042f5d25e37dc235fed2811751060"><div class="ttname"><a href="class_cosmos_1_1_command_queue.html#aa94042f5d25e37dc235fed2811751060">Cosmos::CommandQueue::commands</a></div><div class="ttdeci">std::list&lt; Event &gt; commands</div><div class="ttdef"><b>Definition:</b> command_queue.h:54</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa94042f5d25e37dc235fed2811751060"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa94042f5d25e37dc235fed2811751060">&#9670;&nbsp;</a></span>commands</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="class_cosmos_1_1_event.html">Event</a>&gt; Cosmos::CommandQueue::commands</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>An std::list of members of the <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> class </p>

</div>
</div>
<a id="ad99edc80d52c98e0bb8082ebcaf27d9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad99edc80d52c98e0bb8082ebcaf27d9c">&#9670;&nbsp;</a></span>queue_changed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Cosmos::CommandQueue::queue_changed = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A boolean indicator that the queue has changed </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="command__queue_8h_source.html">command_queue.h</a></li>
<li><a class="el" href="command__queue_8cpp.html">command_queue.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_cosmos.html">Cosmos</a></li><li class="navelem"><a class="el" href="class_cosmos_1_1_command_queue.html">CommandQueue</a></li>
    <li class="footer">Generated on Mon Mar 11 2019 15:12:49 for COSMOS core by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
