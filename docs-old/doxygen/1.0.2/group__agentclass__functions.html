<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>COSMOS core: Agent Server and Client functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo80.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">COSMOS core
   &#160;<span id="projectnumber">1.0.2 (beta)</span>
   </div>
   <div id="projectbrief">Comprehensive Open-architecture Solution for Mission Operations Systems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__agentclass__functions.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Agent Server and Client functions<div class="ingroups"><a class="el" href="group__libraries.html">API libraries</a> &raquo; <a class="el" href="group__support.html">Support Libraries</a> &raquo; <a class="el" href="group__agentclass.html">Agent Server and Client Library</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Agent Server and Client functions:</div>
<div class="dyncontent">
<center><table><tr><td><div class="center"><!-- SVG 0 -->
</div>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4ffe212764559e5217d1c77d716aa5c4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga4ffe212764559e5217d1c77d716aa5c4">Cosmos::Agent::Agent</a> (<a class="el" href="zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> string &amp;nname=&quot;&quot;, <a class="el" href="zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> string &amp;aname=&quot;&quot;, double bprd=1., uint32_t <a class="el" href="udp__send_8cpp.html#a3a32b16072250412b156cb8bbbfad792">bsize</a>=<a class="el" href="group__jsonlib__constants.html#ga855b38da23dc26339aa8a5d726aab4a6">AGENTMAXBUFFER</a>, bool mflag=false, int32_t portnum=0, <a class="el" href="group__socketlib__constants.html#gac3df430da2e0e847835025092b9dfdcf">NetworkType</a> <a class="el" href="agent__node_8cpp.html#a8dadfa60d80a481745f0212f7caec1e7">ntype</a>=<a class="el" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9">NetworkType::UDP</a>, int32_t dlevel=1)</td></tr>
<tr class="separator:ga4ffe212764559e5217d1c77d716aa5c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac21b07d8064a82f85a53e559cd99e50b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gac21b07d8064a82f85a53e559cd99e50b">Cosmos::Agent::~Agent</a> ()</td></tr>
<tr class="separator:gac21b07d8064a82f85a53e559cd99e50b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga72b8917a48bd4aa82c81e1b4c530fbf0"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga72b8917a48bd4aa82c81e1b4c530fbf0">Cosmos::Agent::add_request_internal</a> (string token, <a class="el" href="group__agentclass__typedefs.html#gafa77892edc5df612f17921ff8866f94c">internal_request_function</a> function, string synopsis=&quot;&quot;, string description=&quot;&quot;)</td></tr>
<tr class="memdesc:ga72b8917a48bd4aa82c81e1b4c530fbf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add internal request to <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> request list with description and synopsis.  <a href="#ga72b8917a48bd4aa82c81e1b4c530fbf0">More...</a><br /></td></tr>
<tr class="separator:ga72b8917a48bd4aa82c81e1b4c530fbf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3554b695e778e2c8c88529b550183553"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Cosmos::Agent::add_request</a> (string token, <a class="el" href="group__agentclass__typedefs.html#gae5129efcecd14a447489b4b72023bcaa">external_request_function</a> function, string synopsis=&quot;&quot;, string description=&quot;&quot;)</td></tr>
<tr class="memdesc:ga3554b695e778e2c8c88529b550183553"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add external request to <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> request list with description and synopsis.  <a href="#ga3554b695e778e2c8c88529b550183553">More...</a><br /></td></tr>
<tr class="separator:ga3554b695e778e2c8c88529b550183553"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae3c7fcc26911f4024f5862a3442544e2"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gae3c7fcc26911f4024f5862a3442544e2">Cosmos::Agent::start</a> ()</td></tr>
<tr class="memdesc:gae3c7fcc26911f4024f5862a3442544e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> Request and Heartbeat loops.  <a href="#gae3c7fcc26911f4024f5862a3442544e2">More...</a><br /></td></tr>
<tr class="separator:gae3c7fcc26911f4024f5862a3442544e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga169e2d7af28306cc51118ea903b405a1"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga169e2d7af28306cc51118ea903b405a1">Cosmos::Agent::shutdown</a> ()</td></tr>
<tr class="memdesc:ga169e2d7af28306cc51118ea903b405a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shutdown agent gracefully.  <a href="#ga169e2d7af28306cc51118ea903b405a1">More...</a><br /></td></tr>
<tr class="separator:ga169e2d7af28306cc51118ea903b405a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga59c00820cf975e432ee3edd54198b5ae"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga59c00820cf975e432ee3edd54198b5ae">Cosmos::Agent::running</a> ()</td></tr>
<tr class="memdesc:ga59c00820cf975e432ee3edd54198b5ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if we're supposed to be running.  <a href="#ga59c00820cf975e432ee3edd54198b5ae">More...</a><br /></td></tr>
<tr class="separator:ga59c00820cf975e432ee3edd54198b5ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f0b7d82313c3c678e0b354bd6defa56"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga2f0b7d82313c3c678e0b354bd6defa56">Cosmos::Agent::last_error</a> ()</td></tr>
<tr class="separator:ga2f0b7d82313c3c678e0b354bd6defa56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81048eb6c9d2254e64f49a3f1441c747"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga81048eb6c9d2254e64f49a3f1441c747">Cosmos::Agent::send_request</a> (<a class="el" href="structbeatstruc.html">beatstruc</a> <a class="el" href="agent__file_8cpp.html#ae484bb989e54cf3db9f05b4c4f67d3c5">cbeat</a>, string request, string &amp;<a class="el" href="agent__physics_8cpp.html#a47866494eb84961e021291efbea9b569">output</a>, float <a class="el" href="agent__transmitter2_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>=5.)</td></tr>
<tr class="memdesc:ga81048eb6c9d2254e64f49a3f1441c747"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a request over AGENT.  <a href="#ga81048eb6c9d2254e64f49a3f1441c747">More...</a><br /></td></tr>
<tr class="separator:ga81048eb6c9d2254e64f49a3f1441c747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga197a9db35272fb6da91019ea0fe35ff6"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga197a9db35272fb6da91019ea0fe35ff6">Cosmos::Agent::send_request_jsonnode</a> (<a class="el" href="structbeatstruc.html">beatstruc</a> <a class="el" href="agent__file_8cpp.html#ae484bb989e54cf3db9f05b4c4f67d3c5">cbeat</a>, <a class="el" href="structjsonnode.html">jsonnode</a> &amp;jnode, float <a class="el" href="agent__transmitter2_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>=5.)</td></tr>
<tr class="memdesc:ga197a9db35272fb6da91019ea0fe35ff6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send request for Node JSON.  <a href="#ga197a9db35272fb6da91019ea0fe35ff6">More...</a><br /></td></tr>
<tr class="separator:ga197a9db35272fb6da91019ea0fe35ff6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga663fc208857aba63e7a9e5e7bbe2091b"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga663fc208857aba63e7a9e5e7bbe2091b">Cosmos::Agent::get_server</a> (string <a class="el" href="agent__transmitter2_8cpp.html#ad29dd3eb08405cc91b75944131d22f86">node</a>, string name, float <a class="el" href="agent__transmitter2_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>, <a class="el" href="structbeatstruc.html">beatstruc</a> *<a class="el" href="agent__file_8cpp.html#ae484bb989e54cf3db9f05b4c4f67d3c5">cbeat</a>)</td></tr>
<tr class="memdesc:ga663fc208857aba63e7a9e5e7bbe2091b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get specific server.  <a href="#ga663fc208857aba63e7a9e5e7bbe2091b">More...</a><br /></td></tr>
<tr class="separator:ga663fc208857aba63e7a9e5e7bbe2091b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f607e4e5023fcc3ccce30dbb9d8829d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structbeatstruc.html">beatstruc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga2f607e4e5023fcc3ccce30dbb9d8829d">Cosmos::Agent::find_agent</a> (string <a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>, string <a class="el" href="agent__transmitter2_8cpp.html#ad29dd3eb08405cc91b75944131d22f86">node</a>=&quot;&quot;)</td></tr>
<tr class="memdesc:ga2f607e4e5023fcc3ccce30dbb9d8829d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find agent.  <a href="#ga2f607e4e5023fcc3ccce30dbb9d8829d">More...</a><br /></td></tr>
<tr class="separator:ga2f607e4e5023fcc3ccce30dbb9d8829d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f48792e2c91bc53809c0731459a7945"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structbeatstruc.html">beatstruc</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga5f48792e2c91bc53809c0731459a7945">Cosmos::Agent::find_server</a> (string <a class="el" href="agent__transmitter2_8cpp.html#ad29dd3eb08405cc91b75944131d22f86">node</a>, string proc, float <a class="el" href="agent__transmitter2_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>)</td></tr>
<tr class="memdesc:ga5f48792e2c91bc53809c0731459a7945"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find single server.  <a href="#ga5f48792e2c91bc53809c0731459a7945">More...</a><br /></td></tr>
<tr class="separator:ga5f48792e2c91bc53809c0731459a7945"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabcd7ffc95114664fa6e33f032e99ea3e"><td class="memItemLeft" align="right" valign="top">vector&lt; <a class="el" href="structbeatstruc.html">beatstruc</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gabcd7ffc95114664fa6e33f032e99ea3e">Cosmos::Agent::find_servers</a> (float <a class="el" href="agent__transmitter2_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>)</td></tr>
<tr class="memdesc:gabcd7ffc95114664fa6e33f032e99ea3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a list of request servers.  <a href="#gabcd7ffc95114664fa6e33f032e99ea3e">More...</a><br /></td></tr>
<tr class="separator:gabcd7ffc95114664fa6e33f032e99ea3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5c498fd14ffe4aa64c37375776da4743"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga5c498fd14ffe4aa64c37375776da4743">Cosmos::Agent::set_sohstring</a> (string list)</td></tr>
<tr class="memdesc:ga5c498fd14ffe4aa64c37375776da4743"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set SOH string.  <a href="#ga5c498fd14ffe4aa64c37375776da4743">More...</a><br /></td></tr>
<tr class="separator:ga5c498fd14ffe4aa64c37375776da4743"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae2c9ea84ca79cf0d2c104ec6a6d33dfc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcosmosstruc.html">cosmosstruc</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gae2c9ea84ca79cf0d2c104ec6a6d33dfc">Cosmos::Agent::get_cosmosstruc</a> ()</td></tr>
<tr class="memdesc:gae2c9ea84ca79cf0d2c104ec6a6d33dfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> <a class="el" href="structcosmosstruc.html" title="JSON Name Space structure. ">cosmosstruc</a>.  <a href="#gae2c9ea84ca79cf0d2c104ec6a6d33dfc">More...</a><br /></td></tr>
<tr class="separator:gae2c9ea84ca79cf0d2c104ec6a6d33dfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae6a8536dc23bce8abbd2c3c7f214f043"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gae6a8536dc23bce8abbd2c3c7f214f043">Cosmos::Agent::heartbeat_loop</a> ()</td></tr>
<tr class="memdesc:gae6a8536dc23bce8abbd2c3c7f214f043"><td class="mdescLeft">&#160;</td><td class="mdescRight">Heartbeat Loop.  <a href="#gae6a8536dc23bce8abbd2c3c7f214f043">More...</a><br /></td></tr>
<tr class="separator:gae6a8536dc23bce8abbd2c3c7f214f043"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8722137ad27c4a53108639b3f261b086"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga8722137ad27c4a53108639b3f261b086">Cosmos::Agent::request_loop</a> ()</td></tr>
<tr class="memdesc:ga8722137ad27c4a53108639b3f261b086"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request Loop.  <a href="#ga8722137ad27c4a53108639b3f261b086">More...</a><br /></td></tr>
<tr class="separator:ga8722137ad27c4a53108639b3f261b086"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae04b862b76dec1ff0fc347c1dd5e6022"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gae04b862b76dec1ff0fc347c1dd5e6022">Cosmos::Agent::message_loop</a> ()</td></tr>
<tr class="separator:gae04b862b76dec1ff0fc347c1dd5e6022"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaef0e1a80e74c3a987a9fdab354e8e0f9"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gaef0e1a80e74c3a987a9fdab354e8e0f9">Cosmos::Agent::req_forward</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:gaef0e1a80e74c3a987a9fdab354e8e0f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Forward request.  <a href="#gaef0e1a80e74c3a987a9fdab354e8e0f9">More...</a><br /></td></tr>
<tr class="separator:gaef0e1a80e74c3a987a9fdab354e8e0f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4f3c2e6e8162321e91379e1703ff79c5"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga4f3c2e6e8162321e91379e1703ff79c5">Cosmos::Agent::req_echo</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:ga4f3c2e6e8162321e91379e1703ff79c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Echo request.  <a href="#ga4f3c2e6e8162321e91379e1703ff79c5">More...</a><br /></td></tr>
<tr class="separator:ga4f3c2e6e8162321e91379e1703ff79c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf63b8c1d676c0734dbed0d67d7e3d3ff"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gaf63b8c1d676c0734dbed0d67d7e3d3ff">Cosmos::Agent::req_help</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:gaf63b8c1d676c0734dbed0d67d7e3d3ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Help request.  <a href="#gaf63b8c1d676c0734dbed0d67d7e3d3ff">More...</a><br /></td></tr>
<tr class="separator:gaf63b8c1d676c0734dbed0d67d7e3d3ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad4cffb2c8ebf9635c0496de9ea647f21"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gad4cffb2c8ebf9635c0496de9ea647f21">Cosmos::Agent::req_run</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:gad4cffb2c8ebf9635c0496de9ea647f21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Set state to Run request.  <a href="#gad4cffb2c8ebf9635c0496de9ea647f21">More...</a><br /></td></tr>
<tr class="separator:gad4cffb2c8ebf9635c0496de9ea647f21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gade8cb836df40b0909eef7391a681be67"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gade8cb836df40b0909eef7391a681be67">Cosmos::Agent::req_init</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:gade8cb836df40b0909eef7391a681be67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Set state to Init request.  <a href="#gade8cb836df40b0909eef7391a681be67">More...</a><br /></td></tr>
<tr class="separator:gade8cb836df40b0909eef7391a681be67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga52fe6103651cf3cf8d17a943f3e32951"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga52fe6103651cf3cf8d17a943f3e32951">Cosmos::Agent::req_idle</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:ga52fe6103651cf3cf8d17a943f3e32951"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Set state to Idle request.  <a href="#ga52fe6103651cf3cf8d17a943f3e32951">More...</a><br /></td></tr>
<tr class="separator:ga52fe6103651cf3cf8d17a943f3e32951"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab62ec8abf3ce91ae47a7518fd6776efe"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gab62ec8abf3ce91ae47a7518fd6776efe">Cosmos::Agent::req_monitor</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:gab62ec8abf3ce91ae47a7518fd6776efe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Set state to Idle request.  <a href="#gab62ec8abf3ce91ae47a7518fd6776efe">More...</a><br /></td></tr>
<tr class="separator:gab62ec8abf3ce91ae47a7518fd6776efe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8335f377fd81f2cc46444a120e3d9cf6"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga8335f377fd81f2cc46444a120e3d9cf6">Cosmos::Agent::req_shutdown</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:ga8335f377fd81f2cc46444a120e3d9cf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Set state to Shutdown request.  <a href="#ga8335f377fd81f2cc46444a120e3d9cf6">More...</a><br /></td></tr>
<tr class="separator:ga8335f377fd81f2cc46444a120e3d9cf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2243a22014f702aeb776ddafc75f1785"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga2243a22014f702aeb776ddafc75f1785">Cosmos::Agent::req_status</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:ga2243a22014f702aeb776ddafc75f1785"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Status request.  <a href="#ga2243a22014f702aeb776ddafc75f1785">More...</a><br /></td></tr>
<tr class="separator:ga2243a22014f702aeb776ddafc75f1785"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga62c62a98ae54a2d7522cccfc5cd0872c"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga62c62a98ae54a2d7522cccfc5cd0872c">Cosmos::Agent::req_getvalue</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:ga62c62a98ae54a2d7522cccfc5cd0872c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Get Internal Value request.  <a href="#ga62c62a98ae54a2d7522cccfc5cd0872c">More...</a><br /></td></tr>
<tr class="separator:ga62c62a98ae54a2d7522cccfc5cd0872c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga622a8be9a9d9bad9cbd779ed1484fb20"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga622a8be9a9d9bad9cbd779ed1484fb20">Cosmos::Agent::req_setvalue</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:ga622a8be9a9d9bad9cbd779ed1484fb20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Set Internal Value request.  <a href="#ga622a8be9a9d9bad9cbd779ed1484fb20">More...</a><br /></td></tr>
<tr class="separator:ga622a8be9a9d9bad9cbd779ed1484fb20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab3d95206d1390f92e148c2dddd7215a1"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gab3d95206d1390f92e148c2dddd7215a1">Cosmos::Agent::req_listnames</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:gab3d95206d1390f92e148c2dddd7215a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in List Name Space Names request.  <a href="#gab3d95206d1390f92e148c2dddd7215a1">More...</a><br /></td></tr>
<tr class="separator:gab3d95206d1390f92e148c2dddd7215a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6db24da96b512a97d6c69c39798f8148"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga6db24da96b512a97d6c69c39798f8148">Cosmos::Agent::req_nodejson</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:ga6db24da96b512a97d6c69c39798f8148"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Return Node JSON request.  <a href="#ga6db24da96b512a97d6c69c39798f8148">More...</a><br /></td></tr>
<tr class="separator:ga6db24da96b512a97d6c69c39798f8148"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga69bcf7a5e951f583b34eec2ce1c88450"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga69bcf7a5e951f583b34eec2ce1c88450">Cosmos::Agent::req_statejson</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:ga69bcf7a5e951f583b34eec2ce1c88450"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Return State Vector JSON request.  <a href="#ga69bcf7a5e951f583b34eec2ce1c88450">More...</a><br /></td></tr>
<tr class="separator:ga69bcf7a5e951f583b34eec2ce1c88450"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga31960e94fea85f7244e207b9bb61db95"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga31960e94fea85f7244e207b9bb61db95">Cosmos::Agent::req_utcstartjson</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:ga31960e94fea85f7244e207b9bb61db95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Return UTC Start Time JSON request.  <a href="#ga31960e94fea85f7244e207b9bb61db95">More...</a><br /></td></tr>
<tr class="separator:ga31960e94fea85f7244e207b9bb61db95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabf7622188a887ecf43541d6f73d0ba60"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gabf7622188a887ecf43541d6f73d0ba60">Cosmos::Agent::req_piecesjson</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:gabf7622188a887ecf43541d6f73d0ba60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Return Pieces JSON request.  <a href="#gabf7622188a887ecf43541d6f73d0ba60">More...</a><br /></td></tr>
<tr class="separator:gabf7622188a887ecf43541d6f73d0ba60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0020ac71638c1b52d03690b0aa0b2bb4"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga0020ac71638c1b52d03690b0aa0b2bb4">Cosmos::Agent::req_facesjson</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:ga0020ac71638c1b52d03690b0aa0b2bb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Return Face JSON request.  <a href="#ga0020ac71638c1b52d03690b0aa0b2bb4">More...</a><br /></td></tr>
<tr class="separator:ga0020ac71638c1b52d03690b0aa0b2bb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa6fddd4e5873c894f25ab0cf553057e5"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gaa6fddd4e5873c894f25ab0cf553057e5">Cosmos::Agent::req_vertexsjson</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:gaa6fddd4e5873c894f25ab0cf553057e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Return Vertex JSON request.  <a href="#gaa6fddd4e5873c894f25ab0cf553057e5">More...</a><br /></td></tr>
<tr class="separator:gaa6fddd4e5873c894f25ab0cf553057e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76e19fa0aa103a92a61f633a05cca273"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga76e19fa0aa103a92a61f633a05cca273">Cosmos::Agent::req_devgenjson</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:ga76e19fa0aa103a92a61f633a05cca273"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Return devgen JSON request.  <a href="#ga76e19fa0aa103a92a61f633a05cca273">More...</a><br /></td></tr>
<tr class="separator:ga76e19fa0aa103a92a61f633a05cca273"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacaf51c84a2e25d74481816a768ced7fa"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gacaf51c84a2e25d74481816a768ced7fa">Cosmos::Agent::req_devspecjson</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:gacaf51c84a2e25d74481816a768ced7fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Return devspec JSON request.  <a href="#gacaf51c84a2e25d74481816a768ced7fa">More...</a><br /></td></tr>
<tr class="separator:gacaf51c84a2e25d74481816a768ced7fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0df8199c96c5a3ad03a884375fcb09c1"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga0df8199c96c5a3ad03a884375fcb09c1">Cosmos::Agent::req_portsjson</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:ga0df8199c96c5a3ad03a884375fcb09c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Return Ports JSON request.  <a href="#ga0df8199c96c5a3ad03a884375fcb09c1">More...</a><br /></td></tr>
<tr class="separator:ga0df8199c96c5a3ad03a884375fcb09c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga14efc5e88eeab6582c310eadc615ebc4"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga14efc5e88eeab6582c310eadc615ebc4">Cosmos::Agent::req_targetsjson</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:ga14efc5e88eeab6582c310eadc615ebc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Return Target JSON request.  <a href="#ga14efc5e88eeab6582c310eadc615ebc4">More...</a><br /></td></tr>
<tr class="separator:ga14efc5e88eeab6582c310eadc615ebc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga922dedb6c0cef06fd6febed2c867ea88"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga922dedb6c0cef06fd6febed2c867ea88">Cosmos::Agent::req_aliasesjson</a> (char *request, char *<a class="el" href="agent__monitor_8cpp.html#a124856be085c9b564533602e3b44f981">response</a>, <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</td></tr>
<tr class="memdesc:ga922dedb6c0cef06fd6febed2c867ea88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built-in Return Alias JSON request.  <a href="#ga922dedb6c0cef06fd6febed2c867ea88">More...</a><br /></td></tr>
<tr class="separator:ga922dedb6c0cef06fd6febed2c867ea88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaffbdfeaef9fa32bb4e17bf62070d7fdc"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gaffbdfeaef9fa32bb4e17bf62070d7fdc">Cosmos::Agent::publish</a> (<a class="el" href="group__socketlib__constants.html#gac3df430da2e0e847835025092b9dfdcf">NetworkType</a> type, uint16_t <a class="el" href="udp__send_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>)</td></tr>
<tr class="memdesc:gaffbdfeaef9fa32bb4e17bf62070d7fdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open COSMOS output channel.  <a href="#gaffbdfeaef9fa32bb4e17bf62070d7fdc">More...</a><br /></td></tr>
<tr class="separator:gaffbdfeaef9fa32bb4e17bf62070d7fdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga176b1e94cddffc5f787761347db14153"><td class="memItemLeft" align="right" valign="top">vector&lt; <a class="el" href="structsocket__channel.html">socket_channel</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga176b1e94cddffc5f787761347db14153">Cosmos::Agent::find_addresses</a> (<a class="el" href="group__socketlib__constants.html#gac3df430da2e0e847835025092b9dfdcf">NetworkType</a> <a class="el" href="agent__node_8cpp.html#a8dadfa60d80a481745f0212f7caec1e7">ntype</a>)</td></tr>
<tr class="memdesc:ga176b1e94cddffc5f787761347db14153"><td class="mdescLeft">&#160;</td><td class="mdescRight">Discover interfaces.  <a href="#ga176b1e94cddffc5f787761347db14153">More...</a><br /></td></tr>
<tr class="separator:ga176b1e94cddffc5f787761347db14153"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1e156ba9e17f232c99927228f658742a"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga1e156ba9e17f232c99927228f658742a">Cosmos::Agent::post</a> (<a class="el" href="struct_cosmos_1_1_agent_1_1messstruc.html">messstruc</a> mess)</td></tr>
<tr class="memdesc:ga1e156ba9e17f232c99927228f658742a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Post a <a class="el" href="struct_cosmos_1_1_agent_1_1messstruc.html" title="Storage for messages. ">Cosmos::Agent::messstruc</a>.  <a href="#ga1e156ba9e17f232c99927228f658742a">More...</a><br /></td></tr>
<tr class="separator:ga1e156ba9e17f232c99927228f658742a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad05108dbb3a8dde7edfe68977cdc0682"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gad05108dbb3a8dde7edfe68977cdc0682">Cosmos::Agent::post</a> (<a class="el" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3">AgentMessage</a> type, string <a class="el" href="kpc9612p__send_8cpp.html#a98f0d289faa791f0d8c593ad13c4a2cb">message</a>)</td></tr>
<tr class="memdesc:gad05108dbb3a8dde7edfe68977cdc0682"><td class="mdescLeft">&#160;</td><td class="mdescRight">Post a JSON message.  <a href="#gad05108dbb3a8dde7edfe68977cdc0682">More...</a><br /></td></tr>
<tr class="separator:gad05108dbb3a8dde7edfe68977cdc0682"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9c388b879284eca0ea31adfb958ec6e5"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga9c388b879284eca0ea31adfb958ec6e5">Cosmos::Agent::post</a> (<a class="el" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3">AgentMessage</a> type, vector&lt; uint8_t &gt; <a class="el" href="kpc9612p__send_8cpp.html#a98f0d289faa791f0d8c593ad13c4a2cb">message</a>)</td></tr>
<tr class="memdesc:ga9c388b879284eca0ea31adfb958ec6e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Post a binary message.  <a href="#ga9c388b879284eca0ea31adfb958ec6e5">More...</a><br /></td></tr>
<tr class="separator:ga9c388b879284eca0ea31adfb958ec6e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa27dffcf08893f097bcedbfaa94a3962"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gaa27dffcf08893f097bcedbfaa94a3962">Cosmos::Agent::unpublish</a> ()</td></tr>
<tr class="memdesc:gaa27dffcf08893f097bcedbfaa94a3962"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close COSMOS output channel.  <a href="#gaa27dffcf08893f097bcedbfaa94a3962">More...</a><br /></td></tr>
<tr class="separator:gaa27dffcf08893f097bcedbfaa94a3962"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5fde2392e8658597c958c5cf31b6c1d5"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga5fde2392e8658597c958c5cf31b6c1d5">Cosmos::Agent::subscribe</a> (<a class="el" href="group__socketlib__constants.html#gac3df430da2e0e847835025092b9dfdcf">NetworkType</a> type, char *<a class="el" href="udp__send_8cpp.html#af3b7e39acd3b2652e57c54093e6beaef">address</a>, uint16_t <a class="el" href="udp__send_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>, uint32_t usectimeo)</td></tr>
<tr class="memdesc:ga5fde2392e8658597c958c5cf31b6c1d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open COSMOS channel for polling.  <a href="#ga5fde2392e8658597c958c5cf31b6c1d5">More...</a><br /></td></tr>
<tr class="separator:ga5fde2392e8658597c958c5cf31b6c1d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae7537a95956006a6b7b5270b7f120adf"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gae7537a95956006a6b7b5270b7f120adf">Cosmos::Agent::subscribe</a> (<a class="el" href="group__socketlib__constants.html#gac3df430da2e0e847835025092b9dfdcf">NetworkType</a> type, char *<a class="el" href="udp__send_8cpp.html#af3b7e39acd3b2652e57c54093e6beaef">address</a>, uint16_t <a class="el" href="udp__send_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>)</td></tr>
<tr class="memdesc:gae7537a95956006a6b7b5270b7f120adf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open COSMOS channel for polling with 100 usec timeout.  <a href="#gae7537a95956006a6b7b5270b7f120adf">More...</a><br /></td></tr>
<tr class="separator:gae7537a95956006a6b7b5270b7f120adf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ea40efbdd8401534041b27b6036e293"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga7ea40efbdd8401534041b27b6036e293">Cosmos::Agent::unsubscribe</a> ()</td></tr>
<tr class="memdesc:ga7ea40efbdd8401534041b27b6036e293"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close COSMOS subscription channel.  <a href="#ga7ea40efbdd8401534041b27b6036e293">More...</a><br /></td></tr>
<tr class="separator:ga7ea40efbdd8401534041b27b6036e293"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3df5bd25d96922bd613cbd888cd765ea"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga3df5bd25d96922bd613cbd888cd765ea">Cosmos::Agent::poll</a> (<a class="el" href="struct_cosmos_1_1_agent_1_1messstruc.html">messstruc</a> &amp;mess, <a class="el" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3">AgentMessage</a> type, float <a class="el" href="agent__transmitter2_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>=1.)</td></tr>
<tr class="memdesc:ga3df5bd25d96922bd613cbd888cd765ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Listen for message.  <a href="#ga3df5bd25d96922bd613cbd888cd765ea">More...</a><br /></td></tr>
<tr class="separator:ga3df5bd25d96922bd613cbd888cd765ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2bfd2b74883eb369dd1fe7ef1e729362"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga2bfd2b74883eb369dd1fe7ef1e729362">Cosmos::Agent::readring</a> (<a class="el" href="struct_cosmos_1_1_agent_1_1messstruc.html">messstruc</a> &amp;<a class="el" href="kpc9612p__send_8cpp.html#a98f0d289faa791f0d8c593ad13c4a2cb">message</a>, <a class="el" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3">AgentMessage</a> type=<a class="el" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3a5fb1f955b45e38e31789286a1790398d">Agent::AgentMessage::ALL</a>, float <a class="el" href="agent__transmitter2_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>=1., <a class="el" href="class_cosmos_1_1_agent.html#a3458c617269e7e40b1c1d256dbd8d791">Where</a> where=<a class="el" href="class_cosmos_1_1_agent.html#a3458c617269e7e40b1c1d256dbd8d791ae15e216fc1c639f787b1231ecdfa1bf8">Where::HEAD</a>)</td></tr>
<tr class="memdesc:ga2bfd2b74883eb369dd1fe7ef1e729362"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check Ring for message.  <a href="#ga2bfd2b74883eb369dd1fe7ef1e729362">More...</a><br /></td></tr>
<tr class="separator:ga2bfd2b74883eb369dd1fe7ef1e729362"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4df93666026e9180b6cfe9c03684bf21"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga4df93666026e9180b6cfe9c03684bf21">Cosmos::Agent::resizering</a> (size_t newsize)</td></tr>
<tr class="separator:ga4df93666026e9180b6cfe9c03684bf21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0deaf958242b89a436e7cacc338644be"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga0deaf958242b89a436e7cacc338644be">Cosmos::Agent::clearring</a> ()</td></tr>
<tr class="separator:ga0deaf958242b89a436e7cacc338644be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4484fee24c2b15297262d124e75b5606"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga4484fee24c2b15297262d124e75b5606">Cosmos::Agent::getNode</a> ()</td></tr>
<tr class="memdesc:ga4484fee24c2b15297262d124e75b5606"><td class="mdescLeft">&#160;</td><td class="mdescRight">Listen for heartbeat.  <a href="#ga4484fee24c2b15297262d124e75b5606">More...</a><br /></td></tr>
<tr class="separator:ga4484fee24c2b15297262d124e75b5606"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab060a3fcc706bccdfaff094bed2aae7f"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#gab060a3fcc706bccdfaff094bed2aae7f">Cosmos::Agent::getAgent</a> ()</td></tr>
<tr class="separator:gab060a3fcc706bccdfaff094bed2aae7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga55f4cd28f0f9823aa19ce182fb1c09be"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__agentclass__functions.html#ga55f4cd28f0f9823aa19ce182fb1c09be">Cosmos::Agent::getJson</a> (string <a class="el" href="agent__transmitter2_8cpp.html#ad29dd3eb08405cc91b75944131d22f86">node</a>, <a class="el" href="structjsonnode.html">jsonnode</a> &amp;jnode)</td></tr>
<tr class="separator:ga55f4cd28f0f9823aa19ce182fb1c09be"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga4ffe212764559e5217d1c77d716aa5c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4ffe212764559e5217d1c77d716aa5c4">&#9670;&nbsp;</a></span>Agent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Cosmos::Agent::Agent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> string &amp;&#160;</td>
          <td class="paramname"><em>nname</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zconf_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> string &amp;&#160;</td>
          <td class="paramname"><em>aname</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>bprd</em> = <code>1.</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>bsize</em> = <code><a class="el" href="group__jsonlib__constants.html#ga855b38da23dc26339aa8a5d726aab4a6">AGENTMAXBUFFER</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>mflag</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>portnum</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__socketlib__constants.html#gac3df430da2e0e847835025092b9dfdcf">NetworkType</a>&#160;</td>
          <td class="paramname"><em>ntype</em> = <code><a class="el" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9">NetworkType::UDP</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>dlevel</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add COSMOS awareness. Sets up minimum framework for COSMOS awareness. The minimum call makes a nodeless client, setting up the message ring buffer thread, and a main thread of execution. Additional parameters are related to making the program a true <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> by tieing it to a node, and starting the request and heartbeat threads. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ntype</td><td>Transport Layer protocol to be used, taken from <a class="el" href="group__socketlib__constants.html#gac3df430da2e0e847835025092b9dfdcf">NetworkType</a>. Defaults to UDP Broadcast. </td></tr>
    <tr><td class="paramname">nname</td><td>Node name. Defaults to empty. </td></tr>
    <tr><td class="paramname">aname</td><td><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> name. Defaults to empty. If this is defined, the full <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> code will be started. </td></tr>
    <tr><td class="paramname">bprd</td><td>Period, in seconds, for heartbeat. Defaults to 1. </td></tr>
    <tr><td class="paramname">bsize</td><td>Size of interagent communication buffer. Defaults to <a class="el" href="group__jsonlib__constants.html#ga855b38da23dc26339aa8a5d726aab4a6" title="Entire cosmosstruc. ">AGENTMAXBUFFER</a>. </td></tr>
    <tr><td class="paramname">mflag</td><td>Boolean controlling weyher or not multiple instances of the same <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> can start. If true, then <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> names will have an index number appended (eg: myname_001). If false, agent will listen for 5 seconds and terminate if it senses the <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> already running. </td></tr>
    <tr><td class="paramname">portnum</td><td>The network port to listen on for requests. Defaults to 0 whereupon it will use whatever th OS assigns. </td></tr>
    <tr><td class="paramname">dlevel</td><td>debug level. Defaults to 1 so that if there is an error the user can immediately see it. also initialized in the namespace variables </td></tr>
  </table>
  </dd>
</dl>
<p>Set up initial requests </p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        int32_t <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordtype">double</span> <a class="code" href="class_cosmos_1_1_agent.html#a80591b5a14afc6c0fff575a1617cea90">timeStart</a> = <a class="code" href="group__timelib__functions.html#ga39f0682a60fce7940363aad40ad4a244">currentmjd</a>();</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#ab3e2c1c0d199c6048fc5225dfec80e66">debug_level</a> = dlevel;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#ab3e2c1c0d199c6048fc5225dfec80e66">debug_level</a>)</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        {</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;------------------------------------------------------&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;COSMOS AGENT &#39;&quot;</span> &lt;&lt; aname &lt;&lt; <span class="stringliteral">&quot;&#39; on node &#39;&quot;</span> &lt;&lt; nname &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;Version &quot;</span> &lt;&lt; <a class="code" href="class_cosmos_1_1_agent.html#a3309f171adf8dd4bfd0ff8e47ee0bc88">version</a> &lt;&lt; <span class="stringliteral">&quot; built on &quot;</span> &lt;&lt;  __DATE__ &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; __TIME__ &lt;&lt; std::endl;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;Agent started at &quot;</span> &lt;&lt; <a class="code" href="group__timelib__functions.html#gab0ead502a0d6b15367214ff905184097">mjdToGregorian</a>(timeStart) &lt;&lt; std::endl;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;Debug level &quot;</span> &lt;&lt; <a class="code" href="class_cosmos_1_1_agent.html#ab3e2c1c0d199c6048fc5225dfec80e66">debug_level</a> &lt;&lt; endl;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;------------------------------------------------------&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        }</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="comment">// Initialize COSMOS data space</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a> = <a class="code" href="group__jsonlib__functions.html#ga1173f060b7fa659b6ffc356212bbd2b6">json_create</a>()) == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        }</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].stateflag = (uint16_t)<a class="code" href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4afaee4ca3c30ee18148ce3ada37466498">Agent::State::INIT</a>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="comment">// Establish subscribe channel</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        iretn = <a class="code" href="group__agentclass__functions.html#gae7537a95956006a6b7b5270b7f120adf">Agent::subscribe</a>(<a class="code" href="agent__exec_8cpp.html#a8dadfa60d80a481745f0212f7caec1e7">ntype</a>, (<span class="keywordtype">char</span> *)<a class="code" href="agentclass_8h.html#a6b8209d791a15719a1f73e324391f6b3">AGENTMCAST</a>, <a class="code" href="agentclass_8h.html#aee1f2a0c98d7dd198092c79cde60dcf6">AGENTSENDPORT</a>, 1000);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">if</span> (iretn)</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <a class="code" href="group__jsonlib__functions.html#gafc8a926e76e35a61add7aaf1749764fd">json_destroy</a>(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        }</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="comment">// Set up node if there is one.</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">if</span> (nname.length()&gt;<a class="code" href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a> || (!nname.empty() &amp;&amp; (iretn=<a class="code" href="group__jsonlib__functions.html#ga49c99860b3f8d4265436287acd2527ca">json_setup_node</a>(nname, <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>)) != 0))</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            <a class="code" href="class_cosmos_1_1_agent.html#a412e30b2f66dd9b3648f96cda2f09e3a">error_value</a> = <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <a class="code" href="group__agentclass__functions.html#ga169e2d7af28306cc51118ea903b405a1">Agent::shutdown</a>();</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">if</span> (nname.empty())</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            strcpy(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af4e942210d74ec7b18eed16914c366ce">node</a>.<a class="code" href="structnodestruc.html#a97d97ec5e0931a700ff182b9c864051f">name</a>,<span class="stringliteral">&quot;null&quot;</span>);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].client = 1;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af4e942210d74ec7b18eed16914c366ce">node</a>.<a class="code" href="structnodestruc.html#a8e437786c6d1c3bb01151d4e1362bd08">utc</a> = 0.;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        strncpy(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.node, <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af4e942210d74ec7b18eed16914c366ce">node</a>.<a class="code" href="structnodestruc.html#a97d97ec5e0931a700ff182b9c864051f">name</a> ,<a class="code" href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a>);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.ntype = <a class="code" href="agent__exec_8cpp.html#a8dadfa60d80a481745f0212f7caec1e7">ntype</a>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="comment">// Make copies</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">//        if ((iretn=json_clone(cinfo-&gt;sdata)) != 0)</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">//        {</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">//            Agent::shutdown();</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">//            return;</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">//        }</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="comment">// Start message listening thread</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a2fa764ae8585f071f115aabe4583251d">mthread</a> = thread([=] { <a class="code" href="group__agentclass__functions.html#gae04b862b76dec1ff0fc347c1dd5e6022">message_loop</a>(); });</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        COSMOS_SLEEP(.1);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="comment">// Return if all we are doing is setting up client.</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">if</span> (aname.length() == 0)</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">if</span> (strlen(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af4e942210d74ec7b18eed16914c366ce">node</a>.<a class="code" href="structnodestruc.html#a97d97ec5e0931a700ff182b9c864051f">name</a>)&gt;<a class="code" href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a> || aname.length()&gt;<a class="code" href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a>)</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <a class="code" href="class_cosmos_1_1_agent.html#a412e30b2f66dd9b3648f96cda2f09e3a">error_value</a> = <a class="code" href="group__error__defines.html#gab1ccf6937b6ca8a2377517d448ce22ad">JSON_ERROR_NAME_LENGTH</a>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <a class="code" href="group__agentclass__functions.html#ga169e2d7af28306cc51118ea903b405a1">Agent::shutdown</a>();</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="comment">// If not Multi, check if this Agent is already running</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordtype">char</span> tname[<a class="code" href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a>+1];</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">if</span> (!mflag)</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            COSMOS_SLEEP(<a class="code" href="class_cosmos_1_1_agent.html#a4d1bf8bcb831d5ea21328dfa592fc3b8">timeoutSec</a>);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="group__agentclass__functions.html#ga663fc208857aba63e7a9e5e7bbe2091b">Agent::get_server</a>(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af4e942210d74ec7b18eed16914c366ce">node</a>.<a class="code" href="structnodestruc.html#a97d97ec5e0931a700ff182b9c864051f">name</a>, aname, <a class="code" href="class_cosmos_1_1_agent.html#a4d1bf8bcb831d5ea21328dfa592fc3b8">timeoutSec</a>, (<a class="code" href="structbeatstruc.html">beatstruc</a> *)NULL))</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                <a class="code" href="class_cosmos_1_1_agent.html#a412e30b2f66dd9b3648f96cda2f09e3a">error_value</a> = <a class="code" href="group__error__defines.html#ga57bb676d2e5ce8971cb9a09bc7b60fcb">AGENT_ERROR_SERVER_RUNNING</a>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                <a class="code" href="group__agentclass__functions.html#ga169e2d7af28306cc51118ea903b405a1">Agent::shutdown</a>();</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            strcpy(tname,aname.c_str());</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">else</span> <span class="comment">// then there is an agent running with the given name, so let&#39;s make the name unique</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        {</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <span class="keywordflow">if</span> (strlen(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af4e942210d74ec7b18eed16914c366ce">node</a>.<a class="code" href="structnodestruc.html#a97d97ec5e0931a700ff182b9c864051f">name</a>)&gt;<a class="code" href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a>-4 || aname.size()&gt;<a class="code" href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a>-4)</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                <a class="code" href="class_cosmos_1_1_agent.html#a412e30b2f66dd9b3648f96cda2f09e3a">error_value</a> = <a class="code" href="group__error__defines.html#gab1ccf6937b6ca8a2377517d448ce22ad">JSON_ERROR_NAME_LENGTH</a>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                <a class="code" href="group__agentclass__functions.html#ga169e2d7af28306cc51118ea903b405a1">Agent::shutdown</a>();</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            }</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            uint32_t <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>=0;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="keywordflow">do</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                sprintf(tname,<span class="stringliteral">&quot;%s_%03d&quot;</span>,aname.c_str(),<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="group__agentclass__functions.html#ga663fc208857aba63e7a9e5e7bbe2091b">Agent::get_server</a>(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af4e942210d74ec7b18eed16914c366ce">node</a>.<a class="code" href="structnodestruc.html#a97d97ec5e0931a700ff182b9c864051f">name</a>, tname, <a class="code" href="class_cosmos_1_1_agent.html#a4d1bf8bcb831d5ea21328dfa592fc3b8">timeoutSec</a>, (<a class="code" href="structbeatstruc.html">beatstruc</a> *)NULL))</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            } <span class="keywordflow">while</span> (++i&lt;100);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="comment">// Initialize important server variables</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        strncpy(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.node, <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af4e942210d74ec7b18eed16914c366ce">node</a>.<a class="code" href="structnodestruc.html#a97d97ec5e0931a700ff182b9c864051f">name</a>, <a class="code" href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a>);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a71125ee955b8908b99fb7fb451acda4f">nodeName</a> = <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.node;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        strncpy(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.proc, tname, <a class="code" href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a>);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a2bf93538bf93f55dcfe134b124b5050b">agentName</a> = <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.proc;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="comment">//  cinfo-&gt;agent[0].beat.ntype = ntype;</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">if</span> (bprd &gt;= <a class="code" href="agentclass_8h.html#a405d7220cc92882ea36c541c489002ed">AGENT_HEARTBEAT_PERIOD_MIN</a>)</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bprd = bprd;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bprd = <a class="code" href="agentclass_8h.html#a405d7220cc92882ea36c541c489002ed">AGENT_HEARTBEAT_PERIOD_MIN</a>;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].stateflag = (uint16_t)<a class="code" href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4afaee4ca3c30ee18148ce3ada37466498">Agent::State::INIT</a>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.port = (uint16_t)portnum;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz = (<a class="code" href="netperf__listen_8cpp.html#a3a32b16072250412b156cb8bbbfad792">bsize</a>&lt;=<a class="code" href="group__jsonlib__constants.html#ga855b38da23dc26339aa8a5d726aab4a6">AGENTMAXBUFFER</a>-4?<a class="code" href="netperf__listen_8cpp.html#a3a32b16072250412b156cb8bbbfad792">bsize</a>:<a class="code" href="group__jsonlib__constants.html#ga855b38da23dc26339aa8a5d726aab4a6">AGENTMAXBUFFER</a>-4);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="preprocessor">#ifdef COSMOS_WIN_BUILD_MSVC</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pid = _getpid();</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pid = getpid();</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].aprd = 1.;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        strncpy(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.user, <span class="stringliteral">&quot;cosmos&quot;</span>, <a class="code" href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a>);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="comment">//  cinfo-&gt;agent[0].sohstring[0] = 0;</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="comment">// Establish publish channel</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        iretn = <a class="code" href="group__agentclass__functions.html#gaffbdfeaef9fa32bb4e17bf62070d7fdc">Agent::publish</a>(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.ntype, <a class="code" href="agentclass_8h.html#aee1f2a0c98d7dd198092c79cde60dcf6">AGENTSENDPORT</a>);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">if</span> (iretn)</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <a class="code" href="class_cosmos_1_1_agent.html#a412e30b2f66dd9b3648f96cda2f09e3a">error_value</a> = <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <a class="code" href="group__agentclass__functions.html#ga169e2d7af28306cc51118ea903b405a1">Agent::shutdown</a>();</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="comment">// Start the heartbeat and request threads running</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="comment">//    iretn = start();</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a44834d8675cf03b9137f203899337105">hthread</a> = thread([=] { <a class="code" href="group__agentclass__functions.html#gae6a8536dc23bce8abbd2c3c7f214f043">heartbeat_loop</a>(); });</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a4628ba7a0a8bafe43231eaab378e4021">cthread</a> = thread([=] { <a class="code" href="group__agentclass__functions.html#ga8722137ad27c4a53108639b3f261b086">request_loop</a>(); });</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="class_cosmos_1_1_agent.html#a44834d8675cf03b9137f203899337105">hthread</a>.joinable() || !cthread.joinable())</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="comment">// TODO: create error value</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <span class="comment">//error_value = iretn;</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <a class="code" href="group__agentclass__functions.html#ga169e2d7af28306cc51118ea903b405a1">Agent::shutdown</a>();</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;help&quot;</span>,<a class="code" href="group__agentclass__functions.html#gaf63b8c1d676c0734dbed0d67d7e3d3ff">req_help</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;list of available requests for this agent&quot;</span>);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;shutdown&quot;</span>,<a class="code" href="group__agentclass__functions.html#ga8335f377fd81f2cc46444a120e3d9cf6">Agent::req_shutdown</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;request to shutdown this agent&quot;</span>);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;idle&quot;</span>,<a class="code" href="group__agentclass__functions.html#ga52fe6103651cf3cf8d17a943f3e32951">Agent::req_idle</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;request to transition this agent to idle state&quot;</span>);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;init&quot;</span>,<a class="code" href="group__agentclass__functions.html#gade8cb836df40b0909eef7391a681be67">Agent::req_init</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;request to transition this agent to init state&quot;</span>);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;monitor&quot;</span>,<a class="code" href="group__agentclass__functions.html#gab62ec8abf3ce91ae47a7518fd6776efe">Agent::req_monitor</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;request to transition this agent to monitor state&quot;</span>);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;run&quot;</span>,<a class="code" href="group__agentclass__functions.html#gad4cffb2c8ebf9635c0496de9ea647f21">Agent::req_run</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;request to transition this agent to run state&quot;</span>);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;status&quot;</span>,<a class="code" href="group__agentclass__functions.html#ga2243a22014f702aeb776ddafc75f1785">Agent::req_status</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;request the status of this agent&quot;</span>);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;getvalue&quot;</span>,<a class="code" href="group__agentclass__functions.html#ga62c62a98ae54a2d7522cccfc5cd0872c">Agent::req_getvalue</a>,<span class="stringliteral">&quot;{\&quot;name1\&quot;,\&quot;name2\&quot;,...}&quot;</span>,<span class="stringliteral">&quot;get specified value(s) from agent&quot;</span>);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;setvalue&quot;</span>,<a class="code" href="group__agentclass__functions.html#ga622a8be9a9d9bad9cbd779ed1484fb20">Agent::req_setvalue</a>,<span class="stringliteral">&quot;{\&quot;name1\&quot;:value},{\&quot;name2\&quot;:value},...}&quot;</span>,<span class="stringliteral">&quot;set specified value(s) in agent&quot;</span>);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;listnames&quot;</span>,<a class="code" href="group__agentclass__functions.html#gab3d95206d1390f92e148c2dddd7215a1">Agent::req_listnames</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;list the Namespace of the agent&quot;</span>);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;forward&quot;</span>,<a class="code" href="group__agentclass__functions.html#gaef0e1a80e74c3a987a9fdab354e8e0f9">Agent::req_forward</a>,<span class="stringliteral">&quot;nbytes packet&quot;</span>,<span class="stringliteral">&quot;Broadcast JSON packet to the default SEND port on local network&quot;</span>);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;echo&quot;</span>,<a class="code" href="group__agentclass__functions.html#ga4f3c2e6e8162321e91379e1703ff79c5">Agent::req_echo</a>,<span class="stringliteral">&quot;utc crc nbytes bytes&quot;</span>,<span class="stringliteral">&quot;echo array of nbytes bytes, sent at time utc, with CRC crc.&quot;</span>);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;nodejson&quot;</span>,<a class="code" href="group__agentclass__functions.html#ga6db24da96b512a97d6c69c39798f8148">Agent::req_nodejson</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;return description JSON for Node&quot;</span>);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;statejson&quot;</span>,<a class="code" href="group__agentclass__functions.html#ga69bcf7a5e951f583b34eec2ce1c88450">Agent::req_statejson</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;return description JSON for State vector&quot;</span>);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;utcstartjson&quot;</span>,<a class="code" href="group__agentclass__functions.html#ga31960e94fea85f7244e207b9bb61db95">Agent::req_utcstartjson</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;return description JSON for UTC Start time&quot;</span>);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;piecesjson&quot;</span>,<a class="code" href="group__agentclass__functions.html#gabf7622188a887ecf43541d6f73d0ba60">Agent::req_piecesjson</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;return description JSON for Pieces&quot;</span>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;vertexsjson&quot;</span>,<a class="code" href="group__agentclass__functions.html#gaa6fddd4e5873c894f25ab0cf553057e5">Agent::req_vertexsjson</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;return description JSON for Pieces&quot;</span>);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;facesjson&quot;</span>,<a class="code" href="group__agentclass__functions.html#ga0020ac71638c1b52d03690b0aa0b2bb4">Agent::req_facesjson</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;return description JSON for Pieces&quot;</span>);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;devgenjson&quot;</span>,<a class="code" href="group__agentclass__functions.html#ga76e19fa0aa103a92a61f633a05cca273">Agent::req_devgenjson</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;return description JSON for General Devices&quot;</span>);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;devspecjson&quot;</span>,<a class="code" href="group__agentclass__functions.html#gacaf51c84a2e25d74481816a768ced7fa">Agent::req_devspecjson</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;return description JSON for Specific Devices&quot;</span>);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;portsjson&quot;</span>,<a class="code" href="group__agentclass__functions.html#ga0df8199c96c5a3ad03a884375fcb09c1">Agent::req_portsjson</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;return description JSON for Ports&quot;</span>);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;targetsjson&quot;</span>,<a class="code" href="group__agentclass__functions.html#ga14efc5e88eeab6582c310eadc615ebc4">Agent::req_targetsjson</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;return description JSON for Targets&quot;</span>);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Agent::add_request</a>(<span class="stringliteral">&quot;aliasesjson&quot;</span>,<a class="code" href="group__agentclass__functions.html#ga922dedb6c0cef06fd6febed2c867ea88">Agent::req_aliasesjson</a>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;return description JSON for Aliases&quot;</span>);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].server = 1;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].stateflag = (uint16_t)<a class="code" href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4a855520d2a5b0b1a64b939e7e30889e2a">Agent::State::RUN</a>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="group__error__defines_html_ga57bb676d2e5ce8971cb9a09bc7b60fcb"><div class="ttname"><a href="group__error__defines.html#ga57bb676d2e5ce8971cb9a09bc7b60fcb">AGENT_ERROR_SERVER_RUNNING</a></div><div class="ttdeci">#define AGENT_ERROR_SERVER_RUNNING</div><div class="ttdef"><b>Definition:</b> cosmos-errno.h:104</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_ab3e2c1c0d199c6048fc5225dfec80e66"><div class="ttname"><a href="class_cosmos_1_1_agent.html#ab3e2c1c0d199c6048fc5225dfec80e66">Cosmos::Agent::debug_level</a></div><div class="ttdeci">size_t debug_level</div><div class="ttdoc">Flag for level of debugging, keep it public so that it can be controlled from the outside...</div><div class="ttdef"><b>Definition:</b> agentclass.h:336</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga52fe6103651cf3cf8d17a943f3e32951"><div class="ttname"><a href="group__agentclass__functions.html#ga52fe6103651cf3cf8d17a943f3e32951">Cosmos::Agent::req_idle</a></div><div class="ttdeci">static int32_t req_idle(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Set state to Idle request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1045</div></div>
<div class="ttc" id="group__agentclass__functions_html_gabf7622188a887ecf43541d6f73d0ba60"><div class="ttname"><a href="group__agentclass__functions.html#gabf7622188a887ecf43541d6f73d0ba60">Cosmos::Agent::req_piecesjson</a></div><div class="ttdeci">static int32_t req_piecesjson(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Return Pieces JSON request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1209</div></div>
<div class="ttc" id="agent__exec_8cpp_html_a8dadfa60d80a481745f0212f7caec1e7"><div class="ttname"><a href="agent__exec_8cpp.html#a8dadfa60d80a481745f0212f7caec1e7">ntype</a></div><div class="ttdeci">NetworkType ntype</div><div class="ttdef"><b>Definition:</b> agent_exec.cpp:108</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a412e30b2f66dd9b3648f96cda2f09e3a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a412e30b2f66dd9b3648f96cda2f09e3a">Cosmos::Agent::error_value</a></div><div class="ttdeci">int32_t error_value</div><div class="ttdoc">Last error. </div><div class="ttdef"><b>Definition:</b> agentclass.h:363</div></div>
<div class="ttc" id="structbeatstruc_html"><div class="ttname"><a href="structbeatstruc.html">beatstruc</a></div><div class="ttdef"><b>Definition:</b> jsondef.h:854</div></div>
<div class="ttc" id="netperf__listen_8cpp_html_a3a32b16072250412b156cb8bbbfad792"><div class="ttname"><a href="netperf__listen_8cpp.html#a3a32b16072250412b156cb8bbbfad792">bsize</a></div><div class="ttdeci">uint16_t bsize</div><div class="ttdef"><b>Definition:</b> netperf_listen.cpp:71</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga922dedb6c0cef06fd6febed2c867ea88"><div class="ttname"><a href="group__agentclass__functions.html#ga922dedb6c0cef06fd6febed2c867ea88">Cosmos::Agent::req_aliasesjson</a></div><div class="ttdeci">static int32_t req_aliasesjson(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Return Alias JSON request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1307</div></div>
<div class="ttc" id="group__jsonlib__functions_html_ga49c99860b3f8d4265436287acd2527ca"><div class="ttname"><a href="group__jsonlib__functions.html#ga49c99860b3f8d4265436287acd2527ca">json_setup_node</a></div><div class="ttdeci">int32_t json_setup_node(jsonnode json, cosmosstruc *cinfo, bool create_flag)</div><div class="ttdoc">Setup JSON Namespace using Node description JSON. </div><div class="ttdef"><b>Definition:</b> jsonlib.cpp:6628</div></div>
<div class="ttc" id="rw__test_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="group__agentclass__functions_html_gacaf51c84a2e25d74481816a768ced7fa"><div class="ttname"><a href="group__agentclass__functions.html#gacaf51c84a2e25d74481816a768ced7fa">Cosmos::Agent::req_devspecjson</a></div><div class="ttdeci">static int32_t req_devspecjson(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Return devspec JSON request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1265</div></div>
<div class="ttc" id="group__defs__storage_html_ga2005202dc256c47dd66042b748fc4dd5"><div class="ttname"><a href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a></div><div class="ttdeci">#define COSMOS_MAX_NAME</div><div class="ttdoc">Largest JSON name. </div><div class="ttdef"><b>Definition:</b> cosmos-defs.h:55</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga69bcf7a5e951f583b34eec2ce1c88450"><div class="ttname"><a href="group__agentclass__functions.html#ga69bcf7a5e951f583b34eec2ce1c88450">Cosmos::Agent::req_statejson</a></div><div class="ttdeci">static int32_t req_statejson(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Return State Vector JSON request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1181</div></div>
<div class="ttc" id="group__agentclass__functions_html_gad4cffb2c8ebf9635c0496de9ea647f21"><div class="ttname"><a href="group__agentclass__functions.html#gad4cffb2c8ebf9635c0496de9ea647f21">Cosmos::Agent::req_run</a></div><div class="ttdeci">static int32_t req_run(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Set state to Run request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1017</div></div>
<div class="ttc" id="rw__test_8cpp_html_afece067d35cd26a458c56fa8f276e734"><div class="ttname"><a href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a></div><div class="ttdeci">int iretn</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga4f3c2e6e8162321e91379e1703ff79c5"><div class="ttname"><a href="group__agentclass__functions.html#ga4f3c2e6e8162321e91379e1703ff79c5">Cosmos::Agent::req_echo</a></div><div class="ttdeci">static int32_t req_echo(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Echo request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:969</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a2fa764ae8585f071f115aabe4583251d"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a2fa764ae8585f071f115aabe4583251d">Cosmos::Agent::mthread</a></div><div class="ttdeci">thread mthread</div><div class="ttdoc">Handle for message thread. </div><div class="ttdef"><b>Definition:</b> agentclass.h:361</div></div>
<div class="ttc" id="group__agentclass__functions_html_gae7537a95956006a6b7b5270b7f120adf"><div class="ttname"><a href="group__agentclass__functions.html#gae7537a95956006a6b7b5270b7f120adf">Cosmos::Agent::subscribe</a></div><div class="ttdeci">int32_t subscribe(NetworkType type, char *address, uint16_t port)</div><div class="ttdoc">Open COSMOS channel for polling with 100 usec timeout. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1912</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga14efc5e88eeab6582c310eadc615ebc4"><div class="ttname"><a href="group__agentclass__functions.html#ga14efc5e88eeab6582c310eadc615ebc4">Cosmos::Agent::req_targetsjson</a></div><div class="ttdeci">static int32_t req_targetsjson(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Return Target JSON request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1293</div></div>
<div class="ttc" id="structnodestruc_html_a8e437786c6d1c3bb01151d4e1362bd08"><div class="ttname"><a href="structnodestruc.html#a8e437786c6d1c3bb01151d4e1362bd08">nodestruc::utc</a></div><div class="ttdeci">double utc</div><div class="ttdoc">Overall Node time. </div><div class="ttdef"><b>Definition:</b> jsondef.h:1695</div></div>
<div class="ttc" id="group__agentclass__functions_html_gab62ec8abf3ce91ae47a7518fd6776efe"><div class="ttname"><a href="group__agentclass__functions.html#gab62ec8abf3ce91ae47a7518fd6776efe">Cosmos::Agent::req_monitor</a></div><div class="ttdeci">static int32_t req_monitor(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Set state to Idle request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1059</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a4d1bf8bcb831d5ea21328dfa592fc3b8"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a4d1bf8bcb831d5ea21328dfa592fc3b8">Cosmos::Agent::timeoutSec</a></div><div class="ttdeci">float timeoutSec</div><div class="ttdef"><b>Definition:</b> agentclass.h:350</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga8722137ad27c4a53108639b3f261b086"><div class="ttname"><a href="group__agentclass__functions.html#ga8722137ad27c4a53108639b3f261b086">Cosmos::Agent::request_loop</a></div><div class="ttdeci">void request_loop()</div><div class="ttdoc">Request Loop. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:779</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga62c62a98ae54a2d7522cccfc5cd0872c"><div class="ttname"><a href="group__agentclass__functions.html#ga62c62a98ae54a2d7522cccfc5cd0872c">Cosmos::Agent::req_getvalue</a></div><div class="ttdeci">static int32_t req_getvalue(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Get Internal Value request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1114</div></div>
<div class="ttc" id="group__timelib__functions_html_gab0ead502a0d6b15367214ff905184097"><div class="ttname"><a href="group__timelib__functions.html#gab0ead502a0d6b15367214ff905184097">mjdToGregorian</a></div><div class="ttdeci">int32_t mjdToGregorian(double mjd, int32_t &amp;year, int32_t &amp;month, int32_t &amp;day, int32_t &amp;hour, int32_t &amp;minute, int32_t &amp;second)</div><div class="ttdef"><b>Definition:</b> timelib.cpp:1288</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga0df8199c96c5a3ad03a884375fcb09c1"><div class="ttname"><a href="group__agentclass__functions.html#ga0df8199c96c5a3ad03a884375fcb09c1">Cosmos::Agent::req_portsjson</a></div><div class="ttdeci">static int32_t req_portsjson(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Return Ports JSON request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1279</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga0020ac71638c1b52d03690b0aa0b2bb4"><div class="ttname"><a href="group__agentclass__functions.html#ga0020ac71638c1b52d03690b0aa0b2bb4">Cosmos::Agent::req_facesjson</a></div><div class="ttdeci">static int32_t req_facesjson(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Return Face JSON request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1223</div></div>
<div class="ttc" id="group__jsonlib__functions_html_ga1173f060b7fa659b6ffc356212bbd2b6"><div class="ttname"><a href="group__jsonlib__functions.html#ga1173f060b7fa659b6ffc356212bbd2b6">json_create</a></div><div class="ttdeci">cosmosstruc * json_create()</div><div class="ttdoc">Initialize JSON pointer map. </div><div class="ttdef"><b>Definition:</b> jsonlib.cpp:85</div></div>
<div class="ttc" id="structcosmosstruc_html_af4e942210d74ec7b18eed16914c366ce"><div class="ttname"><a href="structcosmosstruc.html#af4e942210d74ec7b18eed16914c366ce">cosmosstruc::node</a></div><div class="ttdeci">nodestruc node</div><div class="ttdoc">Structure for summary information in node. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2049</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a0423e290995b3df322bd894a2b9701f4afaee4ca3c30ee18148ce3ada37466498"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4afaee4ca3c30ee18148ce3ada37466498">Cosmos::Agent::State::INIT</a></div><div class="ttdoc">Agent Initializing. </div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a2bf93538bf93f55dcfe134b124b5050b"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a2bf93538bf93f55dcfe134b124b5050b">Cosmos::Agent::agentName</a></div><div class="ttdeci">string agentName</div><div class="ttdef"><b>Definition:</b> agentclass.h:343</div></div>
<div class="ttc" id="group__agentclass__functions_html_gab3d95206d1390f92e148c2dddd7215a1"><div class="ttname"><a href="group__agentclass__functions.html#gab3d95206d1390f92e148c2dddd7215a1">Cosmos::Agent::req_listnames</a></div><div class="ttdeci">static int32_t req_listnames(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in List Name Space Names request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1152</div></div>
<div class="ttc" id="group__agentclass__functions_html_gaef0e1a80e74c3a987a9fdab354e8e0f9"><div class="ttname"><a href="group__agentclass__functions.html#gaef0e1a80e74c3a987a9fdab354e8e0f9">Cosmos::Agent::req_forward</a></div><div class="ttdeci">static int32_t req_forward(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Forward request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:948</div></div>
<div class="ttc" id="group__agentclass__functions_html_gaf63b8c1d676c0734dbed0d67d7e3d3ff"><div class="ttname"><a href="group__agentclass__functions.html#gaf63b8c1d676c0734dbed0d67d7e3d3ff">Cosmos::Agent::req_help</a></div><div class="ttdeci">static int32_t req_help(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Help request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:987</div></div>
<div class="ttc" id="agentclass_8h_html_aee1f2a0c98d7dd198092c79cde60dcf6"><div class="ttname"><a href="agentclass_8h.html#aee1f2a0c98d7dd198092c79cde60dcf6">AGENTSENDPORT</a></div><div class="ttdeci">#define AGENTSENDPORT</div><div class="ttdoc">Default SEND port. </div><div class="ttdef"><b>Definition:</b> agentclass.h:181</div></div>
<div class="ttc" id="group__agentclass__functions_html_gaa6fddd4e5873c894f25ab0cf553057e5"><div class="ttname"><a href="group__agentclass__functions.html#gaa6fddd4e5873c894f25ab0cf553057e5">Cosmos::Agent::req_vertexsjson</a></div><div class="ttdeci">static int32_t req_vertexsjson(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Return Vertex JSON request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1237</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga76e19fa0aa103a92a61f633a05cca273"><div class="ttname"><a href="group__agentclass__functions.html#ga76e19fa0aa103a92a61f633a05cca273">Cosmos::Agent::req_devgenjson</a></div><div class="ttdeci">static int32_t req_devgenjson(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Return devgen JSON request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1251</div></div>
<div class="ttc" id="structnodestruc_html_a97d97ec5e0931a700ff182b9c864051f"><div class="ttname"><a href="structnodestruc.html#a97d97ec5e0931a700ff182b9c864051f">nodestruc::name</a></div><div class="ttdeci">char name[40+1]</div><div class="ttdoc">Node Name. </div><div class="ttdef"><b>Definition:</b> jsondef.h:1658</div></div>
<div class="ttc" id="group__agentclass__functions_html_gaffbdfeaef9fa32bb4e17bf62070d7fdc"><div class="ttname"><a href="group__agentclass__functions.html#gaffbdfeaef9fa32bb4e17bf62070d7fdc">Cosmos::Agent::publish</a></div><div class="ttdeci">int32_t publish(NetworkType type, uint16_t port)</div><div class="ttdoc">Open COSMOS output channel. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1321</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga169e2d7af28306cc51118ea903b405a1"><div class="ttname"><a href="group__agentclass__functions.html#ga169e2d7af28306cc51118ea903b405a1">Cosmos::Agent::shutdown</a></div><div class="ttdeci">int32_t shutdown()</div><div class="ttdoc">Shutdown agent gracefully. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:353</div></div>
<div class="ttc" id="agentclass_8h_html_a6b8209d791a15719a1f73e324391f6b3"><div class="ttname"><a href="agentclass_8h.html#a6b8209d791a15719a1f73e324391f6b3">AGENTMCAST</a></div><div class="ttdeci">#define AGENTMCAST</div><div class="ttdoc">AGENT heartbeat Multicast address. </div><div class="ttdef"><b>Definition:</b> agentclass.h:185</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a4628ba7a0a8bafe43231eaab378e4021"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a4628ba7a0a8bafe43231eaab378e4021">Cosmos::Agent::cthread</a></div><div class="ttdeci">thread cthread</div><div class="ttdoc">Handle for request thread. </div><div class="ttdef"><b>Definition:</b> agentclass.h:357</div></div>
<div class="ttc" id="group__agentclass__functions_html_gae6a8536dc23bce8abbd2c3c7f214f043"><div class="ttname"><a href="group__agentclass__functions.html#gae6a8536dc23bce8abbd2c3c7f214f043">Cosmos::Agent::heartbeat_loop</a></div><div class="ttdeci">void heartbeat_loop()</div><div class="ttdoc">Heartbeat Loop. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:722</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga3554b695e778e2c8c88529b550183553"><div class="ttname"><a href="group__agentclass__functions.html#ga3554b695e778e2c8c88529b550183553">Cosmos::Agent::add_request</a></div><div class="ttdeci">int32_t add_request(string token, external_request_function function, string synopsis=&quot;&quot;, string description=&quot;&quot;)</div><div class="ttdoc">Add external request to Agent request list with description and synopsis. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:315</div></div>
<div class="ttc" id="group__jsonlib__functions_html_gafc8a926e76e35a61add7aaf1749764fd"><div class="ttname"><a href="group__jsonlib__functions.html#gafc8a926e76e35a61add7aaf1749764fd">json_destroy</a></div><div class="ttdeci">void json_destroy(cosmosstruc *cinfo)</div><div class="ttdoc">Remove JSON pointer map. </div><div class="ttdef"><b>Definition:</b> jsonlib.cpp:474</div></div>
<div class="ttc" id="group__error__defines_html_gab1ccf6937b6ca8a2377517d448ce22ad"><div class="ttname"><a href="group__error__defines.html#gab1ccf6937b6ca8a2377517d448ce22ad">JSON_ERROR_NAME_LENGTH</a></div><div class="ttdeci">#define JSON_ERROR_NAME_LENGTH</div><div class="ttdef"><b>Definition:</b> cosmos-errno.h:90</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga663fc208857aba63e7a9e5e7bbe2091b"><div class="ttname"><a href="group__agentclass__functions.html#ga663fc208857aba63e7a9e5e7bbe2091b">Cosmos::Agent::get_server</a></div><div class="ttdeci">int32_t get_server(string node, string name, float waitsec, beatstruc *cbeat)</div><div class="ttdoc">Get specific server. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:550</div></div>
<div class="ttc" id="group__timelib__functions_html_ga39f0682a60fce7940363aad40ad4a244"><div class="ttname"><a href="group__timelib__functions.html#ga39f0682a60fce7940363aad40ad4a244">currentmjd</a></div><div class="ttdeci">double currentmjd(double offset)</div><div class="ttdoc">Current UTC in Modified Julian Days. </div><div class="ttdef"><b>Definition:</b> timelib.cpp:65</div></div>
<div class="ttc" id="group__agentclass__functions_html_gae04b862b76dec1ff0fc347c1dd5e6022"><div class="ttname"><a href="group__agentclass__functions.html#gae04b862b76dec1ff0fc347c1dd5e6022">Cosmos::Agent::message_loop</a></div><div class="ttdeci">void message_loop()</div><div class="ttdef"><b>Definition:</b> agentclass.cpp:874</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga2243a22014f702aeb776ddafc75f1785"><div class="ttname"><a href="group__agentclass__functions.html#ga2243a22014f702aeb776ddafc75f1785">Cosmos::Agent::req_status</a></div><div class="ttdeci">static int32_t req_status(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Status request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1089</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga622a8be9a9d9bad9cbd779ed1484fb20"><div class="ttname"><a href="group__agentclass__functions.html#ga622a8be9a9d9bad9cbd779ed1484fb20">Cosmos::Agent::req_setvalue</a></div><div class="ttdeci">static int32_t req_setvalue(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Set Internal Value request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1135</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a44834d8675cf03b9137f203899337105"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a44834d8675cf03b9137f203899337105">Cosmos::Agent::hthread</a></div><div class="ttdeci">thread hthread</div><div class="ttdoc">Handle for heartbeat thread. </div><div class="ttdef"><b>Definition:</b> agentclass.h:359</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga31960e94fea85f7244e207b9bb61db95"><div class="ttname"><a href="group__agentclass__functions.html#ga31960e94fea85f7244e207b9bb61db95">Cosmos::Agent::req_utcstartjson</a></div><div class="ttdeci">static int32_t req_utcstartjson(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Return UTC Start Time JSON request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1195</div></div>
<div class="ttc" id="group__jsonlib__constants_html_ga855b38da23dc26339aa8a5d726aab4a6"><div class="ttname"><a href="group__jsonlib__constants.html#ga855b38da23dc26339aa8a5d726aab4a6">AGENTMAXBUFFER</a></div><div class="ttdeci">#define AGENTMAXBUFFER</div><div class="ttdoc">Entire cosmosstruc. </div><div class="ttdef"><b>Definition:</b> jsondef.h:463</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga6db24da96b512a97d6c69c39798f8148"><div class="ttname"><a href="group__agentclass__functions.html#ga6db24da96b512a97d6c69c39798f8148">Cosmos::Agent::req_nodejson</a></div><div class="ttdeci">static int32_t req_nodejson(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Return Node JSON request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1167</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a3309f171adf8dd4bfd0ff8e47ee0bc88"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a3309f171adf8dd4bfd0ff8e47ee0bc88">Cosmos::Agent::version</a></div><div class="ttdeci">string version</div><div class="ttdef"><b>Definition:</b> agentclass.h:349</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a0423e290995b3df322bd894a2b9701f4a855520d2a5b0b1a64b939e7e30889e2a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4a855520d2a5b0b1a64b939e7e30889e2a">Cosmos::Agent::State::RUN</a></div><div class="ttdoc">Run without monitoring. </div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a80591b5a14afc6c0fff575a1617cea90"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a80591b5a14afc6c0fff575a1617cea90">Cosmos::Agent::timeStart</a></div><div class="ttdeci">double timeStart</div><div class="ttdef"><b>Definition:</b> agentclass.h:353</div></div>
<div class="ttc" id="group__agentclass__functions_html_gade8cb836df40b0909eef7391a681be67"><div class="ttname"><a href="group__agentclass__functions.html#gade8cb836df40b0909eef7391a681be67">Cosmos::Agent::req_init</a></div><div class="ttdeci">static int32_t req_init(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Set state to Init request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1031</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a71125ee955b8908b99fb7fb451acda4f"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a71125ee955b8908b99fb7fb451acda4f">Cosmos::Agent::nodeName</a></div><div class="ttdeci">string nodeName</div><div class="ttdef"><b>Definition:</b> agentclass.h:342</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga8335f377fd81f2cc46444a120e3d9cf6"><div class="ttname"><a href="group__agentclass__functions.html#ga8335f377fd81f2cc46444a120e3d9cf6">Cosmos::Agent::req_shutdown</a></div><div class="ttdeci">static int32_t req_shutdown(char *request, char *response, Agent *agent)</div><div class="ttdoc">Built-in Set state to Shutdown request. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1073</div></div>
<div class="ttc" id="agentclass_8h_html_a405d7220cc92882ea36c541c489002ed"><div class="ttname"><a href="agentclass_8h.html#a405d7220cc92882ea36c541c489002ed">AGENT_HEARTBEAT_PERIOD_MIN</a></div><div class="ttdeci">#define AGENT_HEARTBEAT_PERIOD_MIN</div><div class="ttdoc">Default minium heartbeat period (10 msec) </div><div class="ttdef"><b>Definition:</b> agentclass.h:193</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gac21b07d8064a82f85a53e559cd99e50b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac21b07d8064a82f85a53e559cd99e50b">&#9670;&nbsp;</a></span>~Agent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Cosmos::Agent::~Agent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga169e2d7af28306cc51118ea903b405a1">Agent::shutdown</a>();</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div><div class="ttc" id="group__agentclass__functions_html_ga169e2d7af28306cc51118ea903b405a1"><div class="ttname"><a href="group__agentclass__functions.html#ga169e2d7af28306cc51118ea903b405a1">Cosmos::Agent::shutdown</a></div><div class="ttdeci">int32_t shutdown()</div><div class="ttdoc">Shutdown agent gracefully. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:353</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga72b8917a48bd4aa82c81e1b4c530fbf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga72b8917a48bd4aa82c81e1b4c530fbf0">&#9670;&nbsp;</a></span>add_request_internal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::add_request_internal </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__agentclass__typedefs.html#gafa77892edc5df612f17921ff8866f94c">Agent::internal_request_function</a>&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>synopsis</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>description</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add internal request to <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> request list with description and synopsis. </p>
<p>Adds access to the indicated function by way of the given token. The provided function, internal to the agent, will be called with the request string as its argument. Any result will then be returned in the output pointer. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">token</td><td>A string of maximum length <a class="el" href="group__jsonlib__constants.html#ga2005202dc256c47dd66042b748fc4dd5" title="Largest JSON name. ">COSMOS_MAX_NAME</a> containing the token for the request. This should be the first word in the request. </td></tr>
    <tr><td class="paramname">function</td><td>The user supplied function to parse the specified request. </td></tr>
    <tr><td class="paramname">description</td><td>A brief description of the function performed. </td></tr>
    <tr><td class="paramname">synopsis</td><td>A usage synopsis for the request. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error, if any, otherwise zero. </dd></dl>
<div class="fragment"><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">Agent::reqs</a>.size() &gt; <a class="code" href="group__jsonlib__constants.html#ga970a45da417ec1b07f7db38fb75ce72f">AGENTMAXREQUESTCOUNT</a>)</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="keywordflow">return</span> (<a class="code" href="group__error__defines.html#ga178c4f9c556f347acfbca1bdba037ccd">AGENT_ERROR_REQ_COUNT</a>);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        request_entry tentry;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordflow">if</span> (token.size() &gt; <a class="code" href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a>)</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            token.resize(<a class="code" href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a>);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        }</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        tentry.token = token;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        tentry.ifunction = <span class="keyword">function</span>;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        tentry.efunction = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        tentry.synopsis = synopsis;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        tentry.description = description;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">Agent::reqs</a>.push_back(tentry);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    }</div><div class="ttc" id="group__error__defines_html_ga178c4f9c556f347acfbca1bdba037ccd"><div class="ttname"><a href="group__error__defines.html#ga178c4f9c556f347acfbca1bdba037ccd">AGENT_ERROR_REQ_COUNT</a></div><div class="ttdeci">#define AGENT_ERROR_REQ_COUNT</div><div class="ttdef"><b>Definition:</b> cosmos-errno.h:106</div></div>
<div class="ttc" id="group__defs__storage_html_ga2005202dc256c47dd66042b748fc4dd5"><div class="ttname"><a href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a></div><div class="ttdeci">#define COSMOS_MAX_NAME</div><div class="ttdoc">Largest JSON name. </div><div class="ttdef"><b>Definition:</b> cosmos-defs.h:55</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_ac4e0048f444a9381a475a91f455acad1"><div class="ttname"><a href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">Cosmos::Agent::reqs</a></div><div class="ttdeci">vector&lt; request_entry &gt; reqs</div><div class="ttdef"><b>Definition:</b> agentclass.h:378</div></div>
<div class="ttc" id="group__jsonlib__constants_html_ga970a45da417ec1b07f7db38fb75ce72f"><div class="ttname"><a href="group__jsonlib__constants.html#ga970a45da417ec1b07f7db38fb75ce72f">AGENTMAXREQUESTCOUNT</a></div><div class="ttdeci">#define AGENTMAXREQUESTCOUNT</div><div class="ttdoc">Maximum number of AGENT requests. </div><div class="ttdef"><b>Definition:</b> jsondef.h:471</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga3554b695e778e2c8c88529b550183553"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3554b695e778e2c8c88529b550183553">&#9670;&nbsp;</a></span>add_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::add_request </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__agentclass__typedefs.html#gae5129efcecd14a447489b4b72023bcaa">Agent::external_request_function</a>&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>synopsis</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>description</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add external request to <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> request list with description and synopsis. </p>
<p>Adds access to the indicated function by way of the given token. The provided function, external to the agent, will be called with the request string as its argument. Any result will then be returned in the output pointer. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">token</td><td>A string of maximum length <a class="el" href="group__jsonlib__constants.html#ga2005202dc256c47dd66042b748fc4dd5" title="Largest JSON name. ">COSMOS_MAX_NAME</a> containing the token for the request. This should be the first word in the request. </td></tr>
    <tr><td class="paramname">function</td><td>The user supplied function to parse the specified request. </td></tr>
    <tr><td class="paramname">description</td><td>A brief description of the function performed. </td></tr>
    <tr><td class="paramname">synopsis</td><td>A usage synopsis for the request. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error, if any, otherwise zero. </dd></dl>
<div class="fragment"><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">Agent::reqs</a>.size() &gt; <a class="code" href="group__jsonlib__constants.html#ga970a45da417ec1b07f7db38fb75ce72f">AGENTMAXREQUESTCOUNT</a>)</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <span class="keywordflow">return</span> (<a class="code" href="group__error__defines.html#ga178c4f9c556f347acfbca1bdba037ccd">AGENT_ERROR_REQ_COUNT</a>);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        request_entry tentry;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">if</span> (token.size() &gt; <a class="code" href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a>)</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            token.resize(<a class="code" href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a>);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        }</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        tentry.token = token;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        tentry.ifunction = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        tentry.efunction = <span class="keyword">function</span>;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        tentry.synopsis = synopsis;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        tentry.description = description;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">Agent::reqs</a>.push_back(tentry);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    }</div><div class="ttc" id="group__error__defines_html_ga178c4f9c556f347acfbca1bdba037ccd"><div class="ttname"><a href="group__error__defines.html#ga178c4f9c556f347acfbca1bdba037ccd">AGENT_ERROR_REQ_COUNT</a></div><div class="ttdeci">#define AGENT_ERROR_REQ_COUNT</div><div class="ttdef"><b>Definition:</b> cosmos-errno.h:106</div></div>
<div class="ttc" id="group__defs__storage_html_ga2005202dc256c47dd66042b748fc4dd5"><div class="ttname"><a href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a></div><div class="ttdeci">#define COSMOS_MAX_NAME</div><div class="ttdoc">Largest JSON name. </div><div class="ttdef"><b>Definition:</b> cosmos-defs.h:55</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_ac4e0048f444a9381a475a91f455acad1"><div class="ttname"><a href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">Cosmos::Agent::reqs</a></div><div class="ttdeci">vector&lt; request_entry &gt; reqs</div><div class="ttdef"><b>Definition:</b> agentclass.h:378</div></div>
<div class="ttc" id="group__jsonlib__constants_html_ga970a45da417ec1b07f7db38fb75ce72f"><div class="ttname"><a href="group__jsonlib__constants.html#ga970a45da417ec1b07f7db38fb75ce72f">AGENTMAXREQUESTCOUNT</a></div><div class="ttdeci">#define AGENTMAXREQUESTCOUNT</div><div class="ttdoc">Maximum number of AGENT requests. </div><div class="ttdef"><b>Definition:</b> jsondef.h:471</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gae3c7fcc26911f4024f5862a3442544e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae3c7fcc26911f4024f5862a3442544e2">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> Request and Heartbeat loops. </p>
<p>Starts the request and heartbeat threads for an <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> server initialized with <a class="el" href="group__agentclass__functions.html#ga4ffe212764559e5217d1c77d716aa5c4">Cosmos::Agent::Agent</a>. The <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> will open its request and heartbeat channels using the address and port supplied in cinfo. The heartbeat will cycle with the period requested in cinfo. </p><dl class="section return"><dt>Returns</dt><dd>value returned by request thread create </dd></dl>
<div class="fragment"><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="comment">// start heartbeat thread</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a44834d8675cf03b9137f203899337105">hthread</a> = thread([=] { <a class="code" href="group__agentclass__functions.html#gae6a8536dc23bce8abbd2c3c7f214f043">heartbeat_loop</a>(); });</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a4628ba7a0a8bafe43231eaab378e4021">cthread</a> = thread([=] { <a class="code" href="group__agentclass__functions.html#ga8722137ad27c4a53108639b3f261b086">request_loop</a>(); });</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    }</div><div class="ttc" id="group__agentclass__functions_html_ga8722137ad27c4a53108639b3f261b086"><div class="ttname"><a href="group__agentclass__functions.html#ga8722137ad27c4a53108639b3f261b086">Cosmos::Agent::request_loop</a></div><div class="ttdeci">void request_loop()</div><div class="ttdoc">Request Loop. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:779</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a4628ba7a0a8bafe43231eaab378e4021"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a4628ba7a0a8bafe43231eaab378e4021">Cosmos::Agent::cthread</a></div><div class="ttdeci">thread cthread</div><div class="ttdoc">Handle for request thread. </div><div class="ttdef"><b>Definition:</b> agentclass.h:357</div></div>
<div class="ttc" id="group__agentclass__functions_html_gae6a8536dc23bce8abbd2c3c7f214f043"><div class="ttname"><a href="group__agentclass__functions.html#gae6a8536dc23bce8abbd2c3c7f214f043">Cosmos::Agent::heartbeat_loop</a></div><div class="ttdeci">void heartbeat_loop()</div><div class="ttdoc">Heartbeat Loop. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:722</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a44834d8675cf03b9137f203899337105"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a44834d8675cf03b9137f203899337105">Cosmos::Agent::hthread</a></div><div class="ttdeci">thread hthread</div><div class="ttdoc">Handle for heartbeat thread. </div><div class="ttdef"><b>Definition:</b> agentclass.h:359</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga169e2d7af28306cc51118ea903b405a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga169e2d7af28306cc51118ea903b405a1">&#9670;&nbsp;</a></span>shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shutdown agent gracefully. </p>
<p>Waits for threads to stop running if we are a server, then releases everything. </p><dl class="section return"><dt>Returns</dt><dd>0 or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#ab3e2c1c0d199c6048fc5225dfec80e66">debug_level</a>)</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            printf(<span class="stringliteral">&quot;Shutting down Agent. Last error: %s\n&quot;</span>, <a class="code" href="group__error__functions.html#ga0a744bde12cad5fcdc338eb07fb7cf94">cosmos_error_string</a>(<a class="code" href="class_cosmos_1_1_agent.html#a412e30b2f66dd9b3648f96cda2f09e3a">error_value</a>).c_str());</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            fflush(stdout);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        }</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a> != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].stateflag = static_cast &lt;uint16_t&gt;(<a class="code" href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4ab9984206799a7f9fe4bd1b6c18db8112">Agent::State::SHUTDOWN</a>);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a2bf93538bf93f55dcfe134b124b5050b">agentName</a>.size())</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a44834d8675cf03b9137f203899337105">hthread</a>.joinable())</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                <a class="code" href="class_cosmos_1_1_agent.html#a44834d8675cf03b9137f203899337105">hthread</a>.join();</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a4628ba7a0a8bafe43231eaab378e4021">cthread</a>.joinable())</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            {</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                <a class="code" href="class_cosmos_1_1_agent.html#a4628ba7a0a8bafe43231eaab378e4021">cthread</a>.join();</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <a class="code" href="group__agentclass__functions.html#gaa27dffcf08893f097bcedbfaa94a3962">Agent::unpublish</a>();</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        }</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a2fa764ae8585f071f115aabe4583251d">mthread</a>.joinable())</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        {</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <a class="code" href="class_cosmos_1_1_agent.html#a2fa764ae8585f071f115aabe4583251d">mthread</a>.join();</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        }</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <a class="code" href="group__agentclass__functions.html#ga7ea40efbdd8401534041b27b6036e293">Agent::unsubscribe</a>();</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <a class="code" href="group__jsonlib__functions.html#gafc8a926e76e35a61add7aaf1749764fd">json_destroy</a>(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_ab3e2c1c0d199c6048fc5225dfec80e66"><div class="ttname"><a href="class_cosmos_1_1_agent.html#ab3e2c1c0d199c6048fc5225dfec80e66">Cosmos::Agent::debug_level</a></div><div class="ttdeci">size_t debug_level</div><div class="ttdoc">Flag for level of debugging, keep it public so that it can be controlled from the outside...</div><div class="ttdef"><b>Definition:</b> agentclass.h:336</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a412e30b2f66dd9b3648f96cda2f09e3a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a412e30b2f66dd9b3648f96cda2f09e3a">Cosmos::Agent::error_value</a></div><div class="ttdeci">int32_t error_value</div><div class="ttdoc">Last error. </div><div class="ttdef"><b>Definition:</b> agentclass.h:363</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a2fa764ae8585f071f115aabe4583251d"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a2fa764ae8585f071f115aabe4583251d">Cosmos::Agent::mthread</a></div><div class="ttdeci">thread mthread</div><div class="ttdoc">Handle for message thread. </div><div class="ttdef"><b>Definition:</b> agentclass.h:361</div></div>
<div class="ttc" id="group__agentclass__functions_html_gaa27dffcf08893f097bcedbfaa94a3962"><div class="ttname"><a href="group__agentclass__functions.html#gaa27dffcf08893f097bcedbfaa94a3962">Cosmos::Agent::unpublish</a></div><div class="ttdeci">int32_t unpublish()</div><div class="ttdoc">Close COSMOS output channel. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1865</div></div>
<div class="ttc" id="group__error__functions_html_ga0a744bde12cad5fcdc338eb07fb7cf94"><div class="ttname"><a href="group__error__functions.html#ga0a744bde12cad5fcdc338eb07fb7cf94">cosmos_error_string</a></div><div class="ttdeci">string cosmos_error_string(int32_t cosmos_errno)</div><div class="ttdef"><b>Definition:</b> cosmos-errno.cpp:45</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a2bf93538bf93f55dcfe134b124b5050b"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a2bf93538bf93f55dcfe134b124b5050b">Cosmos::Agent::agentName</a></div><div class="ttdeci">string agentName</div><div class="ttdef"><b>Definition:</b> agentclass.h:343</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a4628ba7a0a8bafe43231eaab378e4021"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a4628ba7a0a8bafe43231eaab378e4021">Cosmos::Agent::cthread</a></div><div class="ttdeci">thread cthread</div><div class="ttdoc">Handle for request thread. </div><div class="ttdef"><b>Definition:</b> agentclass.h:357</div></div>
<div class="ttc" id="group__jsonlib__functions_html_gafc8a926e76e35a61add7aaf1749764fd"><div class="ttname"><a href="group__jsonlib__functions.html#gafc8a926e76e35a61add7aaf1749764fd">json_destroy</a></div><div class="ttdeci">void json_destroy(cosmosstruc *cinfo)</div><div class="ttdoc">Remove JSON pointer map. </div><div class="ttdef"><b>Definition:</b> jsonlib.cpp:474</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a44834d8675cf03b9137f203899337105"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a44834d8675cf03b9137f203899337105">Cosmos::Agent::hthread</a></div><div class="ttdeci">thread hthread</div><div class="ttdoc">Handle for heartbeat thread. </div><div class="ttdef"><b>Definition:</b> agentclass.h:359</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a0423e290995b3df322bd894a2b9701f4ab9984206799a7f9fe4bd1b6c18db8112"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4ab9984206799a7f9fe4bd1b6c18db8112">Cosmos::Agent::State::SHUTDOWN</a></div><div class="ttdoc">Shut down Agent. </div></div>
<div class="ttc" id="group__agentclass__functions_html_ga7ea40efbdd8401534041b27b6036e293"><div class="ttname"><a href="group__agentclass__functions.html#ga7ea40efbdd8401534041b27b6036e293">Cosmos::Agent::unsubscribe</a></div><div class="ttdeci">int32_t unsubscribe()</div><div class="ttdoc">Close COSMOS subscription channel. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1927</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga59c00820cf975e432ee3edd54198b5ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga59c00820cf975e432ee3edd54198b5ae">&#9670;&nbsp;</a></span>running()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t Cosmos::Agent::running </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if we're supposed to be running. </p>
<p>Returns the value of the internal variable that indicates that the threads are running. </p><dl class="section return"><dt>Returns</dt><dd>Value of internal state variable, as enumerated in <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a>:State. </dd></dl>
<div class="fragment"><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].stateflag);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2f0b7d82313c3c678e0b354bd6defa56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2f0b7d82313c3c678e0b354bd6defa56">&#9670;&nbsp;</a></span>last_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::last_error </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Last error value. Get value of last error returned by any function. </p>
<div class="fragment"><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="class_cosmos_1_1_agent.html#a412e30b2f66dd9b3648f96cda2f09e3a">error_value</a>);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a412e30b2f66dd9b3648f96cda2f09e3a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a412e30b2f66dd9b3648f96cda2f09e3a">Cosmos::Agent::error_value</a></div><div class="ttdeci">int32_t error_value</div><div class="ttdoc">Last error. </div><div class="ttdef"><b>Definition:</b> agentclass.h:363</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga81048eb6c9d2254e64f49a3f1441c747"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga81048eb6c9d2254e64f49a3f1441c747">&#9670;&nbsp;</a></span>send_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::send_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbeatstruc.html">beatstruc</a>&#160;</td>
          <td class="paramname"><em>hbeat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string &amp;&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>waitsec</em> = <code>5.</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a request over AGENT. </p>
<p>Send a request string to the process at the provided address </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hbeat</td><td>The agent <a class="el" href="structbeatstruc.html">beatstruc</a> </td></tr>
    <tr><td class="paramname">request</td><td>the request and its arguments </td></tr>
    <tr><td class="paramname">output</td><td>any output returned by the request </td></tr>
    <tr><td class="paramname">waitsec</td><td>Maximum number of seconds to wait </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Either the number of bytes returned, or an error number. </dd></dl>
<div class="fragment"><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <a class="code" href="structsocket__channel.html">socket_channel</a> <a class="code" href="agent__forward_8cpp.html#af83e2d7216c552e5350aa9434a413122">sendchan</a>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        int32_t <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        int32_t nbytes;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        vector &lt;char&gt; toutput;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        toutput.resize(<a class="code" href="group__jsonlib__constants.html#ga855b38da23dc26339aa8a5d726aab4a6">AGENTMAXBUFFER</a>+1);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">if</span> (hbeat.<a class="code" href="structbeatstruc.html#a51a89eca3d0158e98163af55beecbff1">utc</a> == 0. || hbeat.<a class="code" href="structbeatstruc.html#a31b815739026846b72a9a9989fbfee31">addr</a> == 0 || hbeat.<a class="code" href="structbeatstruc.html#a5c877ce2b7cf09465e23b97482ad9843">port</a> == 0)</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            <span class="keywordflow">return</span> (<a class="code" href="group__error__defines.html#gafef6f320cbaf75b1d8b2ebbf8e60c532">AGENT_ERROR_SOCKET</a>);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <a class="code" href="class_elapsed_time.html">ElapsedTime</a> ep;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        ep.<a class="code" href="class_elapsed_time.html#aac8472a6b2b676e4b824e4679d2be63a">start</a>();</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">if</span> ((iretn=<a class="code" href="group__socketlib__functions.html#gabb124101a33109d7b58c6e831cc79e03">socket_open</a>(&amp;sendchan, <a class="code" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9">NetworkType::UDP</a>, hbeat.<a class="code" href="structbeatstruc.html#a31b815739026846b72a9a9989fbfee31">addr</a>, hbeat.<a class="code" href="structbeatstruc.html#a5c877ce2b7cf09465e23b97482ad9843">port</a>, <a class="code" href="group__socketlib__constants.html#gaff2b5308ceb89f1c50f2e8dcf079cf16">SOCKET_TALK</a>, <a class="code" href="group__socketlib__constants.html#gac29168deb0d3412d231cca522ece72bb">SOCKET_BLOCKING</a>, <a class="code" href="agentclass_8h.html#a4e52d229764406cfc40a9c91a4a5117d">AGENTRCVTIMEO</a>)) &lt; 0)</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <span class="keywordflow">return</span> (-errno);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        nbytes = strnlen(request.c_str(), hbeat.<a class="code" href="structbeatstruc.html#ab1a132a5634f62581e3dd81bab17d129">bsz</a>);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">if</span> ((nbytes=sendto(sendchan.<a class="code" href="structsocket__channel.html#ab3e41f03ddf5695db099e8d7db507fd2">cudp</a>, request.c_str(), nbytes, 0, (<span class="keyword">struct </span>sockaddr *)&amp;sendchan.<a class="code" href="structsocket__channel.html#a8d2c39afd45c287064229be41dfea731">caddr</a>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in))) &lt; 0)</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        {</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            CLOSE_SOCKET(sendchan.<a class="code" href="structsocket__channel.html#ab3e41f03ddf5695db099e8d7db507fd2">cudp</a>);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="preprocessor">#ifdef COSMOS_WIN_OS</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <span class="keywordflow">return</span>(-WSAGetLastError());</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <span class="keywordflow">return</span> (-errno);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">do</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            nbytes = recvfrom(sendchan.<a class="code" href="structsocket__channel.html#ab3e41f03ddf5695db099e8d7db507fd2">cudp</a>, toutput.data(), <a class="code" href="group__jsonlib__constants.html#ga855b38da23dc26339aa8a5d726aab4a6">AGENTMAXBUFFER</a>, 0, (<span class="keyword">struct </span>sockaddr *)NULL, (socklen_t *)NULL);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        } <span class="keywordflow">while</span> ( (nbytes &lt;= 0) &amp;&amp; (ep.<a class="code" href="class_elapsed_time.html#ac75b9ada495d638999905483340e3534">split</a>() &lt;= <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>) );</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        CLOSE_SOCKET(sendchan.<a class="code" href="structsocket__channel.html#ab3e41f03ddf5695db099e8d7db507fd2">cudp</a>);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordflow">if</span> (nbytes &lt; 0)</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="preprocessor">#ifdef COSMOS_WIN_OS</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <span class="keywordflow">return</span>(-WSAGetLastError());</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="keywordflow">return</span> (-errno);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            toutput[nbytes] = 0;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            toutput.resize(nbytes+1);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="keywordtype">string</span> reply(toutput.begin(), toutput.end());</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a> = reply;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="keywordflow">return</span> (nbytes);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        }</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    }</div><div class="ttc" id="group__socketlib__constants_html_ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9"><div class="ttname"><a href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9">NetworkType::UDP</a></div><div class="ttdoc">Agent socket using Unicast UDP. </div></div>
<div class="ttc" id="structbeatstruc_html_ab1a132a5634f62581e3dd81bab17d129"><div class="ttname"><a href="structbeatstruc.html#ab1a132a5634f62581e3dd81bab17d129">beatstruc::bsz</a></div><div class="ttdeci">uint32_t bsz</div><div class="ttdoc">Transfer buffer size. </div><div class="ttdef"><b>Definition:</b> jsondef.h:869</div></div>
<div class="ttc" id="structbeatstruc_html_a31b815739026846b72a9a9989fbfee31"><div class="ttname"><a href="structbeatstruc.html#a31b815739026846b72a9a9989fbfee31">beatstruc::addr</a></div><div class="ttdeci">char addr[18]</div><div class="ttdoc">Protocol Address. </div><div class="ttdef"><b>Definition:</b> jsondef.h:865</div></div>
<div class="ttc" id="rw__test_8cpp_html_afece067d35cd26a458c56fa8f276e734"><div class="ttname"><a href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a></div><div class="ttdeci">int iretn</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="group__socketlib__constants_html_gaff2b5308ceb89f1c50f2e8dcf079cf16"><div class="ttname"><a href="group__socketlib__constants.html#gaff2b5308ceb89f1c50f2e8dcf079cf16">SOCKET_TALK</a></div><div class="ttdeci">#define SOCKET_TALK</div><div class="ttdoc">Talk followed by optional listen (sendto address) </div><div class="ttdef"><b>Definition:</b> socketlib.h:82</div></div>
<div class="ttc" id="class_elapsed_time_html_aac8472a6b2b676e4b824e4679d2be63a"><div class="ttname"><a href="class_elapsed_time.html#aac8472a6b2b676e4b824e4679d2be63a">ElapsedTime::start</a></div><div class="ttdeci">void start()</div><div class="ttdoc">ElapsedTime::start. </div><div class="ttdef"><b>Definition:</b> elapsedtime.cpp:203</div></div>
<div class="ttc" id="structsocket__channel_html_ab3e41f03ddf5695db099e8d7db507fd2"><div class="ttname"><a href="structsocket__channel.html#ab3e41f03ddf5695db099e8d7db507fd2">socket_channel::cudp</a></div><div class="ttdeci">int32_t cudp</div><div class="ttdef"><b>Definition:</b> socketlib.h:120</div></div>
<div class="ttc" id="agent__add__soh_8cpp_html_a2ad8d53c30be4a794997911a7277c438"><div class="ttname"><a href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a></div><div class="ttdeci">int waitsec</div><div class="ttdef"><b>Definition:</b> agent_add_soh.cpp:56</div></div>
<div class="ttc" id="structbeatstruc_html_a5c877ce2b7cf09465e23b97482ad9843"><div class="ttname"><a href="structbeatstruc.html#a5c877ce2b7cf09465e23b97482ad9843">beatstruc::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdoc">AGENT port. </div><div class="ttdef"><b>Definition:</b> jsondef.h:867</div></div>
<div class="ttc" id="structsocket__channel_html"><div class="ttname"><a href="structsocket__channel.html">socket_channel</a></div><div class="ttdef"><b>Definition:</b> socketlib.h:115</div></div>
<div class="ttc" id="structsocket__channel_html_a8d2c39afd45c287064229be41dfea731"><div class="ttname"><a href="structsocket__channel.html#a8d2c39afd45c287064229be41dfea731">socket_channel::caddr</a></div><div class="ttdeci">struct sockaddr_in caddr</div><div class="ttdef"><b>Definition:</b> socketlib.h:122</div></div>
<div class="ttc" id="group__error__defines_html_gafef6f320cbaf75b1d8b2ebbf8e60c532"><div class="ttname"><a href="group__error__defines.html#gafef6f320cbaf75b1d8b2ebbf8e60c532">AGENT_ERROR_SOCKET</a></div><div class="ttdeci">#define AGENT_ERROR_SOCKET</div><div class="ttdef"><b>Definition:</b> cosmos-errno.h:108</div></div>
<div class="ttc" id="group__socketlib__constants_html_gac29168deb0d3412d231cca522ece72bb"><div class="ttname"><a href="group__socketlib__constants.html#gac29168deb0d3412d231cca522ece72bb">SOCKET_BLOCKING</a></div><div class="ttdeci">#define SOCKET_BLOCKING</div><div class="ttdoc">Blocking Agent. </div><div class="ttdef"><b>Definition:</b> socketlib.h:78</div></div>
<div class="ttc" id="agentclass_8h_html_a4e52d229764406cfc40a9c91a4a5117d"><div class="ttname"><a href="agentclass_8h.html#a4e52d229764406cfc40a9c91a4a5117d">AGENTRCVTIMEO</a></div><div class="ttdeci">#define AGENTRCVTIMEO</div><div class="ttdoc">Default AGENT socket RCVTIMEO (100 msec) </div><div class="ttdef"><b>Definition:</b> agentclass.h:191</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="class_elapsed_time_html"><div class="ttname"><a href="class_elapsed_time.html">ElapsedTime</a></div><div class="ttdef"><b>Definition:</b> elapsedtime.h:62</div></div>
<div class="ttc" id="structbeatstruc_html_a51a89eca3d0158e98163af55beecbff1"><div class="ttname"><a href="structbeatstruc.html#a51a89eca3d0158e98163af55beecbff1">beatstruc::utc</a></div><div class="ttdeci">double utc</div><div class="ttdef"><b>Definition:</b> jsondef.h:857</div></div>
<div class="ttc" id="agent__forward_8cpp_html_af83e2d7216c552e5350aa9434a413122"><div class="ttname"><a href="agent__forward_8cpp.html#af83e2d7216c552e5350aa9434a413122">sendchan</a></div><div class="ttdeci">std::vector&lt; socket_channel &gt; sendchan</div><div class="ttdef"><b>Definition:</b> agent_forward.cpp:42</div></div>
<div class="ttc" id="group__jsonlib__constants_html_ga855b38da23dc26339aa8a5d726aab4a6"><div class="ttname"><a href="group__jsonlib__constants.html#ga855b38da23dc26339aa8a5d726aab4a6">AGENTMAXBUFFER</a></div><div class="ttdeci">#define AGENTMAXBUFFER</div><div class="ttdoc">Entire cosmosstruc. </div><div class="ttdef"><b>Definition:</b> jsondef.h:463</div></div>
<div class="ttc" id="group__socketlib__functions_html_gabb124101a33109d7b58c6e831cc79e03"><div class="ttname"><a href="group__socketlib__functions.html#gabb124101a33109d7b58c6e831cc79e03">socket_open</a></div><div class="ttdeci">int32_t socket_open(socket_channel *channel, NetworkType ntype, const char *address, uint16_t port, uint16_t role, bool blocking, uint32_t usectimeo, uint32_t rcvbuf, uint32_t sndbuf)</div><div class="ttdoc">Open UDP socket. </div><div class="ttdef"><b>Definition:</b> socketlib.cpp:51</div></div>
<div class="ttc" id="class_elapsed_time_html_ac75b9ada495d638999905483340e3534"><div class="ttname"><a href="class_elapsed_time.html#ac75b9ada495d638999905483340e3534">ElapsedTime::split</a></div><div class="ttdeci">double split()</div><div class="ttdoc">ElapsedTime::split, gets the current elapsed time since the start() </div><div class="ttdef"><b>Definition:</b> elapsedtime.cpp:234</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga197a9db35272fb6da91019ea0fe35ff6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga197a9db35272fb6da91019ea0fe35ff6">&#9670;&nbsp;</a></span>send_request_jsonnode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::send_request_jsonnode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbeatstruc.html">beatstruc</a>&#160;</td>
          <td class="paramname"><em>hbeat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjsonnode.html">jsonnode</a> &amp;&#160;</td>
          <td class="paramname"><em>jnode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>waitsec</em> = <code>5.</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send request for Node JSON. </p>
<p>Send a set of requests to return the various JSON strings that make up a <a class="el" href="structjsonnode.html">jsonnode</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hbeat</td><td>The agent <a class="el" href="structbeatstruc.html">beatstruc</a> </td></tr>
    <tr><td class="paramname">jnode</td><td><a class="el" href="structjsonnode.html">jsonnode</a> cotaining Node information. </td></tr>
    <tr><td class="paramname">waitsec</td><td>Maximum number of seconds to wait. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Either the number of bytes returned, or an error number. </dd></dl>
<div class="fragment"><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    {</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        int32_t <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        jnode.<a class="code" href="structjsonnode.html#a3478ffcb086a1fac8ea8a39339cc31c3">name</a> = hbeat.<a class="code" href="structbeatstruc.html#aed6bbaeb77bcc53c7a3a8643a93ca4b4">node</a>;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        iretn = <a class="code" href="group__agentclass__functions.html#ga81048eb6c9d2254e64f49a3f1441c747">send_request</a>(hbeat, <span class="stringliteral">&quot;nodejson&quot;</span>, jnode.<a class="code" href="structjsonnode.html#a1f583980af445baa6273d5562df5dfe5">node</a>, <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">if</span> (iretn &lt; 0)</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        }</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        iretn = <a class="code" href="group__agentclass__functions.html#ga81048eb6c9d2254e64f49a3f1441c747">send_request</a>(hbeat, <span class="stringliteral">&quot;statejson&quot;</span>, jnode.<a class="code" href="structjsonnode.html#aac9a8cf214d01ed8e623e4b086e9218e">state</a>, <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="keywordflow">if</span> (iretn &lt; 0)</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        {</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        }</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        iretn = <a class="code" href="group__agentclass__functions.html#ga81048eb6c9d2254e64f49a3f1441c747">send_request</a>(hbeat, <span class="stringliteral">&quot;utcstartjson&quot;</span>, jnode.<a class="code" href="structjsonnode.html#afbc5509e60793ed7d867d26985f06088">utcstart</a>, <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">if</span> (iretn &lt; 0)</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        {</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        }</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        iretn = <a class="code" href="group__agentclass__functions.html#ga81048eb6c9d2254e64f49a3f1441c747">send_request</a>(hbeat, <span class="stringliteral">&quot;piecesjson&quot;</span>, jnode.<a class="code" href="structjsonnode.html#ac28228a28705ed06a6715f06ec1177a7">pieces</a>, <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="keywordflow">if</span> (iretn &lt; 0)</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        }</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        iretn = <a class="code" href="group__agentclass__functions.html#ga81048eb6c9d2254e64f49a3f1441c747">send_request</a>(hbeat, <span class="stringliteral">&quot;facesjson&quot;</span>, jnode.<a class="code" href="structjsonnode.html#a1be37f409f8fe558de85e1a6c24e6fbc">faces</a>, <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">if</span> (iretn &lt; 0)</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        {</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        iretn = <a class="code" href="group__agentclass__functions.html#ga81048eb6c9d2254e64f49a3f1441c747">send_request</a>(hbeat, <span class="stringliteral">&quot;vertexsjson&quot;</span>, jnode.<a class="code" href="structjsonnode.html#afd9a5f08b3c60a1b81c4ce30a0cfea94">vertexs</a>, <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keywordflow">if</span> (iretn &lt; 0)</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        iretn = <a class="code" href="group__agentclass__functions.html#ga81048eb6c9d2254e64f49a3f1441c747">send_request</a>(hbeat, <span class="stringliteral">&quot;devgenjson&quot;</span>, jnode.<a class="code" href="structjsonnode.html#aafae2837b974ad56b8f34d22a72de5dc">devgen</a>, <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keywordflow">if</span> (iretn &lt; 0)</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        iretn = <a class="code" href="group__agentclass__functions.html#ga81048eb6c9d2254e64f49a3f1441c747">send_request</a>(hbeat, <span class="stringliteral">&quot;devspecjson&quot;</span>, jnode.<a class="code" href="structjsonnode.html#a7a1846f311014316a6711630f3379d6a">devspec</a>, <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="keywordflow">if</span> (iretn &lt; 0)</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        {</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        }</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        iretn = <a class="code" href="group__agentclass__functions.html#ga81048eb6c9d2254e64f49a3f1441c747">send_request</a>(hbeat, <span class="stringliteral">&quot;portsjson&quot;</span>, jnode.<a class="code" href="structjsonnode.html#a217e2df7876f5684afbc4ba06730d57e">ports</a>, <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordflow">if</span> (iretn &lt; 0)</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        {</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        iretn = <a class="code" href="group__agentclass__functions.html#ga81048eb6c9d2254e64f49a3f1441c747">send_request</a>(hbeat, <span class="stringliteral">&quot;aliasesjson&quot;</span>, jnode.<a class="code" href="structjsonnode.html#ae8d9c447874b30f158fe75b8c82c3d0e">aliases</a>, <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">if</span> (iretn &lt; 0)</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        {</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        }</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        iretn = <a class="code" href="group__agentclass__functions.html#ga81048eb6c9d2254e64f49a3f1441c747">send_request</a>(hbeat, <span class="stringliteral">&quot;targetsjson&quot;</span>, jnode.<a class="code" href="structjsonnode.html#adf5681f8ea5871e9af1f16bcefc8270a">targets</a>, <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    }</div><div class="ttc" id="structjsonnode_html_ae8d9c447874b30f158fe75b8c82c3d0e"><div class="ttname"><a href="structjsonnode.html#ae8d9c447874b30f158fe75b8c82c3d0e">jsonnode::aliases</a></div><div class="ttdeci">string aliases</div><div class="ttdef"><b>Definition:</b> jsondef.h:747</div></div>
<div class="ttc" id="structjsonnode_html_a7a1846f311014316a6711630f3379d6a"><div class="ttname"><a href="structjsonnode.html#a7a1846f311014316a6711630f3379d6a">jsonnode::devspec</a></div><div class="ttdeci">string devspec</div><div class="ttdef"><b>Definition:</b> jsondef.h:744</div></div>
<div class="ttc" id="structjsonnode_html_a1be37f409f8fe558de85e1a6c24e6fbc"><div class="ttname"><a href="structjsonnode.html#a1be37f409f8fe558de85e1a6c24e6fbc">jsonnode::faces</a></div><div class="ttdeci">string faces</div><div class="ttdef"><b>Definition:</b> jsondef.h:741</div></div>
<div class="ttc" id="structjsonnode_html_a1f583980af445baa6273d5562df5dfe5"><div class="ttname"><a href="structjsonnode.html#a1f583980af445baa6273d5562df5dfe5">jsonnode::node</a></div><div class="ttdeci">string node</div><div class="ttdef"><b>Definition:</b> jsondef.h:737</div></div>
<div class="ttc" id="rw__test_8cpp_html_afece067d35cd26a458c56fa8f276e734"><div class="ttname"><a href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a></div><div class="ttdeci">int iretn</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="structbeatstruc_html_aed6bbaeb77bcc53c7a3a8643a93ca4b4"><div class="ttname"><a href="structbeatstruc.html#aed6bbaeb77bcc53c7a3a8643a93ca4b4">beatstruc::node</a></div><div class="ttdeci">char node[40+1]</div><div class="ttdef"><b>Definition:</b> jsondef.h:859</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga81048eb6c9d2254e64f49a3f1441c747"><div class="ttname"><a href="group__agentclass__functions.html#ga81048eb6c9d2254e64f49a3f1441c747">Cosmos::Agent::send_request</a></div><div class="ttdeci">int32_t send_request(beatstruc cbeat, string request, string &amp;output, float waitsec=5.)</div><div class="ttdoc">Send a request over AGENT. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:413</div></div>
<div class="ttc" id="structjsonnode_html_ac28228a28705ed06a6715f06ec1177a7"><div class="ttname"><a href="structjsonnode.html#ac28228a28705ed06a6715f06ec1177a7">jsonnode::pieces</a></div><div class="ttdeci">string pieces</div><div class="ttdef"><b>Definition:</b> jsondef.h:742</div></div>
<div class="ttc" id="agent__add__soh_8cpp_html_a2ad8d53c30be4a794997911a7277c438"><div class="ttname"><a href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a></div><div class="ttdeci">int waitsec</div><div class="ttdef"><b>Definition:</b> agent_add_soh.cpp:56</div></div>
<div class="ttc" id="structjsonnode_html_adf5681f8ea5871e9af1f16bcefc8270a"><div class="ttname"><a href="structjsonnode.html#adf5681f8ea5871e9af1f16bcefc8270a">jsonnode::targets</a></div><div class="ttdeci">string targets</div><div class="ttdef"><b>Definition:</b> jsondef.h:746</div></div>
<div class="ttc" id="structjsonnode_html_afbc5509e60793ed7d867d26985f06088"><div class="ttname"><a href="structjsonnode.html#afbc5509e60793ed7d867d26985f06088">jsonnode::utcstart</a></div><div class="ttdeci">string utcstart</div><div class="ttdef"><b>Definition:</b> jsondef.h:739</div></div>
<div class="ttc" id="structjsonnode_html_a217e2df7876f5684afbc4ba06730d57e"><div class="ttname"><a href="structjsonnode.html#a217e2df7876f5684afbc4ba06730d57e">jsonnode::ports</a></div><div class="ttdeci">string ports</div><div class="ttdef"><b>Definition:</b> jsondef.h:745</div></div>
<div class="ttc" id="structjsonnode_html_a3478ffcb086a1fac8ea8a39339cc31c3"><div class="ttname"><a href="structjsonnode.html#a3478ffcb086a1fac8ea8a39339cc31c3">jsonnode::name</a></div><div class="ttdeci">string name</div><div class="ttdef"><b>Definition:</b> jsondef.h:736</div></div>
<div class="ttc" id="structjsonnode_html_aac9a8cf214d01ed8e623e4b086e9218e"><div class="ttname"><a href="structjsonnode.html#aac9a8cf214d01ed8e623e4b086e9218e">jsonnode::state</a></div><div class="ttdeci">string state</div><div class="ttdef"><b>Definition:</b> jsondef.h:738</div></div>
<div class="ttc" id="structjsonnode_html_aafae2837b974ad56b8f34d22a72de5dc"><div class="ttname"><a href="structjsonnode.html#aafae2837b974ad56b8f34d22a72de5dc">jsonnode::devgen</a></div><div class="ttdeci">string devgen</div><div class="ttdef"><b>Definition:</b> jsondef.h:743</div></div>
<div class="ttc" id="structjsonnode_html_afd9a5f08b3c60a1b81c4ce30a0cfea94"><div class="ttname"><a href="structjsonnode.html#afd9a5f08b3c60a1b81c4ce30a0cfea94">jsonnode::vertexs</a></div><div class="ttdeci">string vertexs</div><div class="ttdef"><b>Definition:</b> jsondef.h:740</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga663fc208857aba63e7a9e5e7bbe2091b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga663fc208857aba63e7a9e5e7bbe2091b">&#9670;&nbsp;</a></span>get_server()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::get_server </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>waitsec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbeatstruc.html">beatstruc</a> *&#160;</td>
          <td class="paramname"><em>rbeat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get specific server. </p>
<p>Listen to the multicast/broadcast traffic for a set amount of time, waiting for a specific named server to appear, then return its heartbeat. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>Node for the server. </td></tr>
    <tr><td class="paramname">name</td><td>Name of the server. </td></tr>
    <tr><td class="paramname">waitsec</td><td>Maximum number of seconds to wait </td></tr>
    <tr><td class="paramname">rbeat</td><td>pointer to a location to store the heartbeat </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if found, otherwise 0, or an error number </dd></dl>
<ol type="1">
<li>Loop for <a class="el" href="agent__transmitter2_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a> seconds, or until we discover desired heartbeat. </li>
</ol>
<div class="fragment"><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <a class="code" href="class_elapsed_time.html">ElapsedTime</a> ep;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        ep.<a class="code" href="class_elapsed_time.html#aac8472a6b2b676e4b824e4679d2be63a">start</a>();</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="keywordflow">do</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="class_cosmos_1_1_agent.html#a997299a3ce1040acef3dd9878835ea75">agent_list</a>.size(); ++<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                <span class="keywordflow">if</span> (name == <a class="code" href="class_cosmos_1_1_agent.html#a997299a3ce1040acef3dd9878835ea75">agent_list</a>[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].proc &amp;&amp; <a class="code" href="agent__exec_8cpp.html#a90c46d7eb29ad8baa1281a134b56ab4c">node</a> == <a class="code" href="class_cosmos_1_1_agent.html#a997299a3ce1040acef3dd9878835ea75">agent_list</a>[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="agent__exec_8cpp.html#a90c46d7eb29ad8baa1281a134b56ab4c">node</a>)</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                    <span class="keywordflow">if</span> (rbeat != NULL)</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                    {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                        *rbeat = <a class="code" href="class_cosmos_1_1_agent.html#a997299a3ce1040acef3dd9878835ea75">agent_list</a>[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                    }</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                    <span class="keywordflow">return</span> (1);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            COSMOS_SLEEP(.1);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        } <span class="keywordflow">while</span> (ep.<a class="code" href="class_elapsed_time.html#ac75b9ada495d638999905483340e3534">split</a>() &lt;= <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordflow">return</span>(0);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    }</div><div class="ttc" id="rw__test_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="class_elapsed_time_html_aac8472a6b2b676e4b824e4679d2be63a"><div class="ttname"><a href="class_elapsed_time.html#aac8472a6b2b676e4b824e4679d2be63a">ElapsedTime::start</a></div><div class="ttdeci">void start()</div><div class="ttdoc">ElapsedTime::start. </div><div class="ttdef"><b>Definition:</b> elapsedtime.cpp:203</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a997299a3ce1040acef3dd9878835ea75"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a997299a3ce1040acef3dd9878835ea75">Cosmos::Agent::agent_list</a></div><div class="ttdeci">vector&lt; beatstruc &gt; agent_list</div><div class="ttdoc">List of active agents. </div><div class="ttdef"><b>Definition:</b> agentclass.h:324</div></div>
<div class="ttc" id="agent__add__soh_8cpp_html_a2ad8d53c30be4a794997911a7277c438"><div class="ttname"><a href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a></div><div class="ttdeci">int waitsec</div><div class="ttdef"><b>Definition:</b> agent_add_soh.cpp:56</div></div>
<div class="ttc" id="agent__exec_8cpp_html_a90c46d7eb29ad8baa1281a134b56ab4c"><div class="ttname"><a href="agent__exec_8cpp.html#a90c46d7eb29ad8baa1281a134b56ab4c">node</a></div><div class="ttdeci">string node</div><div class="ttdef"><b>Definition:</b> agent_exec.cpp:131</div></div>
<div class="ttc" id="class_elapsed_time_html"><div class="ttname"><a href="class_elapsed_time.html">ElapsedTime</a></div><div class="ttdef"><b>Definition:</b> elapsedtime.h:62</div></div>
<div class="ttc" id="class_elapsed_time_html_ac75b9ada495d638999905483340e3534"><div class="ttname"><a href="class_elapsed_time.html#ac75b9ada495d638999905483340e3534">ElapsedTime::split</a></div><div class="ttdeci">double split()</div><div class="ttdoc">ElapsedTime::split, gets the current elapsed time since the start() </div><div class="ttdef"><b>Definition:</b> elapsedtime.cpp:234</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2f607e4e5023fcc3ccce30dbb9d8829d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2f607e4e5023fcc3ccce30dbb9d8829d">&#9670;&nbsp;</a></span>find_agent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbeatstruc.html">beatstruc</a> Cosmos::Agent::find_agent </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>node</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find agent. </p>
<p>Check the <a class="el" href="class_cosmos_1_1_agent.html#a997299a3ce1040acef3dd9878835ea75" title="List of active agents. ">Cosmos::Agent::agent_list</a> for the particular agent, returning its heartbeat if found. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">agent</td><td>Name of agent. </td></tr>
    <tr><td class="paramname">node</td><td>Node that agent is in. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structbeatstruc.html">beatstruc</a> of located agent, otherwise empty <a class="el" href="structbeatstruc.html">beatstruc</a>. </dd></dl>
<div class="fragment"><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    {</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="agent__exec_8cpp.html#a90c46d7eb29ad8baa1281a134b56ab4c">node</a>.empty())</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            <a class="code" href="agent__exec_8cpp.html#a90c46d7eb29ad8baa1281a134b56ab4c">node</a> = <a class="code" href="class_cosmos_1_1_agent.html#a71125ee955b8908b99fb7fb451acda4f">nodeName</a>;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        }</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="structbeatstruc.html">beatstruc</a> &amp;it : <a class="code" href="class_cosmos_1_1_agent.html#a997299a3ce1040acef3dd9878835ea75">agent_list</a>)</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        {</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <span class="keywordflow">if</span> (it.node == <a class="code" href="agent__exec_8cpp.html#a90c46d7eb29ad8baa1281a134b56ab4c">node</a> &amp;&amp; it.proc == <a class="code" href="agent__001_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>)</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                it.exists = <span class="keyword">true</span>;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                <span class="keywordflow">return</span> it;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        }</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <a class="code" href="structbeatstruc.html">beatstruc</a> nobeat;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        nobeat.<a class="code" href="structbeatstruc.html#a2b04a67b363050eb757f8c8184171bf6">exists</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">return</span> nobeat;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    }</div><div class="ttc" id="structbeatstruc_html"><div class="ttname"><a href="structbeatstruc.html">beatstruc</a></div><div class="ttdef"><b>Definition:</b> jsondef.h:854</div></div>
<div class="ttc" id="structbeatstruc_html_a2b04a67b363050eb757f8c8184171bf6"><div class="ttname"><a href="structbeatstruc.html#a2b04a67b363050eb757f8c8184171bf6">beatstruc::exists</a></div><div class="ttdeci">bool exists</div><div class="ttdoc">Existence Flag (if beat exists then flag is set to true, false otherwise) </div><div class="ttdef"><b>Definition:</b> jsondef.h:881</div></div>
<div class="ttc" id="agent__001_8cpp_html_a33f057efc5b568f7255a73d2570c426a"><div class="ttname"><a href="agent__001_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a></div><div class="ttdeci">Agent * agent</div><div class="ttdef"><b>Definition:</b> agent_001.cpp:48</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a997299a3ce1040acef3dd9878835ea75"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a997299a3ce1040acef3dd9878835ea75">Cosmos::Agent::agent_list</a></div><div class="ttdeci">vector&lt; beatstruc &gt; agent_list</div><div class="ttdoc">List of active agents. </div><div class="ttdef"><b>Definition:</b> agentclass.h:324</div></div>
<div class="ttc" id="agent__exec_8cpp_html_a90c46d7eb29ad8baa1281a134b56ab4c"><div class="ttname"><a href="agent__exec_8cpp.html#a90c46d7eb29ad8baa1281a134b56ab4c">node</a></div><div class="ttdeci">string node</div><div class="ttdef"><b>Definition:</b> agent_exec.cpp:131</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a71125ee955b8908b99fb7fb451acda4f"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a71125ee955b8908b99fb7fb451acda4f">Cosmos::Agent::nodeName</a></div><div class="ttdeci">string nodeName</div><div class="ttdef"><b>Definition:</b> agentclass.h:342</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga5f48792e2c91bc53809c0731459a7945"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5f48792e2c91bc53809c0731459a7945">&#9670;&nbsp;</a></span>find_server()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbeatstruc.html">beatstruc</a> Cosmos::Agent::find_server </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>proc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>waitsec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find single server. </p>
<p>Listen to the local subnet for a set amount of time, collecting heartbeats, searching for a particular agent. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>Node that agent is in. </td></tr>
    <tr><td class="paramname">proc</td><td>Name of agent. </td></tr>
    <tr><td class="paramname">waitsec</td><td>Maximum number of seconds to wait. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structbeatstruc.html">beatstruc</a> of located agent, otherwise empty <a class="el" href="structbeatstruc.html">beatstruc</a>. </dd></dl>
<p>Loop for <a class="el" href="agent__transmitter2_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a> seconds, looking for desired agent. </p>
<div class="fragment"><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    {</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <a class="code" href="structbeatstruc.html">beatstruc</a> <a class="code" href="agent__file_8cpp.html#ae484bb989e54cf3db9f05b4c4f67d3c5">cbeat</a> = {0.,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,<a class="code" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32">NetworkType::MULTICAST</a>,<span class="stringliteral">&quot;&quot;</span>,0,0,0.,<span class="stringliteral">&quot;&quot;</span>,0.,0.,0.,<span class="keyword">false</span>};</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <a class="code" href="class_elapsed_time.html">ElapsedTime</a> ep;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        ep.<a class="code" href="class_elapsed_time.html#aac8472a6b2b676e4b824e4679d2be63a">start</a>();</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="keywordflow">do</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        {</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            cbeat = <a class="code" href="group__agentclass__functions.html#ga2f607e4e5023fcc3ccce30dbb9d8829d">find_agent</a>(proc, <a class="code" href="agent__exec_8cpp.html#a90c46d7eb29ad8baa1281a134b56ab4c">node</a>);</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            <span class="keywordflow">if</span> (cbeat.<a class="code" href="structbeatstruc.html#a2b04a67b363050eb757f8c8184171bf6">exists</a>)</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            {</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="agent__file_8cpp.html#ae484bb989e54cf3db9f05b4c4f67d3c5">cbeat</a>;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            }</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">//            cbeat = Agent::poll_beat(1);</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">//            if (cbeat.utc != 0.)</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">//            {</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">//                if (!strcmp(cbeat.proc, proc.c_str()) &amp;&amp; !strcmp(cbeat.node, node.c_str()))</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">//                {</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">//                    return cbeat;</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">//                }</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">//            }</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        } <span class="keywordflow">while</span> (ep.<a class="code" href="class_elapsed_time.html#ac75b9ada495d638999905483340e3534">split</a>() &lt;= <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="comment">// ?? do a complete reset of cbeat if agent not found, not just utc = 0</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        cbeat.<a class="code" href="structbeatstruc.html#a51a89eca3d0158e98163af55beecbff1">utc</a> = 0.;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        cbeat.<a class="code" href="structbeatstruc.html#aed6bbaeb77bcc53c7a3a8643a93ca4b4">node</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="comment">// etc ...</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="agent__file_8cpp.html#ae484bb989e54cf3db9f05b4c4f67d3c5">cbeat</a>;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    }</div><div class="ttc" id="structbeatstruc_html"><div class="ttname"><a href="structbeatstruc.html">beatstruc</a></div><div class="ttdef"><b>Definition:</b> jsondef.h:854</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga2f607e4e5023fcc3ccce30dbb9d8829d"><div class="ttname"><a href="group__agentclass__functions.html#ga2f607e4e5023fcc3ccce30dbb9d8829d">Cosmos::Agent::find_agent</a></div><div class="ttdeci">beatstruc find_agent(string agent, string node=&quot;&quot;)</div><div class="ttdoc">Find agent. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:585</div></div>
<div class="ttc" id="structbeatstruc_html_a2b04a67b363050eb757f8c8184171bf6"><div class="ttname"><a href="structbeatstruc.html#a2b04a67b363050eb757f8c8184171bf6">beatstruc::exists</a></div><div class="ttdeci">bool exists</div><div class="ttdoc">Existence Flag (if beat exists then flag is set to true, false otherwise) </div><div class="ttdef"><b>Definition:</b> jsondef.h:881</div></div>
<div class="ttc" id="class_elapsed_time_html_aac8472a6b2b676e4b824e4679d2be63a"><div class="ttname"><a href="class_elapsed_time.html#aac8472a6b2b676e4b824e4679d2be63a">ElapsedTime::start</a></div><div class="ttdeci">void start()</div><div class="ttdoc">ElapsedTime::start. </div><div class="ttdef"><b>Definition:</b> elapsedtime.cpp:203</div></div>
<div class="ttc" id="structbeatstruc_html_aed6bbaeb77bcc53c7a3a8643a93ca4b4"><div class="ttname"><a href="structbeatstruc.html#aed6bbaeb77bcc53c7a3a8643a93ca4b4">beatstruc::node</a></div><div class="ttdeci">char node[40+1]</div><div class="ttdef"><b>Definition:</b> jsondef.h:859</div></div>
<div class="ttc" id="agent__add__soh_8cpp_html_a2ad8d53c30be4a794997911a7277c438"><div class="ttname"><a href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a></div><div class="ttdeci">int waitsec</div><div class="ttdef"><b>Definition:</b> agent_add_soh.cpp:56</div></div>
<div class="ttc" id="agent__exec_8cpp_html_a90c46d7eb29ad8baa1281a134b56ab4c"><div class="ttname"><a href="agent__exec_8cpp.html#a90c46d7eb29ad8baa1281a134b56ab4c">node</a></div><div class="ttdeci">string node</div><div class="ttdef"><b>Definition:</b> agent_exec.cpp:131</div></div>
<div class="ttc" id="class_elapsed_time_html"><div class="ttname"><a href="class_elapsed_time.html">ElapsedTime</a></div><div class="ttdef"><b>Definition:</b> elapsedtime.h:62</div></div>
<div class="ttc" id="structbeatstruc_html_a51a89eca3d0158e98163af55beecbff1"><div class="ttname"><a href="structbeatstruc.html#a51a89eca3d0158e98163af55beecbff1">beatstruc::utc</a></div><div class="ttdeci">double utc</div><div class="ttdef"><b>Definition:</b> jsondef.h:857</div></div>
<div class="ttc" id="agent__file_8cpp_html_ae484bb989e54cf3db9f05b4c4f67d3c5"><div class="ttname"><a href="agent__file_8cpp.html#ae484bb989e54cf3db9f05b4c4f67d3c5">cbeat</a></div><div class="ttdeci">beatstruc cbeat</div><div class="ttdef"><b>Definition:</b> agent_file.cpp:92</div></div>
<div class="ttc" id="group__socketlib__constants_html_ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32"><div class="ttname"><a href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32">NetworkType::MULTICAST</a></div><div class="ttdoc">Agent socket using Multicast UDP. </div></div>
<div class="ttc" id="class_elapsed_time_html_ac75b9ada495d638999905483340e3534"><div class="ttname"><a href="class_elapsed_time.html#ac75b9ada495d638999905483340e3534">ElapsedTime::split</a></div><div class="ttdeci">double split()</div><div class="ttdoc">ElapsedTime::split, gets the current elapsed time since the start() </div><div class="ttdef"><b>Definition:</b> elapsedtime.cpp:234</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gabcd7ffc95114664fa6e33f032e99ea3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabcd7ffc95114664fa6e33f032e99ea3e">&#9670;&nbsp;</a></span>find_servers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt; <a class="el" href="structbeatstruc.html">beatstruc</a> &gt; Cosmos::Agent::find_servers </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>waitsec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate a list of request servers. </p>
<p>Listen to the local subnet for a set amount of time, collecting heartbeats. Return a list of heartbeats collected. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">waitsec</td><td>Maximum number of seconds to wait. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A vector of <a class="el" href="structbeatstruc.html">beatstruc</a> entries listing the unique servers found. </dd></dl>
<p>Loop for <a class="el" href="agent__transmitter2_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a> seconds, filling list with any discovered heartbeats. </p>
<div class="fragment"><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <a class="code" href="structbeatstruc.html">beatstruc</a> tbeat;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <a class="code" href="class_elapsed_time.html">ElapsedTime</a> ep;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        ep.<a class="code" href="class_elapsed_time.html#aac8472a6b2b676e4b824e4679d2be63a">start</a>();</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <span class="keywordflow">do</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> k=0; k&lt;<a class="code" href="class_cosmos_1_1_agent.html#a997299a3ce1040acef3dd9878835ea75">agent_list</a>.size(); ++k)</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            {</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                <span class="keywordtype">size_t</span> <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="class_cosmos_1_1_agent.html#af580fea19fe77c20cddfbaa5e0be3e98">slist</a>.size(); i++)</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                {</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                    <span class="keywordflow">if</span> (!strcmp(<a class="code" href="class_cosmos_1_1_agent.html#a997299a3ce1040acef3dd9878835ea75">agent_list</a>[k].<a class="code" href="agent__exec_8cpp.html#a90c46d7eb29ad8baa1281a134b56ab4c">node</a>,<a class="code" href="class_cosmos_1_1_agent.html#af580fea19fe77c20cddfbaa5e0be3e98">slist</a>[i].node) &amp;&amp; !strcmp(<a class="code" href="class_cosmos_1_1_agent.html#a997299a3ce1040acef3dd9878835ea75">agent_list</a>[k].proc,<a class="code" href="class_cosmos_1_1_agent.html#af580fea19fe77c20cddfbaa5e0be3e98">slist</a>[i].proc))</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                }</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                <span class="keywordflow">if</span> (i == <a class="code" href="class_cosmos_1_1_agent.html#af580fea19fe77c20cddfbaa5e0be3e98">slist</a>.size())</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#af580fea19fe77c20cddfbaa5e0be3e98">slist</a>.push_back(<a class="code" href="class_cosmos_1_1_agent.html#a997299a3ce1040acef3dd9878835ea75">agent_list</a>[k]);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j=i; j&lt;=<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>; j--)</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                    {</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#af580fea19fe77c20cddfbaa5e0be3e98">slist</a>[j].<a class="code" href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a> &gt; <a class="code" href="class_cosmos_1_1_agent.html#af580fea19fe77c20cddfbaa5e0be3e98">slist</a>[j-1].<a class="code" href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>)</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                        tbeat = <a class="code" href="class_cosmos_1_1_agent.html#af580fea19fe77c20cddfbaa5e0be3e98">slist</a>[j];</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                        <a class="code" href="class_cosmos_1_1_agent.html#af580fea19fe77c20cddfbaa5e0be3e98">slist</a>[j] = <a class="code" href="class_cosmos_1_1_agent.html#af580fea19fe77c20cddfbaa5e0be3e98">slist</a>[j-1];</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                        <a class="code" href="class_cosmos_1_1_agent.html#af580fea19fe77c20cddfbaa5e0be3e98">slist</a>[j-1] = tbeat;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                    }</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                }</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        } <span class="keywordflow">while</span> (ep.<a class="code" href="class_elapsed_time.html#ac75b9ada495d638999905483340e3534">split</a>() &lt;= <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">return</span>(<a class="code" href="class_cosmos_1_1_agent.html#af580fea19fe77c20cddfbaa5e0be3e98">slist</a>);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    }</div><div class="ttc" id="structbeatstruc_html"><div class="ttname"><a href="structbeatstruc.html">beatstruc</a></div><div class="ttdef"><b>Definition:</b> jsondef.h:854</div></div>
<div class="ttc" id="rw__test_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_af580fea19fe77c20cddfbaa5e0be3e98"><div class="ttname"><a href="class_cosmos_1_1_agent.html#af580fea19fe77c20cddfbaa5e0be3e98">Cosmos::Agent::slist</a></div><div class="ttdeci">vector&lt; beatstruc &gt; slist</div><div class="ttdef"><b>Definition:</b> agentclass.h:355</div></div>
<div class="ttc" id="class_elapsed_time_html_aac8472a6b2b676e4b824e4679d2be63a"><div class="ttname"><a href="class_elapsed_time.html#aac8472a6b2b676e4b824e4679d2be63a">ElapsedTime::start</a></div><div class="ttdeci">void start()</div><div class="ttdoc">ElapsedTime::start. </div><div class="ttdef"><b>Definition:</b> elapsedtime.cpp:203</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a997299a3ce1040acef3dd9878835ea75"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a997299a3ce1040acef3dd9878835ea75">Cosmos::Agent::agent_list</a></div><div class="ttdeci">vector&lt; beatstruc &gt; agent_list</div><div class="ttdoc">List of active agents. </div><div class="ttdef"><b>Definition:</b> agentclass.h:324</div></div>
<div class="ttc" id="agent__add__soh_8cpp_html_a2ad8d53c30be4a794997911a7277c438"><div class="ttname"><a href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a></div><div class="ttdeci">int waitsec</div><div class="ttdef"><b>Definition:</b> agent_add_soh.cpp:56</div></div>
<div class="ttc" id="agent__exec_8cpp_html_a90c46d7eb29ad8baa1281a134b56ab4c"><div class="ttname"><a href="agent__exec_8cpp.html#a90c46d7eb29ad8baa1281a134b56ab4c">node</a></div><div class="ttdeci">string node</div><div class="ttdef"><b>Definition:</b> agent_exec.cpp:131</div></div>
<div class="ttc" id="class_elapsed_time_html"><div class="ttname"><a href="class_elapsed_time.html">ElapsedTime</a></div><div class="ttdef"><b>Definition:</b> elapsedtime.h:62</div></div>
<div class="ttc" id="class_elapsed_time_html_ac75b9ada495d638999905483340e3534"><div class="ttname"><a href="class_elapsed_time.html#ac75b9ada495d638999905483340e3534">ElapsedTime::split</a></div><div class="ttdeci">double split()</div><div class="ttdoc">ElapsedTime::split, gets the current elapsed time since the start() </div><div class="ttdef"><b>Definition:</b> elapsedtime.cpp:234</div></div>
<div class="ttc" id="netperf__listen_8cpp_html_a8e0798404bf2cf5dabb84c5ba9a4f236"><div class="ttname"><a href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> netperf_listen.cpp:70</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga5c498fd14ffe4aa64c37375776da4743"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5c498fd14ffe4aa64c37375776da4743">&#9670;&nbsp;</a></span>set_sohstring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::set_sohstring </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set SOH string. </p>
<p>Set the SOH string to a JSON list of <a class="el" href="group__jsonlib__namespace.html">JSON Name Space</a> names. A proper JSON list will begin and end with matched curly braces, be comma separated, and have all strings in double quotes. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">list</td><td>Properly formatted list of JSON names. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, otherwise a negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    {</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="class_cosmos_1_1_agent.html#a4866c5570313307cf51d4b591f66a6c9">sohtable</a>.empty())</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        {</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            <a class="code" href="class_cosmos_1_1_agent.html#a4866c5570313307cf51d4b591f66a6c9">sohtable</a>.clear();</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        }</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <a class="code" href="group__jsonlib__functions.html#gab1c096c793dcca8f16ddd897fed1f953">json_table_of_list</a>(<a class="code" href="class_cosmos_1_1_agent.html#a4866c5570313307cf51d4b591f66a6c9">sohtable</a>, list, <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a4866c5570313307cf51d4b591f66a6c9"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a4866c5570313307cf51d4b591f66a6c9">Cosmos::Agent::sohtable</a></div><div class="ttdeci">vector&lt; jsonentry * &gt; sohtable</div><div class="ttdoc">State of Health element vector. </div><div class="ttdef"><b>Definition:</b> agentclass.h:141</div></div>
<div class="ttc" id="group__jsonlib__functions_html_gab1c096c793dcca8f16ddd897fed1f953"><div class="ttname"><a href="group__jsonlib__functions.html#gab1c096c793dcca8f16ddd897fed1f953">json_table_of_list</a></div><div class="ttdeci">int32_t json_table_of_list(vector&lt; jsonentry *&gt; &amp;table, string tokens, cosmosstruc *cinfo)</div><div class="ttdoc">Output a vector of JSON entries. </div><div class="ttdef"><b>Definition:</b> jsonlib.cpp:2725</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gae2c9ea84ca79cf0d2c104ec6a6d33dfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae2c9ea84ca79cf0d2c104ec6a6d33dfc">&#9670;&nbsp;</a></span>get_cosmosstruc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcosmosstruc.html">cosmosstruc</a> * Cosmos::Agent::get_cosmosstruc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return <a class="el" href="class_cosmos_1_1_agent.html">Agent</a> <a class="el" href="structcosmosstruc.html" title="JSON Name Space structure. ">cosmosstruc</a>. </p>
<p>Return a pointer to the <a class="el" href="class_cosmos_1_1_agent.html">Agent</a>'s internal copy of the <a class="el" href="structcosmosstruc.html" title="JSON Name Space structure. ">cosmosstruc</a>. </p><dl class="section return"><dt>Returns</dt><dd>A pointer to the <a class="el" href="structcosmosstruc.html" title="JSON Name Space structure. ">cosmosstruc</a>, otherwise NULL. </dd></dl>
<div class="fragment"><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    {</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>);</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gae6a8536dc23bce8abbd2c3c7f214f043"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae6a8536dc23bce8abbd2c3c7f214f043">&#9670;&nbsp;</a></span>heartbeat_loop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Cosmos::Agent::heartbeat_loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Heartbeat Loop. </p>
<p>This function is run as a thread to provide the Heartbeat for the <a class="el" href="class_cosmos_1_1_agent.html">Agent</a>. The Heartbeat will consist of the contents of Agent::AGENT_MESSAG::BEAT in <a class="el" href="group__agentclass__functions.html#ga3df5bd25d96922bd613cbd888cd765ea" title="Listen for message. ">Cosmos::Agent::poll</a>, plus the contents of the Cosmos::Agent::sohstring. It will come every <a class="el" href="structbeatstruc.html#a48a191217f803b673159bf3b09d468c8" title="Heartbeat period in seconds. ">beatstruc::bprd</a> seconds. </p>
<div class="fragment"><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    {</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <a class="code" href="class_elapsed_time.html">ElapsedTime</a> timer_beat;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].stateflag)</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        {</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            <span class="comment">// compute the jitter</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.jitter = timer_beat.<a class="code" href="class_elapsed_time.html#ac75b9ada495d638999905483340e3534">split</a>() - <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bprd;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            timer_beat.<a class="code" href="class_elapsed_time.html#aac8472a6b2b676e4b824e4679d2be63a">start</a>();</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            <span class="comment">// post comes first</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.utc = <a class="code" href="group__timelib__functions.html#ga39f0682a60fce7940363aad40ad4a244">currentmjd</a>(0.);</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4">Agent::State</a>)(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].stateflag) != <a class="code" href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4aa5daf7f2ebbba4975d61dab1c40188c7">Agent::State::IDLE</a> &amp;&amp; !<a class="code" href="class_cosmos_1_1_agent.html#a4866c5570313307cf51d4b591f66a6c9">sohtable</a>.empty())</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            {</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                <a class="code" href="group__agentclass__functions.html#ga1e156ba9e17f232c99927228f658742a">Agent::post</a>(<a class="code" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3a8561208d5a08fc79f48482d94a810724">Agent::AgentMessage::BEAT</a>, <a class="code" href="group__jsonlib__functions.html#gab5ebef7fa3630a4bfe2a39138b382e0f">json_of_table</a>(<a class="code" href="class_cosmos_1_1_agent.html#ab93d5efc1f5d6e8ee83abdac634a9b55">hbjstring</a>, <a class="code" href="class_cosmos_1_1_agent.html#a4866c5570313307cf51d4b591f66a6c9">sohtable</a>, (<a class="code" href="structcosmosstruc.html">cosmosstruc</a> *)<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>));</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            }</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            {</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                <a class="code" href="group__agentclass__functions.html#ga1e156ba9e17f232c99927228f658742a">Agent::post</a>(<a class="code" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3a8561208d5a08fc79f48482d94a810724">Agent::AgentMessage::BEAT</a>,<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            }</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            <span class="comment">// TODO: move the monitoring calculations to another thread with its own loop time that can be controlled</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            <span class="comment">// Compute other monitored quantities if monitoring</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].stateflag == static_cast &lt;uint16_t&gt;(<a class="code" href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4aff3e179b3cc64393841107ccba0d6e48">Agent::State::MONITOR</a>))</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            {</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                <span class="comment">// TODO: rename beat.cpu to beat.cpu_percent</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                <span class="comment">// add beat.cpu_load</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.cpu    = <a class="code" href="class_cosmos_1_1_agent.html#a44679156db62f7c849ba78545c441309">deviceCpu_</a>.<a class="code" href="class_device_cpu.html#a4dcb3520edababefc933c1c3ed3764ba">getPercentUseForCurrentProcess</a>();<span class="comment">//cpu.getLoad();</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.memory = <a class="code" href="class_cosmos_1_1_agent.html#a44679156db62f7c849ba78545c441309">deviceCpu_</a>.<a class="code" href="class_device_cpu.html#a5750d3b3f9027f77b38e590326e55d8c">getVirtualMemoryUsed</a>();</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            }</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].stateflag == static_cast &lt;uint16_t&gt;(<a class="code" href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4ab9984206799a7f9fe4bd1b6c18db8112">Agent::State::SHUTDOWN</a>))</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            {</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.cpu = 0;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.memory = 0;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            }</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bprd &lt; <a class="code" href="agentclass_8h.html#a405d7220cc92882ea36c541c489002ed">AGENT_HEARTBEAT_PERIOD_MIN</a>)</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bprd = <a class="code" href="agentclass_8h.html#a405d7220cc92882ea36c541c489002ed">AGENT_HEARTBEAT_PERIOD_MIN</a>;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            }</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            <span class="keywordflow">if</span> (timer_beat.<a class="code" href="class_elapsed_time.html#ac75b9ada495d638999905483340e3534">split</a>() &lt;= <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bprd)</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            {</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                COSMOS_SLEEP(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bprd - timer_beat.<a class="code" href="class_elapsed_time.html#ac75b9ada495d638999905483340e3534">split</a>());</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        }</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <a class="code" href="group__agentclass__functions.html#gaa27dffcf08893f097bcedbfaa94a3962">Agent::unpublish</a>();</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a0423e290995b3df322bd894a2b9701f4"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4">Cosmos::Agent::State</a></div><div class="ttdeci">State</div><div class="ttdef"><b>Definition:</b> agentclass.h:143</div></div>
<div class="ttc" id="group__agentclass__functions_html_gaa27dffcf08893f097bcedbfaa94a3962"><div class="ttname"><a href="group__agentclass__functions.html#gaa27dffcf08893f097bcedbfaa94a3962">Cosmos::Agent::unpublish</a></div><div class="ttdeci">int32_t unpublish()</div><div class="ttdoc">Close COSMOS output channel. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1865</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a0423e290995b3df322bd894a2b9701f4aa5daf7f2ebbba4975d61dab1c40188c7"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4aa5daf7f2ebbba4975d61dab1c40188c7">Cosmos::Agent::State::IDLE</a></div><div class="ttdoc">Do minimal necessary to run. </div></div>
<div class="ttc" id="class_device_cpu_html_a4dcb3520edababefc933c1c3ed3764ba"><div class="ttname"><a href="class_device_cpu.html#a4dcb3520edababefc933c1c3ed3764ba">DeviceCpu::getPercentUseForCurrentProcess</a></div><div class="ttdeci">double getPercentUseForCurrentProcess()</div><div class="ttdef"><b>Definition:</b> devicecpu.cpp:161</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a59e6f4e4d4501a12b65cb790a93471b3a8561208d5a08fc79f48482d94a810724"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3a8561208d5a08fc79f48482d94a810724">Cosmos::Agent::AgentMessage::BEAT</a></div><div class="ttdoc">Heartbeat Messages. </div></div>
<div class="ttc" id="class_elapsed_time_html_aac8472a6b2b676e4b824e4679d2be63a"><div class="ttname"><a href="class_elapsed_time.html#aac8472a6b2b676e4b824e4679d2be63a">ElapsedTime::start</a></div><div class="ttdeci">void start()</div><div class="ttdoc">ElapsedTime::start. </div><div class="ttdef"><b>Definition:</b> elapsedtime.cpp:203</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_ab93d5efc1f5d6e8ee83abdac634a9b55"><div class="ttname"><a href="class_cosmos_1_1_agent.html#ab93d5efc1f5d6e8ee83abdac634a9b55">Cosmos::Agent::hbjstring</a></div><div class="ttdeci">string hbjstring</div><div class="ttdef"><b>Definition:</b> agentclass.h:354</div></div>
<div class="ttc" id="group__jsonlib__functions_html_gab5ebef7fa3630a4bfe2a39138b382e0f"><div class="ttname"><a href="group__jsonlib__functions.html#gab5ebef7fa3630a4bfe2a39138b382e0f">json_of_table</a></div><div class="ttdeci">const char * json_of_table(string &amp;jstring, vector&lt; jsonentry *&gt; table, cosmosstruc *cinfo)</div><div class="ttdoc">Create JSON stream from entries. </div><div class="ttdef"><b>Definition:</b> jsonlib.cpp:8456</div></div>
<div class="ttc" id="class_elapsed_time_html"><div class="ttname"><a href="class_elapsed_time.html">ElapsedTime</a></div><div class="ttdef"><b>Definition:</b> elapsedtime.h:62</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga1e156ba9e17f232c99927228f658742a"><div class="ttname"><a href="group__agentclass__functions.html#ga1e156ba9e17f232c99927228f658742a">Cosmos::Agent::post</a></div><div class="ttdeci">int32_t post(messstruc mess)</div><div class="ttdoc">Post a Cosmos::Agent::messstruc. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1730</div></div>
<div class="ttc" id="group__timelib__functions_html_ga39f0682a60fce7940363aad40ad4a244"><div class="ttname"><a href="group__timelib__functions.html#ga39f0682a60fce7940363aad40ad4a244">currentmjd</a></div><div class="ttdeci">double currentmjd(double offset)</div><div class="ttdoc">Current UTC in Modified Julian Days. </div><div class="ttdef"><b>Definition:</b> timelib.cpp:65</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a44679156db62f7c849ba78545c441309"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a44679156db62f7c849ba78545c441309">Cosmos::Agent::deviceCpu_</a></div><div class="ttdeci">DeviceCpu deviceCpu_</div><div class="ttdef"><b>Definition:</b> agentclass.h:385</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a0423e290995b3df322bd894a2b9701f4aff3e179b3cc64393841107ccba0d6e48"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4aff3e179b3cc64393841107ccba0d6e48">Cosmos::Agent::State::MONITOR</a></div><div class="ttdoc">Run with monitoring. </div></div>
<div class="ttc" id="class_elapsed_time_html_ac75b9ada495d638999905483340e3534"><div class="ttname"><a href="class_elapsed_time.html#ac75b9ada495d638999905483340e3534">ElapsedTime::split</a></div><div class="ttdeci">double split()</div><div class="ttdoc">ElapsedTime::split, gets the current elapsed time since the start() </div><div class="ttdef"><b>Definition:</b> elapsedtime.cpp:234</div></div>
<div class="ttc" id="structcosmosstruc_html"><div class="ttname"><a href="structcosmosstruc.html">cosmosstruc</a></div><div class="ttdoc">JSON Name Space structure. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2030</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a4866c5570313307cf51d4b591f66a6c9"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a4866c5570313307cf51d4b591f66a6c9">Cosmos::Agent::sohtable</a></div><div class="ttdeci">vector&lt; jsonentry * &gt; sohtable</div><div class="ttdoc">State of Health element vector. </div><div class="ttdef"><b>Definition:</b> agentclass.h:141</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a0423e290995b3df322bd894a2b9701f4ab9984206799a7f9fe4bd1b6c18db8112"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4ab9984206799a7f9fe4bd1b6c18db8112">Cosmos::Agent::State::SHUTDOWN</a></div><div class="ttdoc">Shut down Agent. </div></div>
<div class="ttc" id="class_device_cpu_html_a5750d3b3f9027f77b38e590326e55d8c"><div class="ttname"><a href="class_device_cpu.html#a5750d3b3f9027f77b38e590326e55d8c">DeviceCpu::getVirtualMemoryUsed</a></div><div class="ttdeci">double getVirtualMemoryUsed()</div><div class="ttdef"><b>Definition:</b> devicecpu.cpp:80</div></div>
<div class="ttc" id="agentclass_8h_html_a405d7220cc92882ea36c541c489002ed"><div class="ttname"><a href="agentclass_8h.html#a405d7220cc92882ea36c541c489002ed">AGENT_HEARTBEAT_PERIOD_MIN</a></div><div class="ttdeci">#define AGENT_HEARTBEAT_PERIOD_MIN</div><div class="ttdoc">Default minium heartbeat period (10 msec) </div><div class="ttdef"><b>Definition:</b> agentclass.h:193</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga8722137ad27c4a53108639b3f261b086"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8722137ad27c4a53108639b3f261b086">&#9670;&nbsp;</a></span>request_loop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Cosmos::Agent::request_loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Request Loop. </p>
<p>This function is run as a thread to service requests to the <a class="el" href="class_cosmos_1_1_agent.html">Agent</a>. It receives requests on it assigned port number, matches the first word of the request against its set of requests, and then either performs the matched function, or returns [NOK]. </p>
<div class="fragment"><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    {</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="keywordtype">char</span> ebuffer[6]=<span class="stringliteral">&quot;[NOK]&quot;</span>;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        int32_t <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>, nbytes;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="keywordtype">char</span> *bufferin, *bufferout;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="keywordtype">char</span> request[<a class="code" href="group__jsonlib__constants.html#ga855b38da23dc26339aa8a5d726aab4a6">AGENTMAXBUFFER</a>+1];</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        uint32_t <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keywordflow">if</span> ((iretn = <a class="code" href="group__socketlib__functions.html#gabb124101a33109d7b58c6e831cc79e03">socket_open</a>(&amp;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].req, <a class="code" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9">NetworkType::UDP</a>, (<span class="keywordtype">char</span> *)<span class="stringliteral">&quot;&quot;</span>, <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.port, <a class="code" href="group__socketlib__constants.html#ga79ccaa6b292ff02f81a7144830bea4a2">SOCKET_LISTEN</a>, <a class="code" href="group__socketlib__constants.html#gac29168deb0d3412d231cca522ece72bb">SOCKET_BLOCKING</a>, 2000000)) &lt; 0)</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        {</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        }</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.port = <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].req.cport;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="keywordflow">if</span> ((bufferin=(<span class="keywordtype">char</span> *)<a class="code" href="zutil_8c.html#aebd5c667302d7b972ed849f359982306">calloc</a>(1,<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz)) == NULL)</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        {</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            iretn = -errno;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        }</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].stateflag)</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        {</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            iretn = recvfrom(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].req.cudp,bufferin,<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz,0,(<span class="keyword">struct</span> sockaddr *)&amp;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].req.caddr,(socklen_t *)&amp;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].req.addrlen);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            <span class="keywordflow">if</span> (iretn &gt; 0)</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            {</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                bufferin[<a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>] = 0;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].stateflag == static_cast &lt;uint16_t&gt;(<a class="code" href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4adc30ec20708ef7b0f641ef78b7880a15">Agent::State::DEBUG</a>))</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                {</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                    printf(<span class="stringliteral">&quot;Request: [%d] %s &quot;</span>,iretn,bufferin);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                }</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                fflush(stdout);</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a>; i++)</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                    <span class="keywordflow">if</span> (bufferin[i] == <span class="charliteral">&#39; &#39;</span> || bufferin[i] == 0)</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                    request[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>] = bufferin[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                }</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                request[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                <span class="keywordflow">for</span> (i=0; i&lt;<a class="code" href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">Agent::reqs</a>.size(); i++)</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                {</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                    <span class="keywordflow">if</span> (!strcmp(request,<a class="code" href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">Agent::reqs</a>[i].token.c_str()))</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                }</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                <span class="keywordflow">if</span> (i &lt; <a class="code" href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">Agent::reqs</a>.size())</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                {</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                    iretn = -1;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">reqs</a>[i].ifunction)</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                    {</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                        iretn = (this-&gt;*<a class="code" href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">Agent::reqs</a>[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].ifunction)(bufferin, request);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                    }</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                    {</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">reqs</a>[i].efunction != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                        {</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                            iretn = <a class="code" href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">reqs</a>[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].efunction(bufferin, request, <span class="keyword">this</span>);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                        }</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                    }</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                    <span class="keywordflow">if</span> (iretn &gt;= 0)</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                        bufferout = (<span class="keywordtype">char</span> *)&amp;request;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                        bufferout = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                }</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                {</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                    iretn = <a class="code" href="group__error__defines.html#ga22b3434fe3fb79abbf6f73209dea5578">AGENT_ERROR_NULL</a>;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                    bufferout = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                }</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                <span class="keywordflow">if</span> (bufferout == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                {</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                    bufferout = ebuffer;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                }</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                {</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                    strcat(bufferout,<span class="stringliteral">&quot;[OK]&quot;</span>);</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                    bufferout[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz+3] = 0;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                }</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                nbytes = sendto(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].req.cudp,bufferout,strlen(bufferout),0,(<span class="keyword">struct</span> sockaddr *)&amp;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].req.caddr,<span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in));</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].stateflag == static_cast &lt;uint16_t&gt;(<a class="code" href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4adc30ec20708ef7b0f641ef78b7880a15">Agent::State::DEBUG</a>))</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                {</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                    printf(<span class="stringliteral">&quot;[%d] %s\n&quot;</span>,nbytes,bufferout);</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                }</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            }</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        }</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        <a class="code" href="gzguts_8h.html#aafde19f7d36ca163a143579c1b125b6d">free</a>(bufferin);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="group__error__defines_html_ga22b3434fe3fb79abbf6f73209dea5578"><div class="ttname"><a href="group__error__defines.html#ga22b3434fe3fb79abbf6f73209dea5578">AGENT_ERROR_NULL</a></div><div class="ttdeci">#define AGENT_ERROR_NULL</div><div class="ttdef"><b>Definition:</b> cosmos-errno.h:111</div></div>
<div class="ttc" id="group__socketlib__constants_html_ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9"><div class="ttname"><a href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9">NetworkType::UDP</a></div><div class="ttdoc">Agent socket using Unicast UDP. </div></div>
<div class="ttc" id="rw__test_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="group__defs__storage_html_ga2005202dc256c47dd66042b748fc4dd5"><div class="ttname"><a href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a></div><div class="ttdeci">#define COSMOS_MAX_NAME</div><div class="ttdoc">Largest JSON name. </div><div class="ttdef"><b>Definition:</b> cosmos-defs.h:55</div></div>
<div class="ttc" id="rw__test_8cpp_html_afece067d35cd26a458c56fa8f276e734"><div class="ttname"><a href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a></div><div class="ttdeci">int iretn</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="gzguts_8h_html_aafde19f7d36ca163a143579c1b125b6d"><div class="ttname"><a href="gzguts_8h.html#aafde19f7d36ca163a143579c1b125b6d">free</a></div><div class="ttdeci">void free()</div></div>
<div class="ttc" id="group__socketlib__constants_html_gac29168deb0d3412d231cca522ece72bb"><div class="ttname"><a href="group__socketlib__constants.html#gac29168deb0d3412d231cca522ece72bb">SOCKET_BLOCKING</a></div><div class="ttdeci">#define SOCKET_BLOCKING</div><div class="ttdoc">Blocking Agent. </div><div class="ttdef"><b>Definition:</b> socketlib.h:78</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_ac4e0048f444a9381a475a91f455acad1"><div class="ttname"><a href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">Cosmos::Agent::reqs</a></div><div class="ttdeci">vector&lt; request_entry &gt; reqs</div><div class="ttdef"><b>Definition:</b> agentclass.h:378</div></div>
<div class="ttc" id="zutil_8c_html_aebd5c667302d7b972ed849f359982306"><div class="ttname"><a href="zutil_8c.html#aebd5c667302d7b972ed849f359982306">calloc</a></div><div class="ttdeci">voidp calloc()</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
<div class="ttc" id="group__socketlib__constants_html_ga79ccaa6b292ff02f81a7144830bea4a2"><div class="ttname"><a href="group__socketlib__constants.html#ga79ccaa6b292ff02f81a7144830bea4a2">SOCKET_LISTEN</a></div><div class="ttdeci">#define SOCKET_LISTEN</div><div class="ttdoc">Listen followed by optional talk (recvfrom INADDRANY) </div><div class="ttdef"><b>Definition:</b> socketlib.h:84</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a0423e290995b3df322bd894a2b9701f4adc30ec20708ef7b0f641ef78b7880a15"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4adc30ec20708ef7b0f641ef78b7880a15">Cosmos::Agent::State::DEBUG</a></div><div class="ttdoc">Agent in Debug State. </div></div>
<div class="ttc" id="group__jsonlib__constants_html_ga855b38da23dc26339aa8a5d726aab4a6"><div class="ttname"><a href="group__jsonlib__constants.html#ga855b38da23dc26339aa8a5d726aab4a6">AGENTMAXBUFFER</a></div><div class="ttdeci">#define AGENTMAXBUFFER</div><div class="ttdoc">Entire cosmosstruc. </div><div class="ttdef"><b>Definition:</b> jsondef.h:463</div></div>
<div class="ttc" id="group__socketlib__functions_html_gabb124101a33109d7b58c6e831cc79e03"><div class="ttname"><a href="group__socketlib__functions.html#gabb124101a33109d7b58c6e831cc79e03">socket_open</a></div><div class="ttdeci">int32_t socket_open(socket_channel *channel, NetworkType ntype, const char *address, uint16_t port, uint16_t role, bool blocking, uint32_t usectimeo, uint32_t rcvbuf, uint32_t sndbuf)</div><div class="ttdoc">Open UDP socket. </div><div class="ttdef"><b>Definition:</b> socketlib.cpp:51</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gae04b862b76dec1ff0fc347c1dd5e6022"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae04b862b76dec1ff0fc347c1dd5e6022">&#9670;&nbsp;</a></span>message_loop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Cosmos::Agent::message_loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        messstruc mess;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        int32_t <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="comment">// Initialize things</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a6da6dccc08763a09b8a2c7cac1891ad7">message_ring</a>.resize(<a class="code" href="agentclass_8h.html#a39a2518adb4f9f94292057738b3f653b">MESSAGE_RING_SIZE</a>);</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="group__agentclass__functions.html#ga59c00820cf975e432ee3edd54198b5ae">Agent::running</a>())</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        {</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            iretn = <a class="code" href="group__agentclass__functions.html#ga3df5bd25d96922bd613cbd888cd765ea">Agent::poll</a>(mess, <a class="code" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3a5fb1f955b45e38e31789286a1790398d">Agent::AgentMessage::ALL</a>, 0.);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;            <span class="keywordflow">if</span> (iretn &gt; 0)</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            {</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                <span class="keywordtype">bool</span> agent_found = <span class="keyword">false</span>;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="structbeatstruc.html">beatstruc</a> &amp;<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> : <a class="code" href="class_cosmos_1_1_agent.html#a997299a3ce1040acef3dd9878835ea75">agent_list</a>)</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                {</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                    <span class="keywordflow">if</span> (!strcmp(<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>.node, mess.meta.beat.node) &amp;&amp; !strcmp(<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>.proc, mess.meta.beat.proc))</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                    {</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                        agent_found = <span class="keyword">true</span>;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                        <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>.utc = mess.meta.beat.utc;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                    }</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                }</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                <span class="keywordflow">if</span> (!agent_found)</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                {</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                    <span class="comment">//                    bool node_found = false;</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                    <span class="comment">//                    for (jsonnode &amp;i : node_list)</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                    <span class="comment">//                    {</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                    <span class="comment">//                        if (!i.name.compare(mess.meta.beat.node))</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                    <span class="comment">//                        {</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                    <span class="comment">//                            node_found = true;</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                    <span class="comment">//                        }</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                    <span class="comment">//                    }</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                    <span class="comment">//                    if (!node_found)</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                    <span class="comment">//                    {</span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                    <span class="comment">//                        jsonnode jnode;</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                    <span class="comment">//                        if ((iretn=send_request_jsonnode(mess.meta.beat, jnode)) &gt;= 0)</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                    <span class="comment">//                        {</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                    <span class="comment">//                            node_list.push_back(jnode);</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                    <span class="comment">//                            node_found = true;</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                    <span class="comment">//                        }</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                    <span class="comment">//                    }</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                    <span class="comment">//                    if (node_found)</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                    <span class="comment">//                    {</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                    agent_list.push_back(mess.meta.beat);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                    <span class="comment">//                    }</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                }</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                <span class="keywordtype">size_t</span> new_position;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                new_position = <a class="code" href="class_cosmos_1_1_agent.html#aa65ca301cc0cf9e8335da1929475a779">message_head</a> + 1;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                <span class="keywordflow">if</span> (new_position &gt;= <a class="code" href="class_cosmos_1_1_agent.html#a6da6dccc08763a09b8a2c7cac1891ad7">message_ring</a>.size())</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                {</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                    new_position = 0;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                }</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                <a class="code" href="class_cosmos_1_1_agent.html#a6da6dccc08763a09b8a2c7cac1891ad7">message_ring</a>[new_position] = mess;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                <a class="code" href="class_cosmos_1_1_agent.html#aa65ca301cc0cf9e8335da1929475a779">message_head</a> = new_position;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            }</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            {</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                COSMOS_SLEEP(1);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            }</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        }</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a6da6dccc08763a09b8a2c7cac1891ad7"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a6da6dccc08763a09b8a2c7cac1891ad7">Cosmos::Agent::message_ring</a></div><div class="ttdeci">vector&lt; messstruc &gt; message_ring</div><div class="ttdoc">Ring buffer for incoming messages. </div><div class="ttdef"><b>Definition:</b> agentclass.h:329</div></div>
<div class="ttc" id="structbeatstruc_html"><div class="ttname"><a href="structbeatstruc.html">beatstruc</a></div><div class="ttdef"><b>Definition:</b> jsondef.h:854</div></div>
<div class="ttc" id="rw__test_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="rw__test_8cpp_html_afece067d35cd26a458c56fa8f276e734"><div class="ttname"><a href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a></div><div class="ttdeci">int iretn</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_aa65ca301cc0cf9e8335da1929475a779"><div class="ttname"><a href="class_cosmos_1_1_agent.html#aa65ca301cc0cf9e8335da1929475a779">Cosmos::Agent::message_head</a></div><div class="ttdeci">size_t message_head</div><div class="ttdoc">Last message placed in message ring buffer. </div><div class="ttdef"><b>Definition:</b> agentclass.h:331</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a997299a3ce1040acef3dd9878835ea75"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a997299a3ce1040acef3dd9878835ea75">Cosmos::Agent::agent_list</a></div><div class="ttdeci">vector&lt; beatstruc &gt; agent_list</div><div class="ttdoc">List of active agents. </div><div class="ttdef"><b>Definition:</b> agentclass.h:324</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga59c00820cf975e432ee3edd54198b5ae"><div class="ttname"><a href="group__agentclass__functions.html#ga59c00820cf975e432ee3edd54198b5ae">Cosmos::Agent::running</a></div><div class="ttdeci">uint16_t running()</div><div class="ttdoc">Check if we&amp;#39;re supposed to be running. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:392</div></div>
<div class="ttc" id="agentclass_8h_html_a39a2518adb4f9f94292057738b3f653b"><div class="ttname"><a href="agentclass_8h.html#a39a2518adb4f9f94292057738b3f653b">MESSAGE_RING_SIZE</a></div><div class="ttdeci">#define MESSAGE_RING_SIZE</div><div class="ttdoc">Default size of message ring buffer. </div><div class="ttdef"><b>Definition:</b> agentclass.h:196</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga3df5bd25d96922bd613cbd888cd765ea"><div class="ttname"><a href="group__agentclass__functions.html#ga3df5bd25d96922bd613cbd888cd765ea">Cosmos::Agent::poll</a></div><div class="ttdeci">int32_t poll(messstruc &amp;mess, AgentMessage type, float waitsec=1.)</div><div class="ttdoc">Listen for message. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1944</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a59e6f4e4d4501a12b65cb790a93471b3a5fb1f955b45e38e31789286a1790398d"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3a5fb1f955b45e38e31789286a1790398d">Cosmos::Agent::AgentMessage::ALL</a></div><div class="ttdoc">All Message types. </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaef0e1a80e74c3a987a9fdab354e8e0f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaef0e1a80e74c3a987a9fdab354e8e0f9">&#9670;&nbsp;</a></span>req_forward()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_forward </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Forward request. </p>
<p>Resends the received request, less count bytes, to all Publication channels of the <a class="el" href="class_cosmos_1_1_agent.html">Agent</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    {</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        uint16_t <a class="code" href="rw__test_8cpp.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        int32_t <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>=-1;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        sscanf(request,<span class="stringliteral">&quot;%*s %hu&quot;</span>,&amp;count);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        <span class="keywordflow">for</span> (uint16_t <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt; ++<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        {</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;            iretn = sendto(agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].cudp,(<span class="keyword">const</span> <span class="keywordtype">char</span> *)&amp;request[strlen(request)-count],count,0,(<span class="keyword">struct</span> sockaddr *)&amp;agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].baddr,<span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in));</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        }</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        sprintf(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>,<span class="stringliteral">&quot;%.17g %d &quot;</span>,<a class="code" href="group__timelib__functions.html#ga39f0682a60fce7940363aad40ad4a244">currentmjd</a>(0),iretn);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        <span class="keywordflow">return</span>(0);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="rw__test_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="rw__test_8cpp_html_ad43c3812e6d13e0518d9f8b8f463ffcf"><div class="ttname"><a href="rw__test_8cpp.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a></div><div class="ttdeci">int count</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:36</div></div>
<div class="ttc" id="rw__test_8cpp_html_afece067d35cd26a458c56fa8f276e734"><div class="ttname"><a href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a></div><div class="ttdeci">int iretn</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="group__timelib__functions_html_ga39f0682a60fce7940363aad40ad4a244"><div class="ttname"><a href="group__timelib__functions.html#ga39f0682a60fce7940363aad40ad4a244">currentmjd</a></div><div class="ttdeci">double currentmjd(double offset)</div><div class="ttdoc">Current UTC in Modified Julian Days. </div><div class="ttdef"><b>Definition:</b> timelib.cpp:65</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga4f3c2e6e8162321e91379e1703ff79c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4f3c2e6e8162321e91379e1703ff79c5">&#9670;&nbsp;</a></span>req_echo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_echo </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Echo request. </p>
<p>Returns the received packet, reaclculating the CRC, and adding the time. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of echo packet. </td></tr>
    <tr><td class="paramname">output</td><td>Text of echoed packet. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    {</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        <span class="keywordtype">double</span> <a class="code" href="udp__send_8cpp.html#ae2d93652b653a9f6c130719fe7693d66">mjd</a>;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        uint16_t <a class="code" href="png_8c.html#abe3a3dd2f471e670e252fcc0835d57c0">crc</a>, <a class="code" href="rw__test_8cpp.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        sscanf(request,<span class="stringliteral">&quot;%*s %lf %hx %hu&quot;</span>,&amp;mjd,&amp;crc,&amp;count);</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        sprintf(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>,<span class="stringliteral">&quot;%.17g %x %u &quot;</span>,<a class="code" href="group__timelib__functions.html#ga39f0682a60fce7940363aad40ad4a244">currentmjd</a>(0),<a class="code" href="group__sliplib__functions.html#gaca2c57b4719f3418164fa7cfa49a402f">slip_calc_crc</a>((uint8_t *)&amp;request[strlen(request)-count],count),count);</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        strncpy(&amp;<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[strlen(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>)],&amp;request[strlen(request)-count],count+1);</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <span class="keywordflow">return</span>(0);</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    }</div><div class="ttc" id="rw__test_8cpp_html_ad43c3812e6d13e0518d9f8b8f463ffcf"><div class="ttname"><a href="rw__test_8cpp.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a></div><div class="ttdeci">int count</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:36</div></div>
<div class="ttc" id="png_8c_html_abe3a3dd2f471e670e252fcc0835d57c0"><div class="ttname"><a href="png_8c.html#abe3a3dd2f471e670e252fcc0835d57c0">crc</a></div><div class="ttdeci">png_uint_32 crc</div><div class="ttdef"><b>Definition:</b> png.c:2173</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="udp__send_8cpp_html_ae2d93652b653a9f6c130719fe7693d66"><div class="ttname"><a href="udp__send_8cpp.html#ae2d93652b653a9f6c130719fe7693d66">mjd</a></div><div class="ttdeci">double mjd</div><div class="ttdef"><b>Definition:</b> udp_send.cpp:41</div></div>
<div class="ttc" id="group__sliplib__functions_html_gaca2c57b4719f3418164fa7cfa49a402f"><div class="ttname"><a href="group__sliplib__functions.html#gaca2c57b4719f3418164fa7cfa49a402f">slip_calc_crc</a></div><div class="ttdeci">uint16_t slip_calc_crc(uint8_t *buf, uint16_t size)</div><div class="ttdoc">Calculate CRC-16-CCITT. </div><div class="ttdef"><b>Definition:</b> sliplib.cpp:313</div></div>
<div class="ttc" id="group__timelib__functions_html_ga39f0682a60fce7940363aad40ad4a244"><div class="ttname"><a href="group__timelib__functions.html#ga39f0682a60fce7940363aad40ad4a244">currentmjd</a></div><div class="ttdeci">double currentmjd(double offset)</div><div class="ttdoc">Current UTC in Modified Julian Days. </div><div class="ttdef"><b>Definition:</b> timelib.cpp:65</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaf63b8c1d676c0734dbed0d67d7e3d3ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf63b8c1d676c0734dbed0d67d7e3d3ff">&#9670;&nbsp;</a></span>req_help()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_help </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Help request. </p>
<p>Send help response. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    {</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <span class="keywordtype">string</span> help_string;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        help_string += <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <span class="keywordflow">for</span>(uint32_t <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">reqs</a>.size(); ++<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        {</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            help_string += <span class="stringliteral">&quot;        &quot;</span>;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            help_string += agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">reqs</a>[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].token;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            help_string += <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            help_string += agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">reqs</a>[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].synopsis;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            help_string += <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            <span class="comment">//size_t blanks = (20 - (signed int)strlen(agent-&gt;reqs[i].token)) &gt; 0 ? 20 - strlen(agent-&gt;reqs[i].token) : 4;</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;            <span class="comment">//string blank(blanks,&#39; &#39;);</span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;            <span class="comment">//help_string += blank;</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            help_string += <span class="stringliteral">&quot;                &quot;</span>;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            help_string += agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">reqs</a>[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].description;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            help_string += <span class="stringliteral">&quot;\n\n&quot;</span>;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        }</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        help_string += <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        strcpy(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>, (<span class="keywordtype">char</span>*)help_string.c_str());</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    }</div><div class="ttc" id="rw__test_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_ac4e0048f444a9381a475a91f455acad1"><div class="ttname"><a href="class_cosmos_1_1_agent.html#ac4e0048f444a9381a475a91f455acad1">Cosmos::Agent::reqs</a></div><div class="ttdeci">vector&lt; request_entry &gt; reqs</div><div class="ttdef"><b>Definition:</b> agentclass.h:378</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gad4cffb2c8ebf9635c0496de9ea647f21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad4cffb2c8ebf9635c0496de9ea647f21">&#9670;&nbsp;</a></span>req_run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_run </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Set state to Run request. </p>
<p>Resends the received request, less count bytes, to all Publication channels of the <a class="el" href="class_cosmos_1_1_agent.html">Agent</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    {</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].stateflag = static_cast &lt;uint16_t&gt;(<a class="code" href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4a855520d2a5b0b1a64b939e7e30889e2a">Agent::State::RUN</a>);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[0] = 0;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <span class="keywordflow">return</span>(0);</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a0423e290995b3df322bd894a2b9701f4a855520d2a5b0b1a64b939e7e30889e2a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4a855520d2a5b0b1a64b939e7e30889e2a">Cosmos::Agent::State::RUN</a></div><div class="ttdoc">Run without monitoring. </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gade8cb836df40b0909eef7391a681be67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gade8cb836df40b0909eef7391a681be67">&#9670;&nbsp;</a></span>req_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_init </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Set state to Init request. </p>
<p>Resends the received request, less count bytes, to all Publication channels of the <a class="el" href="class_cosmos_1_1_agent.html">Agent</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    {</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].stateflag = static_cast &lt;uint16_t&gt;(<a class="code" href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4afaee4ca3c30ee18148ce3ada37466498">Agent::State::INIT</a>);</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[0] = 0;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <span class="keywordflow">return</span>(0);</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a0423e290995b3df322bd894a2b9701f4afaee4ca3c30ee18148ce3ada37466498"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4afaee4ca3c30ee18148ce3ada37466498">Cosmos::Agent::State::INIT</a></div><div class="ttdoc">Agent Initializing. </div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga52fe6103651cf3cf8d17a943f3e32951"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga52fe6103651cf3cf8d17a943f3e32951">&#9670;&nbsp;</a></span>req_idle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_idle </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Set state to Idle request. </p>
<p>Resends the received request, less count bytes, to all Publication channels of the <a class="el" href="class_cosmos_1_1_agent.html">Agent</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    {</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].stateflag = static_cast &lt;uint16_t&gt;(<a class="code" href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4aa5daf7f2ebbba4975d61dab1c40188c7">Agent::State::IDLE</a>);</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[0] = 0;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        <span class="keywordflow">return</span>(0);</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a0423e290995b3df322bd894a2b9701f4aa5daf7f2ebbba4975d61dab1c40188c7"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4aa5daf7f2ebbba4975d61dab1c40188c7">Cosmos::Agent::State::IDLE</a></div><div class="ttdoc">Do minimal necessary to run. </div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gab62ec8abf3ce91ae47a7518fd6776efe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab62ec8abf3ce91ae47a7518fd6776efe">&#9670;&nbsp;</a></span>req_monitor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_monitor </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Set state to Idle request. </p>
<p>Resends the received request, less count bytes, to all Publication channels of the <a class="el" href="class_cosmos_1_1_agent.html">Agent</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    {</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].stateflag = static_cast &lt;uint16_t&gt;(<a class="code" href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4aff3e179b3cc64393841107ccba0d6e48">Agent::State::MONITOR</a>);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[0] = 0;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <span class="keywordflow">return</span>(0);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a0423e290995b3df322bd894a2b9701f4aff3e179b3cc64393841107ccba0d6e48"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4aff3e179b3cc64393841107ccba0d6e48">Cosmos::Agent::State::MONITOR</a></div><div class="ttdoc">Run with monitoring. </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga8335f377fd81f2cc46444a120e3d9cf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8335f377fd81f2cc46444a120e3d9cf6">&#9670;&nbsp;</a></span>req_shutdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_shutdown </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Set state to Shutdown request. </p>
<p>Resends the received request, less count bytes, to all Publication channels of the <a class="el" href="class_cosmos_1_1_agent.html">Agent</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    {</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].stateflag = static_cast &lt;uint16_t&gt;(<a class="code" href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4ab9984206799a7f9fe4bd1b6c18db8112">Agent::State::SHUTDOWN</a>);</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[0] = 0;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <span class="keywordflow">return</span>(0);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a0423e290995b3df322bd894a2b9701f4ab9984206799a7f9fe4bd1b6c18db8112"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a0423e290995b3df322bd894a2b9701f4ab9984206799a7f9fe4bd1b6c18db8112">Cosmos::Agent::State::SHUTDOWN</a></div><div class="ttdoc">Shut down Agent. </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2243a22014f702aeb776ddafc75f1785"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2243a22014f702aeb776ddafc75f1785">&#9670;&nbsp;</a></span>req_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_status </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Status request. </p>
<p>Returns agent status. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    {</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        <span class="keywordtype">string</span> jstring;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__jsonlib__functions.html#gafce696fadbb5442e753f88ee489553b8">json_of_agent</a>(jstring, agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>) != NULL)</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        {</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            strncpy(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>, jstring.c_str(),agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz);</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1] = 0;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        }</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        {</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;            strcpy(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>,<span class="stringliteral">&quot;error&quot;</span>);</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[5] = 0;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;            <span class="keywordflow">return</span>(<a class="code" href="group__error__defines.html#gadfe08d002d8499d8b20909949ceb1b08">JSON_ERROR_SCAN</a>);</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        }</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="group__jsonlib__functions_html_gafce696fadbb5442e753f88ee489553b8"><div class="ttname"><a href="group__jsonlib__functions.html#gafce696fadbb5442e753f88ee489553b8">json_of_agent</a></div><div class="ttdeci">const char * json_of_agent(string &amp;jstring, cosmosstruc *cinfo)</div><div class="ttdoc">Create JSON Agent string. </div><div class="ttdef"><b>Definition:</b> jsonlib.cpp:8631</div></div>
<div class="ttc" id="group__error__defines_html_gadfe08d002d8499d8b20909949ceb1b08"><div class="ttname"><a href="group__error__defines.html#gadfe08d002d8499d8b20909949ceb1b08">JSON_ERROR_SCAN</a></div><div class="ttdeci">#define JSON_ERROR_SCAN</div><div class="ttdef"><b>Definition:</b> cosmos-errno.h:96</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga62c62a98ae54a2d7522cccfc5cd0872c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga62c62a98ae54a2d7522cccfc5cd0872c">&#9670;&nbsp;</a></span>req_getvalue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_getvalue </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Get Internal Value request. </p>
<p>Returns the current value of the requested Name Space values. Names are expressed as a JSON object. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    {</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <span class="keywordtype">string</span> jstring;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__jsonlib__functions.html#gae2d5f112bf3dde3e4023f82f836c7434">json_of_list</a>(jstring, request, agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>) != NULL)</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        {</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;            strncpy(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>, jstring.c_str(), agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;            <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1] = 0;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        }</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;            <span class="keywordflow">return</span> (<a class="code" href="group__error__defines.html#ga7313f1246a286dd44ae6b088c8b629c5">JSON_ERROR_EOS</a>);</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="group__error__defines_html_ga7313f1246a286dd44ae6b088c8b629c5"><div class="ttname"><a href="group__error__defines.html#ga7313f1246a286dd44ae6b088c8b629c5">JSON_ERROR_EOS</a></div><div class="ttdeci">#define JSON_ERROR_EOS</div><div class="ttdef"><b>Definition:</b> cosmos-errno.h:95</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="group__jsonlib__functions_html_gae2d5f112bf3dde3e4023f82f836c7434"><div class="ttname"><a href="group__jsonlib__functions.html#gae2d5f112bf3dde3e4023f82f836c7434">json_of_list</a></div><div class="ttdeci">const char * json_of_list(string &amp;jstring, string list, cosmosstruc *cinfo)</div><div class="ttdoc">Create JSON stream from list. </div><div class="ttdef"><b>Definition:</b> jsonlib.cpp:8436</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga622a8be9a9d9bad9cbd779ed1484fb20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga622a8be9a9d9bad9cbd779ed1484fb20">&#9670;&nbsp;</a></span>req_setvalue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_setvalue </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Set Internal Value request. </p>
<p>Sets the current value of the requested Name Space values. Names and values are expressed as a JSON object. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    {</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        int32_t <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        iretn = <a class="code" href="group__jsonlib__functions.html#ga45544ce7c865bc6b648fe74f165260da">json_parse</a>(request, agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>);</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        sprintf(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>,<span class="stringliteral">&quot;%d&quot;</span>,iretn);</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        <span class="keywordflow">return</span>(iretn);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="group__jsonlib__functions_html_ga45544ce7c865bc6b648fe74f165260da"><div class="ttname"><a href="group__jsonlib__functions.html#ga45544ce7c865bc6b648fe74f165260da">json_parse</a></div><div class="ttdeci">int32_t json_parse(string jstring, cosmosstruc *cinfo)</div><div class="ttdoc">Parse JSON using Name Space. </div><div class="ttdef"><b>Definition:</b> jsonlib.cpp:4569</div></div>
<div class="ttc" id="rw__test_8cpp_html_afece067d35cd26a458c56fa8f276e734"><div class="ttname"><a href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a></div><div class="ttdeci">int iretn</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gab3d95206d1390f92e148c2dddd7215a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab3d95206d1390f92e148c2dddd7215a1">&#9670;&nbsp;</a></span>req_listnames()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_listnames </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in List Name Space Names request. </p>
<p>Returns a list of all names in the JSON Name Space. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    {</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <span class="keywordtype">string</span> result = <a class="code" href="group__jsonlib__functions.html#ga14a6d2557d34812e025f99a295236516">json_list_of_all</a>(agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>);</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        strncpy(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>, result.c_str(), agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz);</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1] = 0;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
<div class="ttc" id="group__jsonlib__functions_html_ga14a6d2557d34812e025f99a295236516"><div class="ttname"><a href="group__jsonlib__functions.html#ga14a6d2557d34812e025f99a295236516">json_list_of_all</a></div><div class="ttdeci">string json_list_of_all(cosmosstruc *cinfo)</div><div class="ttdoc">Get list of all Namespace names. </div><div class="ttdef"><b>Definition:</b> jsonlib.cpp:8912</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga6db24da96b512a97d6c69c39798f8148"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6db24da96b512a97d6c69c39798f8148">&#9670;&nbsp;</a></span>req_nodejson()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_nodejson </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Return Node JSON request. </p>
<p>Returns a JSON string representing the Node description. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    {</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        strncpy(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>, agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#a1f583980af445baa6273d5562df5dfe5">node</a>.c_str(), agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#a1f583980af445baa6273d5562df5dfe5">node</a>.size()&lt;agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1?agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#a1f583980af445baa6273d5562df5dfe5">node</a>.size():agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1);</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1] = 0;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="structjsonnode_html_a1f583980af445baa6273d5562df5dfe5"><div class="ttname"><a href="structjsonnode.html#a1f583980af445baa6273d5562df5dfe5">jsonnode::node</a></div><div class="ttdeci">string node</div><div class="ttdef"><b>Definition:</b> jsondef.h:737</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="structcosmosstruc_html_a44561cedf3be08821fb5cb466f997a71"><div class="ttname"><a href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">cosmosstruc::json</a></div><div class="ttdeci">jsonnode json</div><div class="ttdoc">JSON descriptive information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2081</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga69bcf7a5e951f583b34eec2ce1c88450"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga69bcf7a5e951f583b34eec2ce1c88450">&#9670;&nbsp;</a></span>req_statejson()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_statejson </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Return State Vector JSON request. </p>
<p>Returns a JSON string representing the State Vector. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    {</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        strncpy(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>, agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#aac9a8cf214d01ed8e623e4b086e9218e">state</a>.c_str(), agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#aac9a8cf214d01ed8e623e4b086e9218e">state</a>.size()&lt;agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1?agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#aac9a8cf214d01ed8e623e4b086e9218e">state</a>.size():agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1);</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1] = 0;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="structcosmosstruc_html_a44561cedf3be08821fb5cb466f997a71"><div class="ttname"><a href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">cosmosstruc::json</a></div><div class="ttdeci">jsonnode json</div><div class="ttdoc">JSON descriptive information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2081</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
<div class="ttc" id="structjsonnode_html_aac9a8cf214d01ed8e623e4b086e9218e"><div class="ttname"><a href="structjsonnode.html#aac9a8cf214d01ed8e623e4b086e9218e">jsonnode::state</a></div><div class="ttdeci">string state</div><div class="ttdef"><b>Definition:</b> jsondef.h:738</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga31960e94fea85f7244e207b9bb61db95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga31960e94fea85f7244e207b9bb61db95">&#9670;&nbsp;</a></span>req_utcstartjson()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_utcstartjson </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Return UTC Start Time JSON request. </p>
<p>Returns a JSON string representing the UTC Start Time. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    {</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        strncpy(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>, agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#afbc5509e60793ed7d867d26985f06088">utcstart</a>.c_str(), agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#afbc5509e60793ed7d867d26985f06088">utcstart</a>.size()&lt;agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1?agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#afbc5509e60793ed7d867d26985f06088">utcstart</a>.size():agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1);</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1] = 0;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="structjsonnode_html_afbc5509e60793ed7d867d26985f06088"><div class="ttname"><a href="structjsonnode.html#afbc5509e60793ed7d867d26985f06088">jsonnode::utcstart</a></div><div class="ttdeci">string utcstart</div><div class="ttdef"><b>Definition:</b> jsondef.h:739</div></div>
<div class="ttc" id="structcosmosstruc_html_a44561cedf3be08821fb5cb466f997a71"><div class="ttname"><a href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">cosmosstruc::json</a></div><div class="ttdeci">jsonnode json</div><div class="ttdoc">JSON descriptive information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2081</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gabf7622188a887ecf43541d6f73d0ba60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabf7622188a887ecf43541d6f73d0ba60">&#9670;&nbsp;</a></span>req_piecesjson()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_piecesjson </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Return Pieces JSON request. </p>
<p>Returns a JSON string representing the Piece information. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    {</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        strncpy(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>, agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#ac28228a28705ed06a6715f06ec1177a7">pieces</a>.c_str(), agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#ac28228a28705ed06a6715f06ec1177a7">pieces</a>.size()&lt;agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1?agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#ac28228a28705ed06a6715f06ec1177a7">pieces</a>.size():agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1);</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1] = 0;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="structjsonnode_html_ac28228a28705ed06a6715f06ec1177a7"><div class="ttname"><a href="structjsonnode.html#ac28228a28705ed06a6715f06ec1177a7">jsonnode::pieces</a></div><div class="ttdeci">string pieces</div><div class="ttdef"><b>Definition:</b> jsondef.h:742</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="structcosmosstruc_html_a44561cedf3be08821fb5cb466f997a71"><div class="ttname"><a href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">cosmosstruc::json</a></div><div class="ttdeci">jsonnode json</div><div class="ttdoc">JSON descriptive information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2081</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga0020ac71638c1b52d03690b0aa0b2bb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0020ac71638c1b52d03690b0aa0b2bb4">&#9670;&nbsp;</a></span>req_facesjson()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_facesjson </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Return Face JSON request. </p>
<p>Returns a JSON string representing the Face information. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    {</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        strncpy(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>, agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#a1be37f409f8fe558de85e1a6c24e6fbc">faces</a>.c_str(), agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#a1be37f409f8fe558de85e1a6c24e6fbc">faces</a>.size()&lt;agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1?agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#a1be37f409f8fe558de85e1a6c24e6fbc">faces</a>.size():agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1);</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1] = 0;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="structjsonnode_html_a1be37f409f8fe558de85e1a6c24e6fbc"><div class="ttname"><a href="structjsonnode.html#a1be37f409f8fe558de85e1a6c24e6fbc">jsonnode::faces</a></div><div class="ttdeci">string faces</div><div class="ttdef"><b>Definition:</b> jsondef.h:741</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="structcosmosstruc_html_a44561cedf3be08821fb5cb466f997a71"><div class="ttname"><a href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">cosmosstruc::json</a></div><div class="ttdeci">jsonnode json</div><div class="ttdoc">JSON descriptive information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2081</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa6fddd4e5873c894f25ab0cf553057e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa6fddd4e5873c894f25ab0cf553057e5">&#9670;&nbsp;</a></span>req_vertexsjson()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_vertexsjson </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Return Vertex JSON request. </p>
<p>Returns a JSON string representing the Vertex information. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    {</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        strncpy(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>, agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#afd9a5f08b3c60a1b81c4ce30a0cfea94">vertexs</a>.c_str(), agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#afd9a5f08b3c60a1b81c4ce30a0cfea94">vertexs</a>.size()&lt;agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1?agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#afd9a5f08b3c60a1b81c4ce30a0cfea94">vertexs</a>.size():agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1);</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1] = 0;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="structcosmosstruc_html_a44561cedf3be08821fb5cb466f997a71"><div class="ttname"><a href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">cosmosstruc::json</a></div><div class="ttdeci">jsonnode json</div><div class="ttdoc">JSON descriptive information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2081</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
<div class="ttc" id="structjsonnode_html_afd9a5f08b3c60a1b81c4ce30a0cfea94"><div class="ttname"><a href="structjsonnode.html#afd9a5f08b3c60a1b81c4ce30a0cfea94">jsonnode::vertexs</a></div><div class="ttdeci">string vertexs</div><div class="ttdef"><b>Definition:</b> jsondef.h:740</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga76e19fa0aa103a92a61f633a05cca273"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga76e19fa0aa103a92a61f633a05cca273">&#9670;&nbsp;</a></span>req_devgenjson()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_devgenjson </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Return devgen JSON request. </p>
<p>Returns a JSON string representing the generic device information. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    {</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        strncpy(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>, agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#aafae2837b974ad56b8f34d22a72de5dc">devgen</a>.c_str(), agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#aafae2837b974ad56b8f34d22a72de5dc">devgen</a>.size()&lt;agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1?agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#aafae2837b974ad56b8f34d22a72de5dc">devgen</a>.size():agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1);</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1] = 0;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="structcosmosstruc_html_a44561cedf3be08821fb5cb466f997a71"><div class="ttname"><a href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">cosmosstruc::json</a></div><div class="ttdeci">jsonnode json</div><div class="ttdoc">JSON descriptive information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2081</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
<div class="ttc" id="structjsonnode_html_aafae2837b974ad56b8f34d22a72de5dc"><div class="ttname"><a href="structjsonnode.html#aafae2837b974ad56b8f34d22a72de5dc">jsonnode::devgen</a></div><div class="ttdeci">string devgen</div><div class="ttdef"><b>Definition:</b> jsondef.h:743</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gacaf51c84a2e25d74481816a768ced7fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacaf51c84a2e25d74481816a768ced7fa">&#9670;&nbsp;</a></span>req_devspecjson()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_devspecjson </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Return devspec JSON request. </p>
<p>Returns a JSON string representing the special device information. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    {</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        strncpy(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>, agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#a7a1846f311014316a6711630f3379d6a">devspec</a>.c_str(), agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#a7a1846f311014316a6711630f3379d6a">devspec</a>.size()&lt;agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1?agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#a7a1846f311014316a6711630f3379d6a">devspec</a>.size():agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1);</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1] = 0;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="structjsonnode_html_a7a1846f311014316a6711630f3379d6a"><div class="ttname"><a href="structjsonnode.html#a7a1846f311014316a6711630f3379d6a">jsonnode::devspec</a></div><div class="ttdeci">string devspec</div><div class="ttdef"><b>Definition:</b> jsondef.h:744</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="structcosmosstruc_html_a44561cedf3be08821fb5cb466f997a71"><div class="ttname"><a href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">cosmosstruc::json</a></div><div class="ttdeci">jsonnode json</div><div class="ttdoc">JSON descriptive information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2081</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga0df8199c96c5a3ad03a884375fcb09c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0df8199c96c5a3ad03a884375fcb09c1">&#9670;&nbsp;</a></span>req_portsjson()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_portsjson </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Return Ports JSON request. </p>
<p>Returns a JSON string representing the Port information. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    {</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        strncpy(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>, agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#a217e2df7876f5684afbc4ba06730d57e">ports</a>.c_str(), agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#a217e2df7876f5684afbc4ba06730d57e">ports</a>.size()&lt;agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1?agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#a217e2df7876f5684afbc4ba06730d57e">ports</a>.size():agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1);</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1] = 0;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="structcosmosstruc_html_a44561cedf3be08821fb5cb466f997a71"><div class="ttname"><a href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">cosmosstruc::json</a></div><div class="ttdeci">jsonnode json</div><div class="ttdoc">JSON descriptive information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2081</div></div>
<div class="ttc" id="structjsonnode_html_a217e2df7876f5684afbc4ba06730d57e"><div class="ttname"><a href="structjsonnode.html#a217e2df7876f5684afbc4ba06730d57e">jsonnode::ports</a></div><div class="ttdeci">string ports</div><div class="ttdef"><b>Definition:</b> jsondef.h:745</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga14efc5e88eeab6582c310eadc615ebc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga14efc5e88eeab6582c310eadc615ebc4">&#9670;&nbsp;</a></span>req_targetsjson()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_targetsjson </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Return Target JSON request. </p>
<p>Returns a JSON string representing the Target information. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    {</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        strncpy(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>, agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#adf5681f8ea5871e9af1f16bcefc8270a">targets</a>.c_str(), agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#adf5681f8ea5871e9af1f16bcefc8270a">targets</a>.size()&lt;agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1?agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#adf5681f8ea5871e9af1f16bcefc8270a">targets</a>.size():agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1);</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1] = 0;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="structjsonnode_html_adf5681f8ea5871e9af1f16bcefc8270a"><div class="ttname"><a href="structjsonnode.html#adf5681f8ea5871e9af1f16bcefc8270a">jsonnode::targets</a></div><div class="ttdeci">string targets</div><div class="ttdef"><b>Definition:</b> jsondef.h:746</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="structcosmosstruc_html_a44561cedf3be08821fb5cb466f997a71"><div class="ttname"><a href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">cosmosstruc::json</a></div><div class="ttdeci">jsonnode json</div><div class="ttdoc">JSON descriptive information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2081</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga922dedb6c0cef06fd6febed2c867ea88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga922dedb6c0cef06fd6febed2c867ea88">&#9670;&nbsp;</a></span>req_aliasesjson()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::req_aliasesjson </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Built-in Return Alias JSON request. </p>
<p>Returns a JSON string representing the alias information. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Text of request. </td></tr>
    <tr><td class="paramname">output</td><td>Text of response to request. </td></tr>
    <tr><td class="paramname">agent</td><td>Pointer to <a class="el" href="class_cosmos_1_1_agent.html">Cosmos::Agent</a> to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, or negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    {</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        strncpy(<a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>, agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#ae8d9c447874b30f158fe75b8c82c3d0e">aliases</a>.c_str(), agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#ae8d9c447874b30f158fe75b8c82c3d0e">aliases</a>.size()&lt;agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1?agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">json</a>.<a class="code" href="structjsonnode.html#ae8d9c447874b30f158fe75b8c82c3d0e">aliases</a>.size():agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1);</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        <a class="code" href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a>[agent-&gt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz-1] = 0;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="structjsonnode_html_ae8d9c447874b30f158fe75b8c82c3d0e"><div class="ttname"><a href="structjsonnode.html#ae8d9c447874b30f158fe75b8c82c3d0e">jsonnode::aliases</a></div><div class="ttdeci">string aliases</div><div class="ttdef"><b>Definition:</b> jsondef.h:747</div></div>
<div class="ttc" id="agent_8cpp_html_a69da28b7f372dd6b6fffa28d0214e4de"><div class="ttname"><a href="agent_8cpp.html#a69da28b7f372dd6b6fffa28d0214e4de">output</a></div><div class="ttdeci">std::string output</div><div class="ttdef"><b>Definition:</b> agent.cpp:69</div></div>
<div class="ttc" id="structcosmosstruc_html_a44561cedf3be08821fb5cb466f997a71"><div class="ttname"><a href="structcosmosstruc.html#a44561cedf3be08821fb5cb466f997a71">cosmosstruc::json</a></div><div class="ttdeci">jsonnode json</div><div class="ttdoc">JSON descriptive information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2081</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaffbdfeaef9fa32bb4e17bf62070d7fdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaffbdfeaef9fa32bb4e17bf62070d7fdc">&#9670;&nbsp;</a></span>publish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::publish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__socketlib__constants.html#gac3df430da2e0e847835025092b9dfdcf">NetworkType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open COSMOS output channel. </p>
<p>Establish a multicast socket for publishing COSMOS messages using the specified address and port. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>One of <a class="el" href="group__socketlib__constants.html#gac3df430da2e0e847835025092b9dfdcf">NetworkType</a>. </td></tr>
    <tr><td class="paramname">port</td><td>Port number to publish on. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, otherwise negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    {</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="preprocessor">#ifdef COSMOS_WIN_OS</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="preprocessor">#endif // COSMOS_WIN_OS</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        int32_t <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        <span class="keywordtype">int</span> on = 1;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <span class="comment">//uint32_t ip, net, bcast;</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <span class="comment">// Return immediately if we&#39;ve already done this</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[0].cport)</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        <span class="keywordflow">switch</span> (type)</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        {</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32">NetworkType::MULTICAST</a>:</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9">NetworkType::UDP</a>:</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;            {</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                <span class="keywordflow">for</span> (uint32_t <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="group__jsonlib__constants.html#gaca9132ec223cde0c1c9e8c973548a910">AGENTMAXIF</a>; <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].cudp = -1;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                if ((<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[0].cudp=socket(AF_INET,SOCK_DGRAM,0)) &lt; 0)</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;                {</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;                    <span class="keywordflow">return</span> (<a class="code" href="group__error__defines.html#gafef6f320cbaf75b1d8b2ebbf8e60c532">AGENT_ERROR_SOCKET</a>);</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;                }</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                <span class="comment">// Use above socket to find available interfaces and establish</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                <span class="comment">// publication on each.</span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;                <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt = 0;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="preprocessor">#if defined(COSMOS_WIN_OS)</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                <span class="keyword">struct </span>sockaddr_storage ss;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;                <span class="keywordtype">int</span> sslen;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;                INTERFACE_INFO ilist[20];</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;                <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> nbytes;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                uint32_t nif;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                <span class="keywordflow">if</span> (WSAIoctl(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[0].cudp, SIO_GET_INTERFACE_LIST, 0, 0, &amp;ilist,<span class="keyword">sizeof</span>(ilist), &amp;nbytes, 0, 0) == SOCKET_ERROR)</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;                {</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                    CLOSE_SOCKET(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[0].cudp);</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                    <span class="keywordflow">return</span> (<a class="code" href="group__error__defines.html#ga288733fafc22802fcacc97206d56b4d5">AGENT_ERROR_DISCOVERY</a>);</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;                }</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                nif = nbytes / <span class="keyword">sizeof</span>(INTERFACE_INFO);</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;                <span class="keywordflow">for</span> (uint32_t <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;nif; <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;                {</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;                    inet_ntop(ilist[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].iiAddress.AddressIn.sin_family,&amp;ilist[i].iiAddress.AddressIn.sin_addr,<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].address,<span class="keyword">sizeof</span>(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].address));</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;                    <span class="comment">//            strcpy(cinfo-&gt;agent[0].pub[cinfo-&gt;agent[0].ifcnt].address,inet_ntoa(((struct sockaddr_in*)&amp;(ilist[i].iiAddress))-&gt;sin_addr));</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;                    <span class="keywordflow">if</span> (!strcmp(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].address,<span class="stringliteral">&quot;127.0.0.1&quot;</span>))</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;                    {</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].cudp &gt;= 0)</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;                        {</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;                            CLOSE_SOCKET(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].cudp);</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;                            <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].cudp = -1;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;                        }</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                    }</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;                    <span class="comment">// No need to open first socket again</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].cudp &lt; 0)</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;                    {</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;                        <span class="keywordflow">if</span> ((<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].cudp=socket(AF_INET,SOCK_DGRAM,0)) &lt; 0)</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;                        {</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;                            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;                        }</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;                    }</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;                    memset(&amp;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].caddr,0,<span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in));</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].caddr.sin_family = AF_INET;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].baddr.sin_family = AF_INET;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                    <span class="keywordflow">if</span> (type == <a class="code" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32">NetworkType::MULTICAST</a>)</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                    {</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;                        sslen = <span class="keyword">sizeof</span>(ss);</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                        WSAStringToAddressA((<span class="keywordtype">char</span> *)<a class="code" href="agentclass_8h.html#a6b8209d791a15719a1f73e324391f6b3">AGENTMCAST</a>,AF_INET,NULL,(<span class="keyword">struct</span> sockaddr*)&amp;ss,&amp;sslen);</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;                        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].caddr.sin_addr = ((<span class="keyword">struct </span>sockaddr_in *)&amp;ss)-&gt;sin_addr;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddr.sin_addr = ((<span class="keyword">struct </span>sockaddr_in *)&amp;ss)-&gt;sin_addr;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;                    }</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                    {</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;                        <span class="keywordflow">if</span> ((iretn = setsockopt(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].cudp,SOL_SOCKET,SO_BROADCAST,(<span class="keywordtype">char</span>*)&amp;on,<span class="keyword">sizeof</span>(on))) &lt; 0)</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;                        {</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;                            CLOSE_SOCKET(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].cudp);</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;                            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                        }</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;                        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].caddr.sin_addr = ((<span class="keyword">struct </span>sockaddr_in *)&amp;ilist[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].iiAddress)-&gt;sin_addr;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddr.sin_addr = ((<span class="keyword">struct </span>sockaddr_in *)&amp;ilist[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].iiAddress)-&gt;sin_addr;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;                        uint32_t ip, net, bcast;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;                        ip = ((<span class="keyword">struct </span>sockaddr_in*)&amp;(ilist[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].iiAddress))-&gt;sin_addr.S_un.S_addr;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;                        net = ((<span class="keyword">struct</span> sockaddr_in*)&amp;(ilist[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].iiNetmask))-&gt;sin_addr.S_un.S_addr;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;                        bcast = ip | (~net);</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddr.sin_addr.S_un.S_addr = bcast;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;                    }</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].caddr.sin_port = htons(<a class="code" href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>);</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddr.sin_port = htons(<a class="code" href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>);</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].type = type;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].cport = <a class="code" href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt++;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                }</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="preprocessor">#elif defined(COSMOS_MAC_OS)</span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                <span class="keyword">struct </span>ifaddrs *if_addrs = NULL;</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                <span class="keyword">struct </span>ifaddrs *if_addr = NULL;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                <span class="keywordflow">if</span> (0 == getifaddrs(&amp;if_addrs))</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                {</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                    <span class="keywordflow">for</span> (if_addr = if_addrs; if_addr != NULL; if_addr = if_addr-&gt;ifa_next)</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                    {</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;                        <span class="keywordflow">if</span> (if_addr-&gt;ifa_addr-&gt;sa_family != AF_INET)</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;                        {</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;                        }</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;                        inet_ntop(if_addr-&gt;ifa_addr-&gt;sa_family,&amp;((<span class="keyword">struct</span> sockaddr_in*)if_addr-&gt;ifa_addr)-&gt;sin_addr,<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].address,<span class="keyword">sizeof</span>(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].address));</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;                        memcpy((<span class="keywordtype">char</span> *)&amp;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].caddr, (<span class="keywordtype">char</span> *)if_addr-&gt;ifa_addr, <span class="keyword">sizeof</span>(if_addr-&gt;ifa_addr));</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;                        <span class="keywordflow">if</span> ((if_addr-&gt;ifa_flags &amp; IFF_POINTOPOINT) || (if_addr-&gt;ifa_flags &amp; IFF_UP) == 0 || (if_addr-&gt;ifa_flags &amp; IFF_LOOPBACK) || (if_addr-&gt;ifa_flags &amp; (IFF_BROADCAST)) == 0)</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;                        {</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;                            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;                        }</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;                        <span class="comment">// No need to open first socket again</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].cudp &lt; 0)</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                        {</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;                            <span class="keywordflow">if</span> ((<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].cudp=socket(AF_INET,SOCK_DGRAM,0)) &lt; 0)</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;                            {</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;                                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;                            }</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;                        }</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;                        <span class="keywordflow">if</span> (type == <a class="code" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32">NetworkType::MULTICAST</a>)</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;                        {</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;                            inet_pton(AF_INET,<a class="code" href="agentclass_8h.html#a6b8209d791a15719a1f73e324391f6b3">AGENTMCAST</a>,&amp;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].caddr.sin_addr);</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;                            inet_pton(AF_INET,<a class="code" href="agentclass_8h.html#a6b8209d791a15719a1f73e324391f6b3">AGENTMCAST</a>,&amp;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddr.sin_addr);</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;                        }</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;                        <span class="keywordflow">else</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;                        {</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                            <span class="keywordflow">if</span> ((iretn = setsockopt(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].cudp,SOL_SOCKET,SO_BROADCAST,(<span class="keywordtype">char</span>*)&amp;on,<span class="keyword">sizeof</span>(on))) &lt; 0)</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                            {</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                                CLOSE_SOCKET(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].cudp);</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                            }</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                            <span class="comment">//                    if (ioctl(cinfo-&gt;agent[0].pub[0].cudp,SIOCGIFBRDADDR,(char *)ifra) &lt; 0)</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;                            <span class="comment">//                    {</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                            <span class="comment">//                        continue;</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                            <span class="comment">//                    }</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;                            <span class="comment">//                    cinfo-&gt;agent[0].pub[cinfo-&gt;agent[0].ifcnt].baddr = cinfo-&gt;agent[0].pub[cinfo-&gt;agent[0].ifcnt].caddr;</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;                            memcpy((<span class="keywordtype">char</span> *)&amp;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddr, (<span class="keywordtype">char</span> *)if_addr-&gt;ifa_netmask, <span class="keyword">sizeof</span>(if_addr-&gt;ifa_netmask));</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                            uint32_t ip, net, bcast;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;                            ip = <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].caddr.sin_addr.s_addr;</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;                            net = <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddr.sin_addr.s_addr;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;                            bcast = ip | (~net);</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;                            <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddr.sin_addr.s_addr = bcast;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;                            inet_ntop(if_addr-&gt;ifa_netmask-&gt;sa_family,&amp;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddr.sin_addr,<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddress,<span class="keyword">sizeof</span>(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddress));</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;                        }</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;                        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].caddr.sin_port = htons(<a class="code" href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>);</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;                        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddr.sin_port = htons(<a class="code" href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>);</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;                        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].type = type;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;                        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].cport = <a class="code" href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>;</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;                        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt++;</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;                    }</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;                    freeifaddrs(if_addrs);</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;                    if_addrs = NULL;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                }</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;                <span class="keyword">struct </span>ifconf confa;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;                <span class="keyword">struct </span>ifreq *ifra;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;                <span class="keywordtype">char</span> data[512];</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;                confa.ifc_len = <span class="keyword">sizeof</span>(data);</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                confa.ifc_buf = (caddr_t)data;</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;                <span class="keywordflow">if</span> (ioctl(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[0].cudp,SIOCGIFCONF,&amp;confa) &lt; 0)</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;                {</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;                    CLOSE_SOCKET(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[0].cudp);</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;                    <span class="keywordflow">return</span> (<a class="code" href="group__error__defines.html#ga288733fafc22802fcacc97206d56b4d5">AGENT_ERROR_DISCOVERY</a>);</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;                }</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;                <span class="comment">// Use result to discover interfaces.</span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;                ifra = confa.ifc_req;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;                <span class="keywordflow">for</span> (int32_t n=confa.ifc_len/<span class="keyword">sizeof</span>(<span class="keyword">struct</span> ifreq); --n &gt;= 0; ifra++)</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;                {</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;                    <span class="keywordflow">if</span> (ifra-&gt;ifr_addr.sa_family != AF_INET)</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                    {</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;                    }</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                    inet_ntop(ifra-&gt;ifr_addr.sa_family,&amp;((<span class="keyword">struct</span> sockaddr_in*)&amp;ifra-&gt;ifr_addr)-&gt;sin_addr,<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].address,<span class="keyword">sizeof</span>(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].address));</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                    memcpy((<span class="keywordtype">char</span> *)&amp;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].caddr, (<span class="keywordtype">char</span> *)&amp;ifra-&gt;ifr_addr, <span class="keyword">sizeof</span>(ifra-&gt;ifr_addr));</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                    <span class="keywordflow">if</span> (ioctl(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[0].cudp,SIOCGIFFLAGS, (<span class="keywordtype">char</span> *)ifra) &lt; 0) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                    <span class="keywordflow">if</span> ((ifra-&gt;ifr_flags &amp; IFF_POINTOPOINT) || (ifra-&gt;ifr_flags &amp; IFF_UP) == 0 || (ifra-&gt;ifr_flags &amp; IFF_LOOPBACK) || (ifra-&gt;ifr_flags &amp; (IFF_BROADCAST)) == 0)</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;                    {</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                    }</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;                    <span class="comment">// No need to open first socket again</span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].cudp &lt; 0)</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                    {</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                        <span class="keywordflow">if</span> ((<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].cudp=socket(AF_INET,SOCK_DGRAM,0)) &lt; 0)</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                        {</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                        }</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;                    }</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                    <span class="keywordflow">if</span> (type == <a class="code" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32">NetworkType::MULTICAST</a>)</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;                    {</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                        inet_pton(AF_INET,<a class="code" href="agentclass_8h.html#a6b8209d791a15719a1f73e324391f6b3">AGENTMCAST</a>,&amp;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].caddr.sin_addr);</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;                        inet_pton(AF_INET,<a class="code" href="agentclass_8h.html#a6b8209d791a15719a1f73e324391f6b3">AGENTMCAST</a>,&amp;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddr.sin_addr);</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;                    }</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                    {</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;                        <span class="keywordflow">if</span> ((iretn = setsockopt(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].cudp,SOL_SOCKET,SO_BROADCAST,(<span class="keywordtype">char</span>*)&amp;on,<span class="keyword">sizeof</span>(on))) &lt; 0)</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;                        {</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;                            CLOSE_SOCKET(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].cudp);</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                        }</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                        <span class="keywordflow">if</span> (ioctl(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[0].cudp,SIOCGIFBRDADDR,(<span class="keywordtype">char</span> *)ifra) &lt; 0)</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                        {</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                        }</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddr = <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].caddr;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                        inet_ntop(ifra-&gt;ifr_broadaddr.sa_family,&amp;((<span class="keyword">struct</span> sockaddr_in*)&amp;ifra-&gt;ifr_broadaddr)-&gt;sin_addr,<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddress,<span class="keyword">sizeof</span>(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddress));</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;                        inet_pton(AF_INET,<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddress,&amp;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddr.sin_addr);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                    }</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].caddr.sin_port = htons(<a class="code" href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>);</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].baddr.sin_port = htons(<a class="code" href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>);</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].type = type;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt].cport = <a class="code" href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt++;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                }</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<span class="preprocessor">#endif // COSMOS_WIN_OS</span></div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;            }</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__error__defines.html#gaa45c05318f5acf769365533ba22be3cb">SOCKET_ERROR_PROTOCOL</a>;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;        }</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="group__socketlib__constants_html_ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9"><div class="ttname"><a href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9">NetworkType::UDP</a></div><div class="ttdoc">Agent socket using Unicast UDP. </div></div>
<div class="ttc" id="rw__test_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="group__error__defines_html_gaa45c05318f5acf769365533ba22be3cb"><div class="ttname"><a href="group__error__defines.html#gaa45c05318f5acf769365533ba22be3cb">SOCKET_ERROR_PROTOCOL</a></div><div class="ttdeci">#define SOCKET_ERROR_PROTOCOL</div><div class="ttdef"><b>Definition:</b> cosmos-errno.h:226</div></div>
<div class="ttc" id="rw__test_8cpp_html_afece067d35cd26a458c56fa8f276e734"><div class="ttname"><a href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a></div><div class="ttdeci">int iretn</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="group__error__defines_html_ga288733fafc22802fcacc97206d56b4d5"><div class="ttname"><a href="group__error__defines.html#ga288733fafc22802fcacc97206d56b4d5">AGENT_ERROR_DISCOVERY</a></div><div class="ttdeci">#define AGENT_ERROR_DISCOVERY</div><div class="ttdef"><b>Definition:</b> cosmos-errno.h:112</div></div>
<div class="ttc" id="agentclass_8h_html_a6b8209d791a15719a1f73e324391f6b3"><div class="ttname"><a href="agentclass_8h.html#a6b8209d791a15719a1f73e324391f6b3">AGENTMCAST</a></div><div class="ttdeci">#define AGENTMCAST</div><div class="ttdoc">AGENT heartbeat Multicast address. </div><div class="ttdef"><b>Definition:</b> agentclass.h:185</div></div>
<div class="ttc" id="group__error__defines_html_gafef6f320cbaf75b1d8b2ebbf8e60c532"><div class="ttname"><a href="group__error__defines.html#gafef6f320cbaf75b1d8b2ebbf8e60c532">AGENT_ERROR_SOCKET</a></div><div class="ttdeci">#define AGENT_ERROR_SOCKET</div><div class="ttdef"><b>Definition:</b> cosmos-errno.h:108</div></div>
<div class="ttc" id="group__jsonlib__constants_html_gaca9132ec223cde0c1c9e8c973548a910"><div class="ttname"><a href="group__jsonlib__constants.html#gaca9132ec223cde0c1c9e8c973548a910">AGENTMAXIF</a></div><div class="ttdeci">#define AGENTMAXIF</div><div class="ttdoc">Maximum number of supported publication interfaces. </div><div class="ttdef"><b>Definition:</b> jsondef.h:465</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
<div class="ttc" id="group__socketlib__constants_html_ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32"><div class="ttname"><a href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32">NetworkType::MULTICAST</a></div><div class="ttdoc">Agent socket using Multicast UDP. </div></div>
<div class="ttc" id="netperf__listen_8cpp_html_a8e0798404bf2cf5dabb84c5ba9a4f236"><div class="ttname"><a href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> netperf_listen.cpp:70</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga176b1e94cddffc5f787761347db14153"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga176b1e94cddffc5f787761347db14153">&#9670;&nbsp;</a></span>find_addresses()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt; <a class="el" href="structsocket__channel.html">socket_channel</a> &gt; Cosmos::Agent::find_addresses </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__socketlib__constants.html#gac3df430da2e0e847835025092b9dfdcf">NetworkType</a>&#160;</td>
          <td class="paramname"><em>ntype</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Discover interfaces. </p>
<p>Return a vector of <a class="el" href="structsocket__channel.html">socket_channel</a> containing info on each valid interface. For IPV4 this will include the address and broadcast address, in both string sockaddr_in format. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ntype</td><td>Type of network (Multicast, Broadcast UDP, CSP) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Vector of interfaces </dd></dl>
<div class="fragment"><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    {</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        vector&lt;socket_channel&gt; iface;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;        <a class="code" href="structsocket__channel.html">socket_channel</a> tiface;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="preprocessor">#ifdef COSMOS_WIN_OS</span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;        <span class="keyword">struct </span>sockaddr_storage ss;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        <span class="keywordtype">int</span> sslen;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;        INTERFACE_INFO ilist[20];</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> nbytes;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        <span class="keywordtype">size_t</span> nif, ssize;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        uint32_t ip, net, bcast;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        <span class="keyword">struct </span>ifconf confa;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        <span class="keyword">struct </span>ifreq *ifra;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        <span class="keywordtype">char</span> data[512];</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;<span class="preprocessor">#endif // COSMOS_WIN_OS</span></div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        int32_t <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <span class="keywordtype">int</span> on = 1;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        int32_t cudp;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="agent__exec_8cpp.html#a8dadfa60d80a481745f0212f7caec1e7">ntype</a>)</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        {</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32">NetworkType::MULTICAST</a>:</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9">NetworkType::UDP</a>:</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;            {</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;                <span class="keywordflow">if</span> ((cudp=socket(AF_INET,SOCK_DGRAM,0)) &lt; 0)</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;                {</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;                    <span class="keywordflow">return</span> (iface);</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;                }</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;                <span class="comment">// Use above socket to find available interfaces and establish</span></div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;                <span class="comment">// publication on each.</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;<span class="preprocessor">#ifdef COSMOS_WIN_OS</span></div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;                <span class="keywordflow">if</span> (WSAIoctl(cudp, SIO_GET_INTERFACE_LIST, 0, 0, &amp;ilist,<span class="keyword">sizeof</span>(ilist), &amp;nbytes, 0, 0) == SOCKET_ERROR)</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;                {</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;                    CLOSE_SOCKET(cudp);</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;                    <span class="keywordflow">return</span> (iface);</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                }</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                nif = nbytes / <span class="keyword">sizeof</span>(INTERFACE_INFO);</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;                PIP_ADAPTER_ADDRESSES pAddresses = NULL;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;                PIP_ADAPTER_ADDRESSES pCurrAddresses = NULL;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;                pAddresses = (IP_ADAPTER_ADDRESSES *) <a class="code" href="zutil_8c.html#aebd5c667302d7b972ed849f359982306">calloc</a>(<span class="keyword">sizeof</span>(IP_ADAPTER_ADDRESSES), 2*nif);</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;                ULONG outBufLen = <span class="keyword">sizeof</span>(IP_ADAPTER_ADDRESSES) * 2 * nif;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;                DWORD dwRetVal;</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;                <span class="keywordflow">if</span> ((dwRetVal=GetAdaptersAddresses(AF_INET, GAA_FLAG_INCLUDE_PREFIX, NULL, pAddresses, &amp;outBufLen)) == ERROR_BUFFER_OVERFLOW)</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;                {</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                    <a class="code" href="gzguts_8h.html#aafde19f7d36ca163a143579c1b125b6d">free</a>(pAddresses);</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;                    <span class="keywordflow">return</span> (iface);</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;                }</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;                <span class="keywordflow">for</span> (uint32_t <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;nif; <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;                {</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;                    inet_ntop(ilist[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].iiAddress.AddressIn.sin_family,&amp;ilist[i].iiAddress.AddressIn.sin_addr,tiface.<a class="code" href="structsocket__channel.html#a5fc746e018706be753d291638f7baddb">address</a>,<span class="keyword">sizeof</span>(tiface.<a class="code" href="structsocket__channel.html#a5fc746e018706be753d291638f7baddb">address</a>));</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;                    <span class="comment">//            strcpy(tiface.address,inet_ntoa(((struct sockaddr_in*)&amp;(ilist[i].iiAddress))-&gt;sin_addr));</span></div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;                    <span class="keywordflow">if</span> (!strcmp(tiface.<a class="code" href="structsocket__channel.html#a5fc746e018706be753d291638f7baddb">address</a>,<span class="stringliteral">&quot;127.0.0.1&quot;</span>))</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;                    {</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;                    }</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                    pCurrAddresses = pAddresses;</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;                    <span class="keywordflow">while</span> (pAddresses)</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;                    {</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;                        <span class="keywordflow">if</span> (((<span class="keyword">struct</span> sockaddr_in *)(pCurrAddresses-&gt;FirstUnicastAddress-&gt;Address.lpSockaddr))-&gt;sin_addr.s_addr == ((<span class="keyword">struct</span> sockaddr_in*)&amp;(ilist[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].iiAddress))-&gt;sin_addr.s_addr)</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;                        {</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;                            strcpy(tiface.<a class="code" href="structsocket__channel.html#a836ae926c4f4de45aabbacade23f5642">name</a>, pCurrAddresses-&gt;AdapterName);</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;                        }</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;                        pCurrAddresses = pCurrAddresses-&gt;Next;</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;                    }</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;                    memset(&amp;tiface.<a class="code" href="structsocket__channel.html#a8d2c39afd45c287064229be41dfea731">caddr</a>,0,<span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in));</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;                    memset(&amp;tiface.<a class="code" href="structsocket__channel.html#a010577b917edde7e3d2780ddac8d6cd9">baddr</a>,0,<span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in));</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;                    tiface.<a class="code" href="structsocket__channel.html#a8d2c39afd45c287064229be41dfea731">caddr</a>.sin_family = AF_INET;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                    tiface.<a class="code" href="structsocket__channel.html#a010577b917edde7e3d2780ddac8d6cd9">baddr</a>.sin_family = AF_INET;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="agent__exec_8cpp.html#a8dadfa60d80a481745f0212f7caec1e7">ntype</a> == <a class="code" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32">NetworkType::MULTICAST</a>)</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                    {</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;                        sslen = <span class="keyword">sizeof</span>(ss);</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;                        WSAStringToAddressA((<span class="keywordtype">char</span> *)<a class="code" href="agentclass_8h.html#a6b8209d791a15719a1f73e324391f6b3">AGENTMCAST</a>,AF_INET,NULL,(<span class="keyword">struct</span> sockaddr*)&amp;ss,&amp;sslen);</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;                        tiface.<a class="code" href="structsocket__channel.html#a8d2c39afd45c287064229be41dfea731">caddr</a>.sin_addr = ((<span class="keyword">struct </span>sockaddr_in *)&amp;ss)-&gt;sin_addr;</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;                        tiface.<a class="code" href="structsocket__channel.html#a010577b917edde7e3d2780ddac8d6cd9">baddr</a>.sin_addr = ((<span class="keyword">struct </span>sockaddr_in *)&amp;ss)-&gt;sin_addr;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;                    }</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;                    {</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;                        <span class="keywordflow">if</span> ((iretn = setsockopt(cudp,SOL_SOCKET,SO_BROADCAST,(<span class="keywordtype">char</span>*)&amp;on,<span class="keyword">sizeof</span>(on))) &lt; 0)</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;                        {</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;                            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;                        }</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;                        ip = ((<span class="keyword">struct </span>sockaddr_in*)&amp;(ilist[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].iiAddress))-&gt;sin_addr.S_un.S_addr;</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;                        net = ((<span class="keyword">struct</span> sockaddr_in*)&amp;(ilist[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].iiNetmask))-&gt;sin_addr.S_un.S_addr;</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;                        bcast = ip | (~net);</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;                        tiface.<a class="code" href="structsocket__channel.html#a8d2c39afd45c287064229be41dfea731">caddr</a>.sin_addr = ((<span class="keyword">struct </span>sockaddr_in *)&amp;ilist[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].iiAddress)-&gt;sin_addr;</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;                        tiface.<a class="code" href="structsocket__channel.html#a8d2c39afd45c287064229be41dfea731">caddr</a>.sin_addr.S_un.S_addr = ip;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;                        tiface.<a class="code" href="structsocket__channel.html#a010577b917edde7e3d2780ddac8d6cd9">baddr</a>.sin_addr = ((<span class="keyword">struct </span>sockaddr_in *)&amp;ilist[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].iiAddress)-&gt;sin_addr;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;                        tiface.<a class="code" href="structsocket__channel.html#a010577b917edde7e3d2780ddac8d6cd9">baddr</a>.sin_addr.S_un.S_addr = bcast;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;                    }</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;                    ((<span class="keyword">struct </span>sockaddr_in *)&amp;ss)-&gt;sin_addr = tiface.<a class="code" href="structsocket__channel.html#a8d2c39afd45c287064229be41dfea731">caddr</a>.sin_addr;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;                    ssize = strlen(tiface.<a class="code" href="structsocket__channel.html#a5fc746e018706be753d291638f7baddb">address</a>);</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;                    WSAAddressToStringA((<span class="keyword">struct</span> sockaddr *)&amp;tiface.<a class="code" href="structsocket__channel.html#a8d2c39afd45c287064229be41dfea731">caddr</a>.sin_addr, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in), 0, tiface.<a class="code" href="structsocket__channel.html#a5fc746e018706be753d291638f7baddb">address</a>, (LPDWORD)&amp;ssize);</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;                    ssize = strlen(tiface.<a class="code" href="structsocket__channel.html#a8beda6761b464bb7408c385b7f5213e7">baddress</a>);</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;                    WSAAddressToStringA((<span class="keyword">struct</span> sockaddr *)&amp;tiface.<a class="code" href="structsocket__channel.html#a010577b917edde7e3d2780ddac8d6cd9">baddr</a>.sin_addr, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in), 0, tiface.<a class="code" href="structsocket__channel.html#a8beda6761b464bb7408c385b7f5213e7">baddress</a>, (LPDWORD)&amp;ssize);</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;                    tiface.<a class="code" href="structsocket__channel.html#addb1179eeaf45b16e3cb91eb02821826">type</a> = <a class="code" href="agent__exec_8cpp.html#a8dadfa60d80a481745f0212f7caec1e7">ntype</a>;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;                    iface.push_back(tiface);</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;                }</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;                confa.ifc_len = <span class="keyword">sizeof</span>(data);</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;                confa.ifc_buf = (caddr_t)data;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;                <span class="keywordflow">if</span> (ioctl(cudp,SIOCGIFCONF,&amp;confa) &lt; 0)</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;                {</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;                    CLOSE_SOCKET(cudp);</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;                    <span class="keywordflow">return</span> (iface);</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;                }</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;                <span class="comment">// Use result to discover interfaces.</span></div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;                ifra = confa.ifc_req;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;                <span class="keywordflow">for</span> (int32_t n=confa.ifc_len/<span class="keyword">sizeof</span>(<span class="keyword">struct</span> ifreq); --n &gt;= 0; ifra++)</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;                {</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;                    <span class="keywordflow">if</span> (ifra-&gt;ifr_addr.sa_family != AF_INET) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;                    inet_ntop(ifra-&gt;ifr_addr.sa_family,&amp;((<span class="keyword">struct</span> sockaddr_in*)&amp;ifra-&gt;ifr_addr)-&gt;sin_addr,tiface.<a class="code" href="structsocket__channel.html#a5fc746e018706be753d291638f7baddb">address</a>,<span class="keyword">sizeof</span>(tiface.<a class="code" href="structsocket__channel.html#a5fc746e018706be753d291638f7baddb">address</a>));</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;                    <span class="keywordflow">if</span> (ioctl(cudp,SIOCGIFFLAGS, (<span class="keywordtype">char</span> *)ifra) &lt; 0) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;                    <span class="keywordflow">if</span> ((ifra-&gt;ifr_flags &amp; IFF_UP) == 0 || (ifra-&gt;ifr_flags &amp; IFF_LOOPBACK) || (ifra-&gt;ifr_flags &amp; (IFF_BROADCAST)) == 0) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="agent__exec_8cpp.html#a8dadfa60d80a481745f0212f7caec1e7">ntype</a> == <a class="code" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32">NetworkType::MULTICAST</a>)</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;                    {</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;                        inet_pton(AF_INET,<a class="code" href="agentclass_8h.html#a6b8209d791a15719a1f73e324391f6b3">AGENTMCAST</a>,&amp;tiface.<a class="code" href="structsocket__channel.html#a8d2c39afd45c287064229be41dfea731">caddr</a>.sin_addr);\</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;                        strcpy(tiface.<a class="code" href="structsocket__channel.html#a8beda6761b464bb7408c385b7f5213e7">baddress</a>, <a class="code" href="agentclass_8h.html#a6b8209d791a15719a1f73e324391f6b3">AGENTMCAST</a>);</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;                        inet_pton(AF_INET,<a class="code" href="agentclass_8h.html#a6b8209d791a15719a1f73e324391f6b3">AGENTMCAST</a>,&amp;tiface.<a class="code" href="structsocket__channel.html#a010577b917edde7e3d2780ddac8d6cd9">baddr</a>.sin_addr);\</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;                    }</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;                    {</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;                        <span class="keywordflow">if</span> ((iretn = setsockopt(cudp,SOL_SOCKET,SO_BROADCAST,(<span class="keywordtype">char</span>*)&amp;on,<span class="keyword">sizeof</span>(on))) &lt; 0)</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;                        {</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;                            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;                        }</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;                        strncpy(tiface.<a class="code" href="structsocket__channel.html#a836ae926c4f4de45aabbacade23f5642">name</a>, ifra-&gt;ifr_name, <a class="code" href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a>);</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;                        <span class="keywordflow">if</span> (ioctl(cudp,SIOCGIFBRDADDR,(<span class="keywordtype">char</span> *)ifra) &lt; 0) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;                        memcpy((<span class="keywordtype">char</span> *)&amp;tiface.<a class="code" href="structsocket__channel.html#a010577b917edde7e3d2780ddac8d6cd9">baddr</a>, (<span class="keywordtype">char</span> *)&amp;ifra-&gt;ifr_broadaddr, <span class="keyword">sizeof</span>(ifra-&gt;ifr_broadaddr));</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;                        <span class="keywordflow">if</span> (ioctl(cudp,SIOCGIFADDR,(<span class="keywordtype">char</span> *)ifra) &lt; 0) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;                        memcpy((<span class="keywordtype">char</span> *)&amp;tiface.<a class="code" href="structsocket__channel.html#a8d2c39afd45c287064229be41dfea731">caddr</a>, (<span class="keywordtype">char</span> *)&amp;ifra-&gt;ifr_addr, <span class="keyword">sizeof</span>(ifra-&gt;ifr_addr));</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;                        inet_ntop(tiface.<a class="code" href="structsocket__channel.html#a010577b917edde7e3d2780ddac8d6cd9">baddr</a>.sin_family,&amp;tiface.<a class="code" href="structsocket__channel.html#a010577b917edde7e3d2780ddac8d6cd9">baddr</a>.sin_addr,tiface.<a class="code" href="structsocket__channel.html#a8beda6761b464bb7408c385b7f5213e7">baddress</a>,<span class="keyword">sizeof</span>(tiface.<a class="code" href="structsocket__channel.html#a8beda6761b464bb7408c385b7f5213e7">baddress</a>));</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                    }</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;                    tiface.<a class="code" href="structsocket__channel.html#addb1179eeaf45b16e3cb91eb02821826">type</a> = <a class="code" href="agent__exec_8cpp.html#a8dadfa60d80a481745f0212f7caec1e7">ntype</a>;</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;                    iface.push_back(tiface);</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;                }</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;<span class="preprocessor">#endif // COSMOS_WIN_OS</span></div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;            }</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        }</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        <span class="keywordflow">return</span> (iface);</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    }</div><div class="ttc" id="agent__exec_8cpp_html_a8dadfa60d80a481745f0212f7caec1e7"><div class="ttname"><a href="agent__exec_8cpp.html#a8dadfa60d80a481745f0212f7caec1e7">ntype</a></div><div class="ttdeci">NetworkType ntype</div><div class="ttdef"><b>Definition:</b> agent_exec.cpp:108</div></div>
<div class="ttc" id="group__socketlib__constants_html_ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9"><div class="ttname"><a href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9">NetworkType::UDP</a></div><div class="ttdoc">Agent socket using Unicast UDP. </div></div>
<div class="ttc" id="rw__test_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="group__defs__storage_html_ga2005202dc256c47dd66042b748fc4dd5"><div class="ttname"><a href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a></div><div class="ttdeci">#define COSMOS_MAX_NAME</div><div class="ttdoc">Largest JSON name. </div><div class="ttdef"><b>Definition:</b> cosmos-defs.h:55</div></div>
<div class="ttc" id="rw__test_8cpp_html_afece067d35cd26a458c56fa8f276e734"><div class="ttname"><a href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a></div><div class="ttdeci">int iretn</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="structsocket__channel_html_a010577b917edde7e3d2780ddac8d6cd9"><div class="ttname"><a href="structsocket__channel.html#a010577b917edde7e3d2780ddac8d6cd9">socket_channel::baddr</a></div><div class="ttdeci">struct sockaddr_in baddr</div><div class="ttdef"><b>Definition:</b> socketlib.h:124</div></div>
<div class="ttc" id="structsocket__channel_html_a5fc746e018706be753d291638f7baddb"><div class="ttname"><a href="structsocket__channel.html#a5fc746e018706be753d291638f7baddb">socket_channel::address</a></div><div class="ttdeci">char address[17]</div><div class="ttdef"><b>Definition:</b> socketlib.h:134</div></div>
<div class="ttc" id="gzguts_8h_html_aafde19f7d36ca163a143579c1b125b6d"><div class="ttname"><a href="gzguts_8h.html#aafde19f7d36ca163a143579c1b125b6d">free</a></div><div class="ttdeci">void free()</div></div>
<div class="ttc" id="structsocket__channel_html_a836ae926c4f4de45aabbacade23f5642"><div class="ttname"><a href="structsocket__channel.html#a836ae926c4f4de45aabbacade23f5642">socket_channel::name</a></div><div class="ttdeci">char name[COSMOS_MAX_NAME+1]</div><div class="ttdef"><b>Definition:</b> socketlib.h:138</div></div>
<div class="ttc" id="structsocket__channel_html_addb1179eeaf45b16e3cb91eb02821826"><div class="ttname"><a href="structsocket__channel.html#addb1179eeaf45b16e3cb91eb02821826">socket_channel::type</a></div><div class="ttdeci">NetworkType type</div><div class="ttdef"><b>Definition:</b> socketlib.h:118</div></div>
<div class="ttc" id="structsocket__channel_html"><div class="ttname"><a href="structsocket__channel.html">socket_channel</a></div><div class="ttdef"><b>Definition:</b> socketlib.h:115</div></div>
<div class="ttc" id="agentclass_8h_html_a6b8209d791a15719a1f73e324391f6b3"><div class="ttname"><a href="agentclass_8h.html#a6b8209d791a15719a1f73e324391f6b3">AGENTMCAST</a></div><div class="ttdeci">#define AGENTMCAST</div><div class="ttdoc">AGENT heartbeat Multicast address. </div><div class="ttdef"><b>Definition:</b> agentclass.h:185</div></div>
<div class="ttc" id="structsocket__channel_html_a8d2c39afd45c287064229be41dfea731"><div class="ttname"><a href="structsocket__channel.html#a8d2c39afd45c287064229be41dfea731">socket_channel::caddr</a></div><div class="ttdeci">struct sockaddr_in caddr</div><div class="ttdef"><b>Definition:</b> socketlib.h:122</div></div>
<div class="ttc" id="zutil_8c_html_aebd5c667302d7b972ed849f359982306"><div class="ttname"><a href="zutil_8c.html#aebd5c667302d7b972ed849f359982306">calloc</a></div><div class="ttdeci">voidp calloc()</div></div>
<div class="ttc" id="group__socketlib__constants_html_ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32"><div class="ttname"><a href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32">NetworkType::MULTICAST</a></div><div class="ttdoc">Agent socket using Multicast UDP. </div></div>
<div class="ttc" id="structsocket__channel_html_a8beda6761b464bb7408c385b7f5213e7"><div class="ttname"><a href="structsocket__channel.html#a8beda6761b464bb7408c385b7f5213e7">socket_channel::baddress</a></div><div class="ttdeci">char baddress[17]</div><div class="ttdef"><b>Definition:</b> socketlib.h:136</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga1e156ba9e17f232c99927228f658742a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1e156ba9e17f232c99927228f658742a">&#9670;&nbsp;</a></span>post() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::post </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_cosmos_1_1_agent_1_1messstruc.html">messstruc</a>&#160;</td>
          <td class="paramname"><em>mess</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Post a <a class="el" href="struct_cosmos_1_1_agent_1_1messstruc.html" title="Storage for messages. ">Cosmos::Agent::messstruc</a>. </p>
<p>Post an already defined message on the previously opened publication channel. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mess</td><td><a class="el" href="struct_cosmos_1_1_agent_1_1messstruc.html" title="Storage for messages. ">Cosmos::Agent::messstruc</a> containing everything necessary, including type, header and data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, otherwise negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    {</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        int32_t <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        <span class="keywordflow">if</span> (mess.meta.type &lt; <a class="code" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3a98ad0e8750ae10ad556ed7a62affb452">Agent::AgentMessage::BINARY</a>)</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;        {</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;            iretn = <a class="code" href="group__agentclass__functions.html#ga1e156ba9e17f232c99927228f658742a">post</a>(mess.meta.type, mess.adata);</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        }</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;        {</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;            iretn = <a class="code" href="group__agentclass__functions.html#ga1e156ba9e17f232c99927228f658742a">post</a>(mess.meta.type, mess.bdata);</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;        }</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;        <span class="comment">//        size_t nbytes;</span></div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;        <span class="comment">//        int32_t iretn=0;</span></div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        <span class="comment">//        uint8_t post[AGENTMAXBUFFER];</span></div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;        <span class="comment">//        cinfo-&gt;agent[0].beat.utc = cinfo-&gt;agent[0].beat.utc;</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;        <span class="comment">//        post[0] = mess.meta.type;</span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;        <span class="comment">//        // this will broadcast messages to all external interfaces (ifcnt = interface count)</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;        <span class="comment">//        for (size_t i=0; i&lt;cinfo-&gt;agent[0].ifcnt; i++)</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;        <span class="comment">//        {</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;        <span class="comment">//            sprintf((char *)&amp;post[3], &quot;%s&quot;, mess.jdata.c_str());</span></div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        <span class="comment">//            size_t hlength = strlen((char *)&amp;post[3]);</span></div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;        <span class="comment">//            post[1] = hlength%256;</span></div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;        <span class="comment">//            post[2] = hlength / 256;</span></div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;        <span class="comment">//            nbytes = hlength + 3;</span></div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;        <span class="comment">//            if (mess.meta.type &lt; Agent::AgentMessage::BINARY &amp;&amp; mess.adata.size())</span></div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        <span class="comment">//            {</span></div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        <span class="comment">//                if (nbytes+mess.adata.size() &gt; AGENTMAXBUFFER)</span></div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        <span class="comment">//                    return (AGENT_ERROR_BUFLEN);</span></div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;        <span class="comment">//                memcpy(&amp;post[nbytes], &amp;mess.adata[0], mess.adata.size());</span></div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;        <span class="comment">//                nbytes += mess.adata.size();</span></div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;        <span class="comment">//            }</span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        <span class="comment">//            if (mess.meta.type &gt;= Agent::AgentMessage::BINARY &amp;&amp; mess.bdata.size())</span></div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        <span class="comment">//            {</span></div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        <span class="comment">//                if (nbytes+mess.bdata.size() &gt; AGENTMAXBUFFER)</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;        <span class="comment">//                    return (AGENT_ERROR_BUFLEN);</span></div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        <span class="comment">//                memcpy(&amp;post[nbytes], &amp;mess.bdata[0], mess.bdata.size());</span></div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;        <span class="comment">//                nbytes += mess.bdata.size();</span></div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        <span class="comment">//            }</span></div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        <span class="comment">//            iretn = sendto(cinfo-&gt;agent[0].pub[i].cudp, (const char *)post, nbytes, 0,(struct sockaddr *)&amp;cinfo-&gt;agent[0].pub[i].baddr, sizeof(struct sockaddr_in));</span></div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;        <span class="comment">//        }</span></div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;        <span class="comment">//        if (iretn&lt;0)</span></div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;        <span class="comment">//        {</span></div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;        <span class="comment">//#ifdef COSMOS_WIN_OS</span></div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;        <span class="comment">//            return(-WSAGetLastError());</span></div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;        <span class="comment">//#else</span></div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        <span class="comment">//            return (-errno);</span></div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        <span class="comment">//#endif</span></div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        <span class="comment">//        }</span></div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    }</div><div class="ttc" id="rw__test_8cpp_html_afece067d35cd26a458c56fa8f276e734"><div class="ttname"><a href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a></div><div class="ttdeci">int iretn</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a59e6f4e4d4501a12b65cb790a93471b3a98ad0e8750ae10ad556ed7a62affb452"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3a98ad0e8750ae10ad556ed7a62affb452">Cosmos::Agent::AgentMessage::BINARY</a></div></div>
<div class="ttc" id="group__agentclass__functions_html_ga1e156ba9e17f232c99927228f658742a"><div class="ttname"><a href="group__agentclass__functions.html#ga1e156ba9e17f232c99927228f658742a">Cosmos::Agent::post</a></div><div class="ttdeci">int32_t post(messstruc mess)</div><div class="ttdoc">Post a Cosmos::Agent::messstruc. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1730</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gad05108dbb3a8dde7edfe68977cdc0682"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad05108dbb3a8dde7edfe68977cdc0682">&#9670;&nbsp;</a></span>post() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::post </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3">AgentMessage</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Post a JSON message. </p>
<p>Post a vector of bytes on the previously opened publication channel. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>A byte indicating the type of message. </td></tr>
    <tr><td class="paramname">message</td><td>A NULL terminated JSON text string to post. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, otherwise negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    {</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;        int32_t <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        vector&lt;uint8_t&gt; bytes(<a class="code" href="kpc9612p__send_8cpp.html#a98f0d289faa791f0d8c593ad13c4a2cb">message</a>.begin(), <a class="code" href="kpc9612p__send_8cpp.html#a98f0d289faa791f0d8c593ad13c4a2cb">message</a>.end());</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        bytes.push_back(0);</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;        iretn = <a class="code" href="group__agentclass__functions.html#ga1e156ba9e17f232c99927228f658742a">post</a>(type, bytes);</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    }</div><div class="ttc" id="rw__test_8cpp_html_afece067d35cd26a458c56fa8f276e734"><div class="ttname"><a href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a></div><div class="ttdeci">int iretn</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="kpc9612p__send_8cpp_html_a98f0d289faa791f0d8c593ad13c4a2cb"><div class="ttname"><a href="kpc9612p__send_8cpp.html#a98f0d289faa791f0d8c593ad13c4a2cb">message</a></div><div class="ttdeci">uint8_t message[300]</div><div class="ttdef"><b>Definition:</b> kpc9612p_send.cpp:36</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga1e156ba9e17f232c99927228f658742a"><div class="ttname"><a href="group__agentclass__functions.html#ga1e156ba9e17f232c99927228f658742a">Cosmos::Agent::post</a></div><div class="ttdeci">int32_t post(messstruc mess)</div><div class="ttdoc">Post a Cosmos::Agent::messstruc. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1730</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga9c388b879284eca0ea31adfb958ec6e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9c388b879284eca0ea31adfb958ec6e5">&#9670;&nbsp;</a></span>post() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::post </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3">AgentMessage</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; uint8_t &gt;&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Post a binary message. </p>
<p>Post a vector of bytes on the previously opened publication channel. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>A byte indicating the type of message. </td></tr>
    <tr><td class="paramname">message</td><td>An array of bytes to post. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, otherwise negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    {</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;        <span class="keywordtype">size_t</span> nbytes;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;        int32_t <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>=0;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;        uint8_t <a class="code" href="group__agentclass__functions.html#ga1e156ba9e17f232c99927228f658742a">post</a>[<a class="code" href="group__jsonlib__constants.html#ga855b38da23dc26339aa8a5d726aab4a6">AGENTMAXBUFFER</a>];</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.utc = <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.utc;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        post[0] = (uint8_t)type;</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;        <span class="comment">// this will broadcast messages to all external interfaces (ifcnt = interface count)</span></div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt; <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;        {</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;            sprintf((<span class="keywordtype">char</span> *)&amp;post[3],<span class="stringliteral">&quot;{\&quot;agent_utc\&quot;:%.15g}{\&quot;agent_node\&quot;:\&quot;%s\&quot;}{\&quot;agent_proc\&quot;:\&quot;%s\&quot;}{\&quot;agent_addr\&quot;:\&quot;%s\&quot;}{\&quot;agent_port\&quot;:%u}{\&quot;agent_bprd\&quot;:%f}{\&quot;agent_bsz\&quot;:%u}{\&quot;agent_cpu\&quot;:%f}{\&quot;agent_memory\&quot;:%f}{\&quot;agent_jitter\&quot;:%f}{\&quot;node_utcoffset\&quot;:%.15g}&quot;</span>,</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.utc,</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.node,</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.proc,</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].address,</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.port,</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bprd,</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.bsz,</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.cpu,</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.memory,</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].beat.jitter,</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af4e942210d74ec7b18eed16914c366ce">node</a>.<a class="code" href="structnodestruc.html#a1ed0eb848bb5534b7844c13a2727b11e">utcoffset</a>);</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;            <span class="keywordtype">size_t</span> hlength = strlen((<span class="keywordtype">char</span> *)&amp;post[3]);</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;            post[1] = hlength%256;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;            post[2] = hlength / 256;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;            nbytes = hlength + 3;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="kpc9612p__send_8cpp.html#a98f0d289faa791f0d8c593ad13c4a2cb">message</a>.size())</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;            {</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;                <span class="keywordflow">if</span> (nbytes+<a class="code" href="kpc9612p__send_8cpp.html#a98f0d289faa791f0d8c593ad13c4a2cb">message</a>.size() &gt; <a class="code" href="group__jsonlib__constants.html#ga855b38da23dc26339aa8a5d726aab4a6">AGENTMAXBUFFER</a>)</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                    <span class="keywordflow">return</span> (<a class="code" href="group__error__defines.html#ga68e4d86d07bd5bc53d49a02f37607b09">AGENT_ERROR_BUFLEN</a>);</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                memcpy(&amp;post[nbytes], &amp;<a class="code" href="kpc9612p__send_8cpp.html#a98f0d289faa791f0d8c593ad13c4a2cb">message</a>[0], <a class="code" href="kpc9612p__send_8cpp.html#a98f0d289faa791f0d8c593ad13c4a2cb">message</a>.size());</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                <span class="comment">//            strcat(post,message);</span></div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;            }</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;            iretn = sendto(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].cudp,       <span class="comment">// socket</span></div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                    (<span class="keyword">const</span> <span class="keywordtype">char</span> *)post,                         <span class="comment">// buffer to send</span></div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                    nbytes+<a class="code" href="kpc9612p__send_8cpp.html#a98f0d289faa791f0d8c593ad13c4a2cb">message</a>.size(),                      <span class="comment">// size of buffer</span></div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;                    0,                                          <span class="comment">// flags</span></div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;                    (<span class="keyword">struct </span>sockaddr *)&amp;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].baddr, <span class="comment">// socket address</span></div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;                    <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in)                  <span class="comment">// size of address to socket pointer</span></div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                    );</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        }</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;        <span class="keywordflow">if</span> (iretn&lt;0)</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        {</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;<span class="preprocessor">#ifdef COSMOS_WIN_OS</span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;            <span class="keywordflow">return</span>(-WSAGetLastError());</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;            <span class="keywordflow">return</span> (-errno);</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        }</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="rw__test_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="rw__test_8cpp_html_afece067d35cd26a458c56fa8f276e734"><div class="ttname"><a href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a></div><div class="ttdeci">int iretn</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="structcosmosstruc_html_af4e942210d74ec7b18eed16914c366ce"><div class="ttname"><a href="structcosmosstruc.html#af4e942210d74ec7b18eed16914c366ce">cosmosstruc::node</a></div><div class="ttdeci">nodestruc node</div><div class="ttdoc">Structure for summary information in node. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2049</div></div>
<div class="ttc" id="structnodestruc_html_a1ed0eb848bb5534b7844c13a2727b11e"><div class="ttname"><a href="structnodestruc.html#a1ed0eb848bb5534b7844c13a2727b11e">nodestruc::utcoffset</a></div><div class="ttdeci">double utcoffset</div><div class="ttdoc">MJD Offset between system UT and simulated UT. </div><div class="ttdef"><b>Definition:</b> jsondef.h:1693</div></div>
<div class="ttc" id="kpc9612p__send_8cpp_html_a98f0d289faa791f0d8c593ad13c4a2cb"><div class="ttname"><a href="kpc9612p__send_8cpp.html#a98f0d289faa791f0d8c593ad13c4a2cb">message</a></div><div class="ttdeci">uint8_t message[300]</div><div class="ttdef"><b>Definition:</b> kpc9612p_send.cpp:36</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga1e156ba9e17f232c99927228f658742a"><div class="ttname"><a href="group__agentclass__functions.html#ga1e156ba9e17f232c99927228f658742a">Cosmos::Agent::post</a></div><div class="ttdeci">int32_t post(messstruc mess)</div><div class="ttdoc">Post a Cosmos::Agent::messstruc. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1730</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
<div class="ttc" id="group__jsonlib__constants_html_ga855b38da23dc26339aa8a5d726aab4a6"><div class="ttname"><a href="group__jsonlib__constants.html#ga855b38da23dc26339aa8a5d726aab4a6">AGENTMAXBUFFER</a></div><div class="ttdeci">#define AGENTMAXBUFFER</div><div class="ttdoc">Entire cosmosstruc. </div><div class="ttdef"><b>Definition:</b> jsondef.h:463</div></div>
<div class="ttc" id="group__error__defines_html_ga68e4d86d07bd5bc53d49a02f37607b09"><div class="ttname"><a href="group__error__defines.html#ga68e4d86d07bd5bc53d49a02f37607b09">AGENT_ERROR_BUFLEN</a></div><div class="ttdeci">#define AGENT_ERROR_BUFLEN</div><div class="ttdef"><b>Definition:</b> cosmos-errno.h:110</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaa27dffcf08893f097bcedbfaa94a3962"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa27dffcf08893f097bcedbfaa94a3962">&#9670;&nbsp;</a></span>unpublish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::unpublish </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close COSMOS output channel. </p>
<p>Close previously opened publication channels and recover any allocated resources. </p><dl class="section return"><dt>Returns</dt><dd>0, otherwise negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    {</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a> == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;        {</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        }</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt; ++<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;        {</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;            CLOSE_SOCKET(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].cudp);</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        }</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="rw__test_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga5fde2392e8658597c958c5cf31b6c1d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5fde2392e8658597c958c5cf31b6c1d5">&#9670;&nbsp;</a></span>subscribe() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::subscribe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__socketlib__constants.html#gac3df430da2e0e847835025092b9dfdcf">NetworkType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>usectimeo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open COSMOS channel for polling. </p>
<p>This establishes a multicast channel for subscribing to COSMOS messages. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>0=Multicast, 1=Broadcast UDP, 2=Broadcast CSP. </td></tr>
    <tr><td class="paramname">address</td><td>The IP Multicast address of the channel. </td></tr>
    <tr><td class="paramname">port</td><td>The port to use for the channel. </td></tr>
    <tr><td class="paramname">usectimeo</td><td>Blocking read timeout in micro seconds. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, otherwise negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    {</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;        int32_t <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a> = 0;</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;        <span class="comment">// ?? this is preventing from running socket_open if</span></div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;        <span class="comment">// for some reason cinfo-&gt;agent[0].sub.cport was ill initialized</span></div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;<span class="preprocessor">#ifndef COSMOS_WIN_BUILD_MSVC</span></div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].sub.cport)</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        <span class="keywordflow">if</span> ((iretn=<a class="code" href="group__socketlib__functions.html#gabb124101a33109d7b58c6e831cc79e03">socket_open</a>(&amp;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].sub,type,<a class="code" href="netperf__listen_8cpp.html#af3b7e39acd3b2652e57c54093e6beaef">address</a>,<a class="code" href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>,<a class="code" href="group__socketlib__constants.html#ga79ccaa6b292ff02f81a7144830bea4a2">SOCKET_LISTEN</a>,<a class="code" href="group__socketlib__constants.html#gac29168deb0d3412d231cca522ece72bb">SOCKET_BLOCKING</a>, usectimeo)) &lt; 0)</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;        {</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;            <span class="keywordflow">return</span> (iretn);</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;        }</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="rw__test_8cpp_html_afece067d35cd26a458c56fa8f276e734"><div class="ttname"><a href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a></div><div class="ttdeci">int iretn</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="netperf__listen_8cpp_html_af3b7e39acd3b2652e57c54093e6beaef"><div class="ttname"><a href="netperf__listen_8cpp.html#af3b7e39acd3b2652e57c54093e6beaef">address</a></div><div class="ttdeci">char address[]</div><div class="ttdef"><b>Definition:</b> netperf_listen.cpp:69</div></div>
<div class="ttc" id="group__socketlib__constants_html_gac29168deb0d3412d231cca522ece72bb"><div class="ttname"><a href="group__socketlib__constants.html#gac29168deb0d3412d231cca522ece72bb">SOCKET_BLOCKING</a></div><div class="ttdeci">#define SOCKET_BLOCKING</div><div class="ttdoc">Blocking Agent. </div><div class="ttdef"><b>Definition:</b> socketlib.h:78</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
<div class="ttc" id="group__socketlib__constants_html_ga79ccaa6b292ff02f81a7144830bea4a2"><div class="ttname"><a href="group__socketlib__constants.html#ga79ccaa6b292ff02f81a7144830bea4a2">SOCKET_LISTEN</a></div><div class="ttdeci">#define SOCKET_LISTEN</div><div class="ttdoc">Listen followed by optional talk (recvfrom INADDRANY) </div><div class="ttdef"><b>Definition:</b> socketlib.h:84</div></div>
<div class="ttc" id="group__socketlib__functions_html_gabb124101a33109d7b58c6e831cc79e03"><div class="ttname"><a href="group__socketlib__functions.html#gabb124101a33109d7b58c6e831cc79e03">socket_open</a></div><div class="ttdeci">int32_t socket_open(socket_channel *channel, NetworkType ntype, const char *address, uint16_t port, uint16_t role, bool blocking, uint32_t usectimeo, uint32_t rcvbuf, uint32_t sndbuf)</div><div class="ttdoc">Open UDP socket. </div><div class="ttdef"><b>Definition:</b> socketlib.cpp:51</div></div>
<div class="ttc" id="netperf__listen_8cpp_html_a8e0798404bf2cf5dabb84c5ba9a4f236"><div class="ttname"><a href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> netperf_listen.cpp:70</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gae7537a95956006a6b7b5270b7f120adf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae7537a95956006a6b7b5270b7f120adf">&#9670;&nbsp;</a></span>subscribe() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::subscribe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__socketlib__constants.html#gac3df430da2e0e847835025092b9dfdcf">NetworkType</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open COSMOS channel for polling with 100 usec timeout. </p>
<p>This establishes a multicast channel for subscribing to COSMOS messages. The timeout is set to 100 usec. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>0=Multicast, 1=Broadcast UDP, 2=Broadcast CSP. </td></tr>
    <tr><td class="paramname">address</td><td>The IP Multicast address of the channel. </td></tr>
    <tr><td class="paramname">port</td><td>The port to use for the channel. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0, otherwise negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    {</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;        int32_t <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a> = 0;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;        <span class="keywordflow">if</span> ((iretn=<a class="code" href="group__agentclass__functions.html#gae7537a95956006a6b7b5270b7f120adf">Agent::subscribe</a>(type, <a class="code" href="netperf__listen_8cpp.html#af3b7e39acd3b2652e57c54093e6beaef">address</a>, <a class="code" href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>, 100)) &lt; 0)</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;        {</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;            <span class="keywordflow">return</span> (iretn);</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;        }</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    }</div><div class="ttc" id="rw__test_8cpp_html_afece067d35cd26a458c56fa8f276e734"><div class="ttname"><a href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a></div><div class="ttdeci">int iretn</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="group__agentclass__functions_html_gae7537a95956006a6b7b5270b7f120adf"><div class="ttname"><a href="group__agentclass__functions.html#gae7537a95956006a6b7b5270b7f120adf">Cosmos::Agent::subscribe</a></div><div class="ttdeci">int32_t subscribe(NetworkType type, char *address, uint16_t port)</div><div class="ttdoc">Open COSMOS channel for polling with 100 usec timeout. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:1912</div></div>
<div class="ttc" id="netperf__listen_8cpp_html_af3b7e39acd3b2652e57c54093e6beaef"><div class="ttname"><a href="netperf__listen_8cpp.html#af3b7e39acd3b2652e57c54093e6beaef">address</a></div><div class="ttdeci">char address[]</div><div class="ttdef"><b>Definition:</b> netperf_listen.cpp:69</div></div>
<div class="ttc" id="netperf__listen_8cpp_html_a8e0798404bf2cf5dabb84c5ba9a4f236"><div class="ttname"><a href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> netperf_listen.cpp:70</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga7ea40efbdd8401534041b27b6036e293"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7ea40efbdd8401534041b27b6036e293">&#9670;&nbsp;</a></span>unsubscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::unsubscribe </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close COSMOS subscription channel. </p>
<p>Close channel previously opened for polling for messages and recover resources. </p><dl class="section return"><dt>Returns</dt><dd>0, otherwise negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    {</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a> != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;        {</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;            CLOSE_SOCKET(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].sub.cudp);</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;        }</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga3df5bd25d96922bd613cbd888cd765ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3df5bd25d96922bd613cbd888cd765ea">&#9670;&nbsp;</a></span>poll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::poll </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_cosmos_1_1_agent_1_1messstruc.html">messstruc</a> &amp;&#160;</td>
          <td class="paramname"><em>mess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3">AgentMessage</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>waitsec</em> = <code>1.</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Listen for message. </p>
<p>Poll the subscription channel for the requested amount of time. Return as soon as a single message comes in, or the timer runs out. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mess</td><td><a class="el" href="struct_cosmos_1_1_agent_1_1messstruc.html" title="Storage for messages. ">Cosmos::Agent::messstruc</a> for storing incoming message. </td></tr>
    <tr><td class="paramname">type</td><td>Type of message to look for, taken from <a class="el" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3" title="Type of Agent Message. Types &gt; 127 are binary. ">Cosmos::Agent::AgentMessage</a>. </td></tr>
    <tr><td class="paramname">waitsec</td><td>Number of seconds in timer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If a message comes in, return its type. If none comes in, return zero, otherwise negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    {</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;        <span class="keywordtype">int</span> nbytes;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;        uint8_t input[<a class="code" href="group__jsonlib__constants.html#ga855b38da23dc26339aa8a5d726aab4a6">AGENTMAXBUFFER</a>+1];</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a> == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;        {</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__error__defines.html#ga22b3434fe3fb79abbf6f73209dea5578">AGENT_ERROR_NULL</a>;</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;        }</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].sub.cport)</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;            <span class="keywordflow">return</span> (<a class="code" href="group__error__defines.html#ga366feeb37c3d31edddb4d6e711ab56c0">AGENT_ERROR_CHANNEL</a>);</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;        <a class="code" href="class_elapsed_time.html">ElapsedTime</a> ep;</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;        ep.<a class="code" href="class_elapsed_time.html#aac8472a6b2b676e4b824e4679d2be63a">start</a>();</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;        <span class="keywordflow">do</span></div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;        {</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;            nbytes = 0;</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;            <span class="keywordflow">switch</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].sub.type)</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;            {</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32">NetworkType::MULTICAST</a>:</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9">NetworkType::UDP</a>:</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;                nbytes = recvfrom(<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].sub.cudp, (<span class="keywordtype">char</span> *)input,<a class="code" href="group__jsonlib__constants.html#ga855b38da23dc26339aa8a5d726aab4a6">AGENTMAXBUFFER</a>, 0, (<span class="keyword">struct</span> sockaddr *)&amp;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].sub.caddr, (socklen_t *)&amp;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].sub.addrlen);</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;                <span class="comment">// Return if port and address are our own</span></div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;                <span class="keywordflow">for</span> (uint16_t <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].ifcnt; ++<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;                {</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].sub.caddr.sin_port == <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].caddr.sin_port &amp;&amp;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;                        <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].sub.caddr.sin_addr.s_addr == <a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">agent</a>[0].pub[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].caddr.sin_addr.s_addr)</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;                    {</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;                        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;                    }</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;                }</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;            }</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;            <span class="keywordflow">if</span> (nbytes &gt; 0)</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;            {</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;                <span class="keywordflow">if</span> (type == <a class="code" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3a5fb1f955b45e38e31789286a1790398d">Agent::AgentMessage::ALL</a> || type == (<a class="code" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3">AgentMessage</a>)input[0])</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;                {</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;                    <span class="comment">// Determine if old or new message</span></div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;                    uint8_t start_byte;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;                    <span class="keywordflow">if</span> (input[1] == <span class="charliteral">&#39;{&#39;</span>)</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;                    {</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;                        start_byte = 1;</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;                    }</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;                    {</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;                        start_byte = 3;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;                    }</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;                    <span class="comment">// Provide support for older messages that did not include jlength</span></div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;                    <span class="keywordflow">if</span> (start_byte &gt; 1)</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;                    {</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;                        mess.meta.type = (<a class="code" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3">AgentMessage</a>)input[0];</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;                        mess.meta.jlength = input[1] + 256 * input[2];</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;                    }</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;                    {</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;                        mess.meta.type = (<a class="code" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3">AgentMessage</a>)(input[0] + 1);</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;                        mess.meta.jlength = nbytes;</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;                    }</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;                    <span class="comment">// Copy message parts to ring, placing in appropriate buffers.</span></div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;                    <span class="comment">// First: JSON header</span></div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;                    mess.jdata.assign((<span class="keyword">const</span> <span class="keywordtype">char</span> *)&amp;input[start_byte], mess.meta.jlength);</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;                    <span class="comment">// Next: ASCII or BINARY message, depending on message type.</span></div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;                    <span class="keywordflow">if</span> (mess.meta.type &lt; <a class="code" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3a98ad0e8750ae10ad556ed7a62affb452">Agent::AgentMessage::BINARY</a>)</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;                    {</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;                        mess.adata.assign((<span class="keyword">const</span> <span class="keywordtype">char</span> *)&amp;input[start_byte+mess.meta.jlength], nbytes - (start_byte + mess.meta.jlength));</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;                    }</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;                    {</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;                        mess.bdata.resize(nbytes - (start_byte + mess.meta.jlength));</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;                        memcpy(mess.bdata.data(), &amp;input[start_byte + mess.meta.jlength], nbytes - (start_byte + mess.meta.jlength));</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;                    }</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                    <span class="comment">// Extract meta data</span></div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                    <span class="keywordflow">if</span> (mess.jdata.find(<span class="stringliteral">&quot;agent_bprd&quot;</span>) == string::npos)</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                    {</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;                        sscanf((<span class="keyword">const</span> <span class="keywordtype">char</span> *)mess.jdata.data(), <span class="stringliteral">&quot;{\&quot;agent_utc\&quot;:%lg}{\&quot;agent_node\&quot;:\&quot;%40[^\&quot;]\&quot;}{\&quot;agent_proc\&quot;:\&quot;%40[^\&quot;]\&quot;}{\&quot;agent_addr\&quot;:\&quot;%17[^\&quot;]\&quot;}{\&quot;agent_port\&quot;:%hu}{\&quot;agent_bsz\&quot;:%u}{\&quot;agent_cpu\&quot;:%f}{\&quot;agent_memory\&quot;:%f}{\&quot;agent_jitter\&quot;:%lf}&quot;</span>,</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                               &amp;mess.meta.beat.utc,</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;                               mess.meta.beat.node,</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                               mess.meta.beat.proc,</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;                               mess.meta.beat.addr,</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;                               &amp;mess.meta.beat.port,</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;                               &amp;mess.meta.beat.bsz,</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;                               &amp;mess.meta.beat.cpu,</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;                               &amp;mess.meta.beat.memory,</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;                               &amp;mess.meta.beat.jitter);</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;                    }</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;                    {</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;                        sscanf((<span class="keyword">const</span> <span class="keywordtype">char</span> *)mess.jdata.data(), <span class="stringliteral">&quot;{\&quot;agent_utc\&quot;:%lg}{\&quot;agent_node\&quot;:\&quot;%40[^\&quot;]\&quot;}{\&quot;agent_proc\&quot;:\&quot;%40[^\&quot;]\&quot;}{\&quot;agent_addr\&quot;:\&quot;%17[^\&quot;]\&quot;}{\&quot;agent_port\&quot;:%hu}{\&quot;agent_bprd\&quot;:%lf}{\&quot;agent_bsz\&quot;:%u}{\&quot;agent_cpu\&quot;:%f}{\&quot;agent_memory\&quot;:%f}{\&quot;agent_jitter\&quot;:%lf}&quot;</span>,</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;                               &amp;mess.meta.beat.utc,</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;                               mess.meta.beat.node,</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;                               mess.meta.beat.proc,</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;                               mess.meta.beat.addr,</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;                               &amp;mess.meta.beat.port,</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;                               &amp;mess.meta.beat.bprd,</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;                               &amp;mess.meta.beat.bsz,</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;                               &amp;mess.meta.beat.cpu,</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;                               &amp;mess.meta.beat.memory,</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;                               &amp;mess.meta.beat.jitter);</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                    }</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;                    <span class="keywordflow">return</span> ((<span class="keywordtype">int</span>)mess.meta.type);</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                }</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;            }</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;            <span class="keywordflow">if</span> (ep.<a class="code" href="class_elapsed_time.html#ac75b9ada495d638999905483340e3534">split</a>() &gt;= <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>)</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;            {</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;                nbytes = 0;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;            }</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;            {</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;                COSMOS_SLEEP(.1);</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;            }</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;        } <span class="keywordflow">while</span> (nbytes != 0);</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="group__error__defines_html_ga22b3434fe3fb79abbf6f73209dea5578"><div class="ttname"><a href="group__error__defines.html#ga22b3434fe3fb79abbf6f73209dea5578">AGENT_ERROR_NULL</a></div><div class="ttdeci">#define AGENT_ERROR_NULL</div><div class="ttdef"><b>Definition:</b> cosmos-errno.h:111</div></div>
<div class="ttc" id="group__socketlib__constants_html_ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9"><div class="ttname"><a href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9">NetworkType::UDP</a></div><div class="ttdoc">Agent socket using Unicast UDP. </div></div>
<div class="ttc" id="rw__test_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a59e6f4e4d4501a12b65cb790a93471b3a98ad0e8750ae10ad556ed7a62affb452"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3a98ad0e8750ae10ad556ed7a62affb452">Cosmos::Agent::AgentMessage::BINARY</a></div></div>
<div class="ttc" id="group__error__defines_html_ga366feeb37c3d31edddb4d6e711ab56c0"><div class="ttname"><a href="group__error__defines.html#ga366feeb37c3d31edddb4d6e711ab56c0">AGENT_ERROR_CHANNEL</a></div><div class="ttdeci">#define AGENT_ERROR_CHANNEL</div><div class="ttdef"><b>Definition:</b> cosmos-errno.h:109</div></div>
<div class="ttc" id="class_elapsed_time_html_aac8472a6b2b676e4b824e4679d2be63a"><div class="ttname"><a href="class_elapsed_time.html#aac8472a6b2b676e4b824e4679d2be63a">ElapsedTime::start</a></div><div class="ttdeci">void start()</div><div class="ttdoc">ElapsedTime::start. </div><div class="ttdef"><b>Definition:</b> elapsedtime.cpp:203</div></div>
<div class="ttc" id="agent__add__soh_8cpp_html_a2ad8d53c30be4a794997911a7277c438"><div class="ttname"><a href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a></div><div class="ttdeci">int waitsec</div><div class="ttdef"><b>Definition:</b> agent_add_soh.cpp:56</div></div>
<div class="ttc" id="class_elapsed_time_html"><div class="ttname"><a href="class_elapsed_time.html">ElapsedTime</a></div><div class="ttdef"><b>Definition:</b> elapsedtime.h:62</div></div>
<div class="ttc" id="structcosmosstruc_html_af0ebba80f291a4ea1fad07d80fd0bd6d"><div class="ttname"><a href="structcosmosstruc.html#af0ebba80f291a4ea1fad07d80fd0bd6d">cosmosstruc::agent</a></div><div class="ttdeci">vector&lt; agentstruc &gt; agent</div><div class="ttdoc">Single entry vector for agent information. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2069</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a59e6f4e4d4501a12b65cb790a93471b3"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3">Cosmos::Agent::AgentMessage</a></div><div class="ttdeci">AgentMessage</div><div class="ttdoc">Type of Agent Message. Types &gt; 127 are binary. </div><div class="ttdef"><b>Definition:</b> agentclass.h:199</div></div>
<div class="ttc" id="group__jsonlib__constants_html_ga855b38da23dc26339aa8a5d726aab4a6"><div class="ttname"><a href="group__jsonlib__constants.html#ga855b38da23dc26339aa8a5d726aab4a6">AGENTMAXBUFFER</a></div><div class="ttdeci">#define AGENTMAXBUFFER</div><div class="ttdoc">Entire cosmosstruc. </div><div class="ttdef"><b>Definition:</b> jsondef.h:463</div></div>
<div class="ttc" id="group__socketlib__constants_html_ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32"><div class="ttname"><a href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32">NetworkType::MULTICAST</a></div><div class="ttdoc">Agent socket using Multicast UDP. </div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a59e6f4e4d4501a12b65cb790a93471b3a5fb1f955b45e38e31789286a1790398d"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3a5fb1f955b45e38e31789286a1790398d">Cosmos::Agent::AgentMessage::ALL</a></div><div class="ttdoc">All Message types. </div></div>
<div class="ttc" id="class_elapsed_time_html_ac75b9ada495d638999905483340e3534"><div class="ttname"><a href="class_elapsed_time.html#ac75b9ada495d638999905483340e3534">ElapsedTime::split</a></div><div class="ttdeci">double split()</div><div class="ttdoc">ElapsedTime::split, gets the current elapsed time since the start() </div><div class="ttdef"><b>Definition:</b> elapsedtime.cpp:234</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga2bfd2b74883eb369dd1fe7ef1e729362"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2bfd2b74883eb369dd1fe7ef1e729362">&#9670;&nbsp;</a></span>readring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::readring </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_cosmos_1_1_agent_1_1messstruc.html">messstruc</a> &amp;&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3">AgentMessage</a>&#160;</td>
          <td class="paramname"><em>type</em> = <code><a class="el" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3a5fb1f955b45e38e31789286a1790398d">Agent::AgentMessage::ALL</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>waitsec</em> = <code>1.</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_agent.html#a3458c617269e7e40b1c1d256dbd8d791">Where</a>&#160;</td>
          <td class="paramname"><em>where</em> = <code><a class="el" href="class_cosmos_1_1_agent.html#a3458c617269e7e40b1c1d256dbd8d791ae15e216fc1c639f787b1231ecdfa1bf8">Where::HEAD</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check Ring for message. </p>
<p>Check the message ring for the requested amount of time. Return as soon as a message of the right type is available, or the timer runs out. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>Vector for storing incoming message. </td></tr>
    <tr><td class="paramname">type</td><td>Type of message to look for, taken from <a class="el" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3" title="Type of Agent Message. Types &gt; 127 are binary. ">Cosmos::Agent::AgentMessage</a>. </td></tr>
    <tr><td class="paramname">waitsec</td><td>Number of seconds in timer. If 0, return last message in ring immediatelly. </td></tr>
    <tr><td class="paramname">where</td><td>One of <a class="el" href="class_cosmos_1_1_agent.html#a3458c617269e7e40b1c1d256dbd8d791ae15e216fc1c639f787b1231ecdfa1bf8">Where::HEAD</a> or <a class="el" href="class_cosmos_1_1_agent.html#a3458c617269e7e40b1c1d256dbd8d791a026ba6d3d7dd81197fee244bb8c7fc6d">Where::TAIL</a>, indicating whether to start at the head or tail of the ring. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If a message comes in, return its type. If none comes in, return zero, otherwise negative error. </dd></dl>
<div class="fragment"><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    {</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a> &lt; 0.)</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;        {</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;            <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a> = 0.;</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;        }</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">cinfo</a> == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        {</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__error__defines.html#ga22b3434fe3fb79abbf6f73209dea5578">AGENT_ERROR_NULL</a>;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;        }</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;        <span class="keywordflow">if</span> (where == <a class="code" href="class_cosmos_1_1_agent.html#a3458c617269e7e40b1c1d256dbd8d791ae15e216fc1c639f787b1231ecdfa1bf8">Where::HEAD</a>)</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;        {</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;            <a class="code" href="class_cosmos_1_1_agent.html#a3c61036bb31e5b3b84edfe9eaa018bc5">message_tail</a> = <a class="code" href="class_cosmos_1_1_agent.html#aa65ca301cc0cf9e8335da1929475a779">message_head</a> - 1;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a3c61036bb31e5b3b84edfe9eaa018bc5">message_tail</a> &gt;= <a class="code" href="class_cosmos_1_1_agent.html#a6da6dccc08763a09b8a2c7cac1891ad7">message_ring</a>.size())</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;            {</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                <a class="code" href="class_cosmos_1_1_agent.html#a3c61036bb31e5b3b84edfe9eaa018bc5">message_tail</a> = <a class="code" href="class_cosmos_1_1_agent.html#a6da6dccc08763a09b8a2c7cac1891ad7">message_ring</a>.size() - 1;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;            }</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;        }</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;        <a class="code" href="class_elapsed_time.html">ElapsedTime</a> ep;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;        ep.<a class="code" href="class_elapsed_time.html#aac8472a6b2b676e4b824e4679d2be63a">start</a>();</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;        <span class="keywordflow">do</span></div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;        {</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#aa65ca301cc0cf9e8335da1929475a779">message_head</a> != <a class="code" href="class_cosmos_1_1_agent.html#a3c61036bb31e5b3b84edfe9eaa018bc5">message_tail</a>)</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;            {</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;                ++<a class="code" href="class_cosmos_1_1_agent.html#a3c61036bb31e5b3b84edfe9eaa018bc5">message_tail</a>;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a3c61036bb31e5b3b84edfe9eaa018bc5">message_tail</a> &gt;= <a class="code" href="class_cosmos_1_1_agent.html#a6da6dccc08763a09b8a2c7cac1891ad7">message_ring</a>.size())</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;                {</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;                    <a class="code" href="class_cosmos_1_1_agent.html#a3c61036bb31e5b3b84edfe9eaa018bc5">message_tail</a> = 0;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;                }</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;                <span class="keywordflow">if</span> (type == <a class="code" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3a5fb1f955b45e38e31789286a1790398d">Agent::AgentMessage::ALL</a> || type == (<a class="code" href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3">Agent::AgentMessage</a>)<a class="code" href="class_cosmos_1_1_agent.html#a6da6dccc08763a09b8a2c7cac1891ad7">message_ring</a>[<a class="code" href="class_cosmos_1_1_agent.html#a3c61036bb31e5b3b84edfe9eaa018bc5">message_tail</a>].meta.type)</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;                {</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;                    <span class="comment">// Copy message.</span></div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                    <a class="code" href="kpc9612p__send_8cpp.html#a98f0d289faa791f0d8c593ad13c4a2cb">message</a> = <a class="code" href="class_cosmos_1_1_agent.html#a6da6dccc08763a09b8a2c7cac1891ad7">message_ring</a>[<a class="code" href="class_cosmos_1_1_agent.html#a3c61036bb31e5b3b84edfe9eaa018bc5">message_tail</a>];</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;                    <span class="keywordflow">return</span> ((<span class="keywordtype">int</span>)<a class="code" href="kpc9612p__send_8cpp.html#a98f0d289faa791f0d8c593ad13c4a2cb">message</a>.meta.type);</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;                }</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;            }</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;            <span class="keywordflow">if</span> (ep.<a class="code" href="class_elapsed_time.html#ac75b9ada495d638999905483340e3534">split</a>() &lt; <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>)</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;            {</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;                COSMOS_SLEEP(.1);</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;            }</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;        } <span class="keywordflow">while</span> (ep.<a class="code" href="class_elapsed_time.html#ac75b9ada495d638999905483340e3534">split</a>() &lt; <a class="code" href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a>);</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a916218dc517664541b4b443aa8bb333a"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a916218dc517664541b4b443aa8bb333a">Cosmos::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:321</div></div>
<div class="ttc" id="group__error__defines_html_ga22b3434fe3fb79abbf6f73209dea5578"><div class="ttname"><a href="group__error__defines.html#ga22b3434fe3fb79abbf6f73209dea5578">AGENT_ERROR_NULL</a></div><div class="ttdeci">#define AGENT_ERROR_NULL</div><div class="ttdef"><b>Definition:</b> cosmos-errno.h:111</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a6da6dccc08763a09b8a2c7cac1891ad7"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a6da6dccc08763a09b8a2c7cac1891ad7">Cosmos::Agent::message_ring</a></div><div class="ttdeci">vector&lt; messstruc &gt; message_ring</div><div class="ttdoc">Ring buffer for incoming messages. </div><div class="ttdef"><b>Definition:</b> agentclass.h:329</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a3c61036bb31e5b3b84edfe9eaa018bc5"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a3c61036bb31e5b3b84edfe9eaa018bc5">Cosmos::Agent::message_tail</a></div><div class="ttdeci">size_t message_tail</div><div class="ttdoc">Last message rad in message ring buffer. </div><div class="ttdef"><b>Definition:</b> agentclass.h:333</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_aa65ca301cc0cf9e8335da1929475a779"><div class="ttname"><a href="class_cosmos_1_1_agent.html#aa65ca301cc0cf9e8335da1929475a779">Cosmos::Agent::message_head</a></div><div class="ttdeci">size_t message_head</div><div class="ttdoc">Last message placed in message ring buffer. </div><div class="ttdef"><b>Definition:</b> agentclass.h:331</div></div>
<div class="ttc" id="class_elapsed_time_html_aac8472a6b2b676e4b824e4679d2be63a"><div class="ttname"><a href="class_elapsed_time.html#aac8472a6b2b676e4b824e4679d2be63a">ElapsedTime::start</a></div><div class="ttdeci">void start()</div><div class="ttdoc">ElapsedTime::start. </div><div class="ttdef"><b>Definition:</b> elapsedtime.cpp:203</div></div>
<div class="ttc" id="kpc9612p__send_8cpp_html_a98f0d289faa791f0d8c593ad13c4a2cb"><div class="ttname"><a href="kpc9612p__send_8cpp.html#a98f0d289faa791f0d8c593ad13c4a2cb">message</a></div><div class="ttdeci">uint8_t message[300]</div><div class="ttdef"><b>Definition:</b> kpc9612p_send.cpp:36</div></div>
<div class="ttc" id="agent__add__soh_8cpp_html_a2ad8d53c30be4a794997911a7277c438"><div class="ttname"><a href="agent__add__soh_8cpp.html#a2ad8d53c30be4a794997911a7277c438">waitsec</a></div><div class="ttdeci">int waitsec</div><div class="ttdef"><b>Definition:</b> agent_add_soh.cpp:56</div></div>
<div class="ttc" id="class_elapsed_time_html"><div class="ttname"><a href="class_elapsed_time.html">ElapsedTime</a></div><div class="ttdef"><b>Definition:</b> elapsedtime.h:62</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a59e6f4e4d4501a12b65cb790a93471b3"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3">Cosmos::Agent::AgentMessage</a></div><div class="ttdeci">AgentMessage</div><div class="ttdoc">Type of Agent Message. Types &gt; 127 are binary. </div><div class="ttdef"><b>Definition:</b> agentclass.h:199</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a3458c617269e7e40b1c1d256dbd8d791ae15e216fc1c639f787b1231ecdfa1bf8"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a3458c617269e7e40b1c1d256dbd8d791ae15e216fc1c639f787b1231ecdfa1bf8">Cosmos::Agent::Where::HEAD</a></div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a59e6f4e4d4501a12b65cb790a93471b3a5fb1f955b45e38e31789286a1790398d"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a59e6f4e4d4501a12b65cb790a93471b3a5fb1f955b45e38e31789286a1790398d">Cosmos::Agent::AgentMessage::ALL</a></div><div class="ttdoc">All Message types. </div></div>
<div class="ttc" id="class_elapsed_time_html_ac75b9ada495d638999905483340e3534"><div class="ttname"><a href="class_elapsed_time.html#ac75b9ada495d638999905483340e3534">ElapsedTime::split</a></div><div class="ttdeci">double split()</div><div class="ttdoc">ElapsedTime::split, gets the current elapsed time since the start() </div><div class="ttdef"><b>Definition:</b> elapsedtime.cpp:234</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga4df93666026e9180b6cfe9c03684bf21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4df93666026e9180b6cfe9c03684bf21">&#9670;&nbsp;</a></span>resizering()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::resizering </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>newsize</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Change size of message ring. Resize the message ring to hold a new maximum number of messages. Adjust the message pointers in the ring to be appropriate. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newsize</td><td>New maximum message count. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Negative error, or zero. </dd></dl>
<div class="fragment"><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    {</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#aa65ca301cc0cf9e8335da1929475a779">message_head</a> &gt;= newsize)</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;        {</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;            <a class="code" href="class_cosmos_1_1_agent.html#aa65ca301cc0cf9e8335da1929475a779">message_head</a> = 0;</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;        }</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_agent.html#a3c61036bb31e5b3b84edfe9eaa018bc5">message_tail</a> &gt;= newsize)</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;        {</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;            <a class="code" href="class_cosmos_1_1_agent.html#a3c61036bb31e5b3b84edfe9eaa018bc5">message_tail</a> = newsize - 1;</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;        }</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a3c61036bb31e5b3b84edfe9eaa018bc5"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a3c61036bb31e5b3b84edfe9eaa018bc5">Cosmos::Agent::message_tail</a></div><div class="ttdeci">size_t message_tail</div><div class="ttdoc">Last message rad in message ring buffer. </div><div class="ttdef"><b>Definition:</b> agentclass.h:333</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_aa65ca301cc0cf9e8335da1929475a779"><div class="ttname"><a href="class_cosmos_1_1_agent.html#aa65ca301cc0cf9e8335da1929475a779">Cosmos::Agent::message_head</a></div><div class="ttdeci">size_t message_head</div><div class="ttdoc">Last message placed in message ring buffer. </div><div class="ttdef"><b>Definition:</b> agentclass.h:331</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga0deaf958242b89a436e7cacc338644be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0deaf958242b89a436e7cacc338644be">&#9670;&nbsp;</a></span>clearring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::clearring </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Empty message ring. Set the internal pointers such that it appears that we have read any messages that are in the message ring. This has the effect of emptying the message ring as far as <a class="el" href="group__agentclass__functions.html#ga2bfd2b74883eb369dd1fe7ef1e729362" title="Check Ring for message. ">Cosmos::Agent::readring</a> is concerned. </p><dl class="section return"><dt>Returns</dt><dd>Negative error or zero. </dd></dl>
<div class="fragment"><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    {</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;        <a class="code" href="class_cosmos_1_1_agent.html#a3c61036bb31e5b3b84edfe9eaa018bc5">message_tail</a> = <a class="code" href="class_cosmos_1_1_agent.html#aa65ca301cc0cf9e8335da1929475a779">message_head</a>;</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a3c61036bb31e5b3b84edfe9eaa018bc5"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a3c61036bb31e5b3b84edfe9eaa018bc5">Cosmos::Agent::message_tail</a></div><div class="ttdeci">size_t message_tail</div><div class="ttdoc">Last message rad in message ring buffer. </div><div class="ttdef"><b>Definition:</b> agentclass.h:333</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_aa65ca301cc0cf9e8335da1929475a779"><div class="ttname"><a href="class_cosmos_1_1_agent.html#aa65ca301cc0cf9e8335da1929475a779">Cosmos::Agent::message_head</a></div><div class="ttdeci">size_t message_head</div><div class="ttdoc">Last message placed in message ring buffer. </div><div class="ttdef"><b>Definition:</b> agentclass.h:331</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga4484fee24c2b15297262d124e75b5606"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4484fee24c2b15297262d124e75b5606">&#9670;&nbsp;</a></span>getNode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string Cosmos::Agent::getNode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Listen for heartbeat. </p>
<p>Poll the subscription channel until you receive a heartbeat message, or the timer runs out. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">waitsec</td><td>Number of seconds to wait before timing out. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structbeatstruc.html">beatstruc</a> with acquired heartbeat. The UTC will be set to 0 if no heartbeat was acquired.Listen for Time <pre class="fragment">Poll the subscription channel until you receive a time message, or the timer runs out.
</pre> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">waitsec</td><td>Number of seconds to wait before timing out. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structtimestruc.html">timestruc</a> with acquired time. The UTC will be set to 0 if no heartbeat was acquired.Listen for Location <pre class="fragment">Poll the subscription channel until you receive a location message, or the timer runs out.
</pre> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">waitsec</td><td>Number of seconds to wait before timing out. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structlocstruc.html">locstruc</a> with acquired location. The UTC will be set to 0 if no heartbeat was acquired.Listen for Beacon <pre class="fragment">Poll the subscription channel until you receive a info message, or the timer runs out.
</pre> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">waitsec</td><td>Number of seconds to wait before timing out. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structnodestruc.html">nodestruc</a> with acquired info. The UTC will be set to 0 if no info was acquired.Listen for IMU device <pre class="fragment">Poll the subscription channel until you receive a IMU device message, or the timer runs out.
</pre> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">waitsec</td><td>Number of seconds to wait before timing out. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structbeatstruc.html">beatstruc</a> with acquired heartbeat. The UTC will be set to 0 if no heartbeat was acquired. </dd></dl>
<div class="fragment"><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;        {</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_cosmos_1_1_agent.html#a71125ee955b8908b99fb7fb451acda4f">nodeName</a>;</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;        }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a71125ee955b8908b99fb7fb451acda4f"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a71125ee955b8908b99fb7fb451acda4f">Cosmos::Agent::nodeName</a></div><div class="ttdeci">string nodeName</div><div class="ttdef"><b>Definition:</b> agentclass.h:342</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gab060a3fcc706bccdfaff094bed2aae7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab060a3fcc706bccdfaff094bed2aae7f">&#9670;&nbsp;</a></span>getAgent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string Cosmos::Agent::getAgent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;        {</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_cosmos_1_1_agent.html#a2bf93538bf93f55dcfe134b124b5050b">agentName</a>;</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;        }</div><div class="ttc" id="class_cosmos_1_1_agent_html_a2bf93538bf93f55dcfe134b124b5050b"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a2bf93538bf93f55dcfe134b124b5050b">Cosmos::Agent::agentName</a></div><div class="ttdeci">string agentName</div><div class="ttdef"><b>Definition:</b> agentclass.h:343</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga55f4cd28f0f9823aa19ce182fb1c09be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga55f4cd28f0f9823aa19ce182fb1c09be">&#9670;&nbsp;</a></span>getJson()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Cosmos::Agent::getJson </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjsonnode.html">jsonnode</a> &amp;&#160;</td>
          <td class="paramname"><em>jnode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    {</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;        int32_t <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>=0;</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;        <span class="keywordtype">bool</span> node_found = <span class="keyword">false</span>;</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="structjsonnode.html">jsonnode</a> json : <a class="code" href="class_cosmos_1_1_agent.html#a4dd76eb95f7f88a6d5dea86d96fc72b4">node_list</a>)</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;        {</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="agent__exec_8cpp.html#a90c46d7eb29ad8baa1281a134b56ab4c">node</a>.compare(json.name))</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;            {</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;                node_found = <span class="keyword">true</span>;</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;            }</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;        }</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        <span class="keywordflow">if</span> (!node_found)</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;        {</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="structbeatstruc.html">beatstruc</a> beat : <a class="code" href="class_cosmos_1_1_agent.html#a997299a3ce1040acef3dd9878835ea75">agent_list</a>)</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;            {</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="agent__exec_8cpp.html#a90c46d7eb29ad8baa1281a134b56ab4c">node</a>.compare(beat.node))</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;                {</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;                    <span class="keywordflow">if</span> ((iretn=<a class="code" href="group__agentclass__functions.html#ga197a9db35272fb6da91019ea0fe35ff6">send_request_jsonnode</a>(beat, jnode)) &gt;= 0)</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;                    {</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;                        node_list.push_back(jnode);</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;                        node_found = <span class="keyword">true</span>;</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;                    }</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;                }</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;            }</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;        }</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;        <span class="keywordflow">if</span> (!node_found)</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;        {</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;            iretn = <a class="code" href="group__error__defines.html#ga492b2c369ee46174dd60f14ab69de7d0">GENERAL_ERROR_UNDEFINED</a>;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;        }</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a>;</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    }</div><div class="ttc" id="structbeatstruc_html"><div class="ttname"><a href="structbeatstruc.html">beatstruc</a></div><div class="ttdef"><b>Definition:</b> jsondef.h:854</div></div>
<div class="ttc" id="rw__test_8cpp_html_afece067d35cd26a458c56fa8f276e734"><div class="ttname"><a href="rw__test_8cpp.html#afece067d35cd26a458c56fa8f276e734">iretn</a></div><div class="ttdeci">int iretn</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="group__agentclass__functions_html_ga197a9db35272fb6da91019ea0fe35ff6"><div class="ttname"><a href="group__agentclass__functions.html#ga197a9db35272fb6da91019ea0fe35ff6">Cosmos::Agent::send_request_jsonnode</a></div><div class="ttdeci">int32_t send_request_jsonnode(beatstruc cbeat, jsonnode &amp;jnode, float waitsec=5.)</div><div class="ttdoc">Send request for Node JSON. </div><div class="ttdef"><b>Definition:</b> agentclass.cpp:480</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a997299a3ce1040acef3dd9878835ea75"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a997299a3ce1040acef3dd9878835ea75">Cosmos::Agent::agent_list</a></div><div class="ttdeci">vector&lt; beatstruc &gt; agent_list</div><div class="ttdoc">List of active agents. </div><div class="ttdef"><b>Definition:</b> agentclass.h:324</div></div>
<div class="ttc" id="agent__exec_8cpp_html_a90c46d7eb29ad8baa1281a134b56ab4c"><div class="ttname"><a href="agent__exec_8cpp.html#a90c46d7eb29ad8baa1281a134b56ab4c">node</a></div><div class="ttdeci">string node</div><div class="ttdef"><b>Definition:</b> agent_exec.cpp:131</div></div>
<div class="ttc" id="structjsonnode_html"><div class="ttname"><a href="structjsonnode.html">jsonnode</a></div><div class="ttdef"><b>Definition:</b> jsondef.h:734</div></div>
<div class="ttc" id="group__error__defines_html_ga492b2c369ee46174dd60f14ab69de7d0"><div class="ttname"><a href="group__error__defines.html#ga492b2c369ee46174dd60f14ab69de7d0">GENERAL_ERROR_UNDEFINED</a></div><div class="ttdeci">#define GENERAL_ERROR_UNDEFINED</div><div class="ttdef"><b>Definition:</b> cosmos-errno.h:285</div></div>
<div class="ttc" id="class_cosmos_1_1_agent_html_a4dd76eb95f7f88a6d5dea86d96fc72b4"><div class="ttname"><a href="class_cosmos_1_1_agent.html#a4dd76eb95f7f88a6d5dea86d96fc72b4">Cosmos::Agent::node_list</a></div><div class="ttdeci">vector&lt; jsonnode &gt; node_list</div><div class="ttdoc">List of active Nodes. </div><div class="ttdef"><b>Definition:</b> agentclass.h:326</div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Mar 11 2019 15:06:00 for COSMOS core by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
